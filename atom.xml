<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°èµµçš„å­¦ä¹ ç¬”è®°</title>
  
  
  <link href="http://zhaozhuolin.com/atom.xml" rel="self"/>
  
  <link href="http://zhaozhuolin.com/"/>
  <updated>2023-05-08T14:01:00.954Z</updated>
  <id>http://zhaozhuolin.com/</id>
  
  <author>
    <name>Morgan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Rust-å˜é‡ã€å‡½æ•°ä¸æ§åˆ¶æµ</title>
    <link href="http://zhaozhuolin.com/2023/05/20230507.html"/>
    <id>http://zhaozhuolin.com/2023/05/20230507.html</id>
    <published>2023-05-07T11:20:01.000Z</published>
    <updated>2023-05-08T14:01:00.954Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»-hello-world-å¼€å§‹"><a href="#ä»-hello-world-å¼€å§‹" class="headerlink" title="ä» hello world å¼€å§‹"></a>ä» hello world å¼€å§‹</h1><p>åˆ›å»ºä¸€ä¸ª <code>main.rs</code> æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘è¿è¡Œ</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rustc main.rs</span><br><span class="line">./main</span><br><span class="line">Hello, world!</span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿå¯ä½¿ç”¨<code>Cargo</code>å·¥å…·è¿›è¡Œæ„å»º</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cargo new  <span class="variable">$&#123;project_name&#125;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$&#123;project_name&#125;</span></span><br><span class="line"><span class="comment">#è¿™å°†ä¼šåˆ›å»ºå¦‚ä¸‹ç»“æ„</span></span><br><span class="line"><span class="variable">$&#123;project_name&#125;</span></span><br><span class="line">src/main.rs</span><br><span class="line">Cargo.toml</span><br></pre></td></tr></table></figure><span id="more"></span><p>å…¶ä¸­ï¼Œ<code>toml</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p><figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[package]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&quot;project_name&quot;</span> <span class="comment">#é¡¹ç›®åç§°</span></span><br><span class="line"><span class="attr">version</span> = <span class="string">&quot;0.1.0&quot;</span> <span class="comment">#é¡¹ç›®ç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">edition</span> = <span class="string">&quot;2021&quot;</span> <span class="comment">#Rustç‰ˆæœ¬ï¼Œå½“å‰ä¸º2015 2018 2021ï¼Œé»˜è®¤ä¸º2015</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html</span></span><br><span class="line"></span><br><span class="line"><span class="section">[dependencies]</span> <span class="comment">#ä¾èµ–çš„åŒ…</span></span><br></pre></td></tr></table></figure><p>åœ¨ <code>src/main.rs</code> ä¸­å†™å…¥å†…å®¹ï¼Œ ä½¿ç”¨<code>cargo build/cargo build --release</code> è¿›è¡Œæ„å»ºï¼Œç¼–è¯‘äº§ç‰©å°†ä¼šæ”¾åœ¨<code>target/debug/$&#123;project_name&#125; or target/release/$&#123;project_name&#125;</code>ä¸‹ï¼Œä¹Ÿå¯ä½¿ç”¨<code>cargo run</code>ç›´æ¥ç¼–è¯‘è¿è¡Œï¼Œä¹Ÿå¯ä½¿ç”¨<code>cargo check</code>æ¥è¿›è¡Œç¼–è¯‘æ£€æŸ¥</p><h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><ul><li>å˜é‡ä¸å¯å˜æ€§</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>; <span class="comment">//ä¸å¯å˜</span></span><br><span class="line">x = <span class="number">6</span>; <span class="comment">//ç¼–è¯‘å¤±è´¥</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">y</span> = <span class="number">6</span>; <span class="comment">//å¯å˜</span></span><br><span class="line">y = <span class="number">6</span>; <span class="comment">//æ­£ç¡®çš„ï¼Œæ²¡é—®é¢˜çš„</span></span><br></pre></td></tr></table></figure><ul><li>å¸¸é‡</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SOME_VALUE: <span class="type">u32</span> = <span class="number">1001</span></span><br></pre></td></tr></table></figure><p>å¸¸é‡ä½¿ç”¨<code>const</code>å…³é”®å­—è¿›è¡Œå£°æ˜ï¼Œå¸¸é‡å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­å£°æ˜ï¼Œå¹¶ä¸”å£°æ˜å¸¸é‡æ—¶<strong>å¿…é¡»æ³¨æ˜å€¼çš„ç±»å‹</strong></p><ul><li>éšè—</li></ul><p>å½“å®šä¹‰å¤šä¸ªåŒåçš„å˜é‡æ—¶ï¼Œåªæœ‰ä¹‹å‰çš„å˜é‡éƒ½ä¼šè¢«æœ€åä¸€æ¬¡å®šä¹‰çš„å˜é‡éšè—ï¼Œç›´åˆ°æœ€åä¸€æ¬¡å®šä¹‰çš„å˜é‡ä½œç”¨äºç»“æŸ</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = x * <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x in the inner scope is: &#123;x&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;x&#125;&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç ï¼Œé¦–å…ˆå°†<code>x</code>ç»‘å®šåˆ°å€¼<code>5</code>ä¸Šï¼Œ æ¥ç€é€šè¿‡<code>let x = </code>åˆ›å»ºäº†æ–°çš„å˜é‡<code>x</code>ï¼Œè·å–åˆå§‹å€¼å¹¶åŠ ä¸€ï¼Œæ­¤æ—¶<code>x</code>çš„å€¼å˜ä¸º<code>6</code>ï¼Œæ¥ç€åœ¨èŠ±æ‹¬å·åˆ›å»ºçš„ä½œç”¨äºå†…ï¼Œ<code>x</code>åˆè¢«éšè—äº†ä¸€æ¬¡ï¼Œæ­¤æ—¶<code>x</code>çš„å€¼ä¸º12ï¼Œåœ¨ä½œç”¨äºç»“æŸæ—¶ï¼Œéšè—ä¹Ÿç»“æŸäº†ï¼Œ<code>x</code>åˆå˜å›6ï¼Œå› æ­¤ä»¥ä¸Šç¨‹åºè¾“å‡ºä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cargo run</span><br><span class="line">   Compiling variables v0.1.0 (file:///projects/variables)</span><br><span class="line">    Finished dev [unoptimized + debuginfo] target(s) <span class="keyword">in</span> 0.31s</span><br><span class="line">     Running `target/debug/variables`</span><br><span class="line">The value of x <span class="keyword">in</span> the inner scope is: 12</span><br><span class="line">The value of x is: 6</span><br></pre></td></tr></table></figure><p>éšè—å®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åŒåå˜é‡ï¼Œå¯ä»¥æ”¹å˜å˜é‡å€¼ç±»å‹ï¼Œå¹¶å¤ç”¨è¿™ä¸ªåå­—ï¼Œè€Œ<code>mut</code>å…³é”®å­—æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">spaces</span> = <span class="string">&quot;   &quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">spaces</span> = spaces.<span class="title function_ invoke__">len</span>();</span><br><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡å®šä¹‰ spaces ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œç¬¬äºŒæ¬¡ä¸ºæ•°å­—ç±»å‹ï¼Œä½¿ç”¨éšè—å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">spaces</span> = <span class="string">&quot;   &quot;</span>;</span><br><span class="line">spaces = spaces.<span class="title function_ invoke__">len</span>();</span><br><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡å®šä¹‰ spaces ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œç¬¬äºŒå¥åˆ™å°è¯•è®²ä¸€ä¸ªæ•°å­—ç±»å‹èµ‹å€¼ç»™ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å˜é‡ï¼Œæ­¤æ—¶ç¼–è¯‘ä¼šå¤±è´¥</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>æ¯ä¸€ä¸ªå€¼éƒ½å±äºæŸä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œè¿™å°†é«˜é€ŸRustç¼–è¯‘å™¨å®ƒè¢«æŒ‡å®šä¸ºä½•ç§æ•°æ®ï¼Œä¸€éæ˜ç¡®æ•°æ®å¤„ç†æ–¹å¼ï¼Œå­˜åœ¨ä¸¤ç±»æ•°æ®æºç±»å‹å­é›†ï¼š<em>æ ‡é‡</em>ä¸<em>å¤åˆ</em></p><p>é€šå¸¸ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨å¯¼æ•°æ®ç±»å‹ï¼Œä¸è¿‡æŸäº›æƒ…å†µä¸‹éœ€è¦æ˜¾ç¤ºçš„æŒ‡å®šæ•°æ®ç±»å‹ï¼Œä¾‹å¦‚æ•°æ®ç±»å‹å¯èƒ½æœ‰å¤šç§æƒ…å†µæ—¶ï¼Œä¾‹å¦‚å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°å­—</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">num</span>: <span class="type">u32</span> = <span class="string">&quot;42&quot;</span>.<span class="title function_ invoke__">parse</span>().<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Not a number !&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="æ ‡é‡ç±»å‹"><a href="#æ ‡é‡ç±»å‹" class="headerlink" title="æ ‡é‡ç±»å‹"></a>æ ‡é‡ç±»å‹</h3><p>ä»£è¡¨å•ç‹¬ä¸€ä¸ªå€¼ï¼ŒRustä¸­æœ‰å››ç§åŸºæœ¬æ ‡é‡ç±»å‹ï¼šæ•´å½¢ã€æµ®ç‚¹å‹ã€å¸ƒå°”å‹ä»¥åŠå­—ç¬¦ä¸²ç±»å‹</p><h4 id="æ•´å‹"><a href="#æ•´å‹" class="headerlink" title="æ•´å‹"></a>æ•´å‹</h4><p>é»˜è®¤ç±»å‹ä¸º<code>i32</code></p><table><thead><tr><th>é•¿åº¦</th><th>æœ‰ç¬¦å·</th><th>æ— ç¬¦å·</th></tr></thead><tbody><tr><td>8-bit</td><td><code>i8</code></td><td><code>u8</code></td></tr><tr><td>16-bit</td><td><code>i16</code></td><td><code>u16</code></td></tr><tr><td>32-bit</td><td><code>i32</code></td><td><code>u32</code></td></tr><tr><td>64-bit</td><td><code>i64</code></td><td><code>u64</code></td></tr><tr><td>128-bit</td><td><code>i128</code></td><td><code>u128</code></td></tr><tr><td>arch</td><td><code>isize</code></td><td><code>usize</code></td></tr></tbody></table><p>è€Œå¯¹äºæ•°å­—é¢å€¼ï¼Œå…è®¸ä½¿ç”¨ç±»å‹åç¼€ï¼Œä¾‹å¦‚<code>64u8</code>ä¸º<code>u8</code>ç±»å‹çš„64ï¼Œä¹Ÿå…è®¸ä½¿ç”¨<code>_</code>ä¸‹åˆ’çº¿ä½œä¸ºåˆ†éš”ç¬¦ï¼Œä¾‹å¦‚<code>1_000</code>ç­‰ä»·äº<code>1000</code></p><table><thead><tr><th>æ•°å­—å­—é¢å€¼</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>Decimal (åè¿›åˆ¶)</td><td><code>98_222</code></td></tr><tr><td>Hex (åå…­è¿›åˆ¶)</td><td><code>0xff</code></td></tr><tr><td>Octal (å…«è¿›åˆ¶)</td><td><code>0o77</code></td></tr><tr><td>Binary (äºŒè¿›åˆ¶)</td><td><code>0b1111_0000</code></td></tr><tr><td>Byte (å•å­—èŠ‚å­—ç¬¦)(ä»…é™äº<code>u8</code>)</td><td><code>b&#39;A&#39;</code></td></tr></tbody></table><blockquote><p>å…³äºæ•´å‹æº¢å‡ºï¼ŒDebugæ¨¡å¼ä¸‹æ„å»ºçš„äºŒè¿›åˆ¶ï¼Œåœ¨å‘ç”Ÿæº¢å‡ºæ—¶ä¼španicï¼ŒReleaseæ¨¡å¼ä¸‹æ„å»ºçš„äºŒè¿›åˆ¶ä¼šè¿›è¡ŒäºŒè¿›åˆ¶è¡¥ç æ“ä½œï¼Œæ¥ç»•å›æœ€å°å€¼ï¼Œå¦‚256+1 &#x3D; 0</p><p>å¯¹äºæ•´å‹æº¢å‡ºï¼Œå¯é‡‡ç”¨ä»¥ä¸‹æ–¹å¼æ˜¾ç¤ºå¤„ç†</p><ul><li>æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ <code>wrapping_*</code> æ–¹æ³•è¿›è¡Œ wrappingï¼Œå¦‚ <code>wrapping_add</code></li><li>å¦‚æœ <code>checked_*</code> æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› <code>None</code>å€¼</li><li>ç”¨ <code>overflowing_*</code> æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º</li><li>ç”¨ <code>saturating_*</code> æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†</li></ul></blockquote><h4 id="æµ®ç‚¹å‹"><a href="#æµ®ç‚¹å‹" class="headerlink" title="æµ®ç‚¹å‹"></a>æµ®ç‚¹å‹</h4><p><code>f32</code>ä¸<code>f64</code>ï¼Œåˆ†åˆ«å 32ä½äº64ä½ï¼Œé»˜è®¤ä¸º<code>f64</code>ï¼Œæµ®ç‚¹å‹æ•°æ®éƒ½æ˜¯æœ‰ç¬¦å·çš„</p><h4 id="å¸ƒå°”å‹"><a href="#å¸ƒå°”å‹" class="headerlink" title="å¸ƒå°”å‹"></a>å¸ƒå°”å‹</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">t</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">f</span>: <span class="type">bool</span> = <span class="literal">false</span>; <span class="comment">// with explicit type annotation</span></span><br></pre></td></tr></table></figure><h4 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h4><p>å…³é”®å­—ä¸º<code>char</code>ï¼Œç±»å‹å¤§å°ä¸º4ä¸ªå­—èŠ‚ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ªUnicodeæ ‡é‡å€¼</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">c</span> = <span class="string">&#x27;z&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">z</span>: <span class="type">char</span> = <span class="string">&#x27;â„¤&#x27;</span>; <span class="comment">// with explicit type annotation</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">heart_eyed_cat</span> = &#x27;ğŸ˜»&#x27;;</span><br></pre></td></tr></table></figure><h3 id="å¤åˆç±»å‹"><a href="#å¤åˆç±»å‹" class="headerlink" title="å¤åˆç±»å‹"></a>å¤åˆç±»å‹</h3><p>å¯å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ï¼Œå­˜åœ¨ä¸¤ç§åŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ä¸æ•°ç»„</p><h4 id="å…ƒç»„ç±»å‹"><a href="#å…ƒç»„ç±»å‹" class="headerlink" title="å…ƒç»„ç±»å‹"></a>å…ƒç»„ç±»å‹</h4><p>å°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆä»…ä¸€ä¸ªå¤åˆç±»å‹ï¼Œå…ƒç»„é•¿åº¦å›ºå®šï¼Œä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå˜åŒ–</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">tup</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">u8</span>) = (<span class="number">500</span>, <span class="number">1.23</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>å½“æƒ³ä»å…ƒç»„ä¸­è·å–å•ä¸ªå€¼æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥ç»“æ„å…ƒç»„å€¼ï¼Œä¾‹å¦‚</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">tup</span> = (<span class="number">500</span>, <span class="number">1.23</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> (x, y, z) = tup;</span><br><span class="line"><span class="comment">//åˆ›å»ºäº† x, y, z æ¥å°† tup åˆ†æˆäº†ä¸‰ä¸ªå˜é‡ï¼Œ</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä½¿ç”¨<code>.</code>æ¥è¿›è¡Œè®¿é—®ï¼Œä¾‹å¦‚<code>tup.0</code>å³ä¸ºç¬¬ä¸€ä¸ªå€¼<code>500</code></p><p>ä¸å¸¦ä»»ä½•å€¼çš„å…ƒç»„æœ‰ä¸ªç‰¹æ®Šçš„åç§°ï¼Œå«åš <strong>å•å…ƒ</strong> å…ƒç»„ã€‚è¿™ç§å€¼ä»¥åŠå¯¹åº”çš„ç±»å‹éƒ½å†™ä½œ <code>()</code>ï¼Œè¡¨ç¤ºç©ºå€¼æˆ–ç©ºçš„è¿”å›ç±»å‹ã€‚<strong>å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼ï¼Œåˆ™ä¼šéšå¼è¿”å›å•å…ƒå€¼ã€‚</strong></p><h4 id="æ•°ç»„ç±»å‹"><a href="#æ•°ç»„ç±»å‹" class="headerlink" title="æ•°ç»„ç±»å‹"></a>æ•°ç»„ç±»å‹</h4><p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç±»å‹å¿…é¡»ç›¸åŒï¼Œä¸”æ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œæ•°ç»„åœ¨æ ˆä¸Šåˆ†é…ç©ºé—´</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">array</span> = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">array2</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]; <span class="comment">//5ä¸ªi32ç±»å‹æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">array3</span> = [<span class="number">3</span>; <span class="number">5</span>];<span class="comment">//æ ‡è¯†æ•°ç»„ä¸­æœ‰ 5 ä¸ª 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">one</span> = array[<span class="number">1</span>];</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;number is &#123;one&#125;&quot;</span>);</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°ä¸æ§åˆ¶æµ"><a href="#å‡½æ•°ä¸æ§åˆ¶æµ" class="headerlink" title="å‡½æ•°ä¸æ§åˆ¶æµ"></a>å‡½æ•°ä¸æ§åˆ¶æµ</h1><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>ä½¿ç”¨å…³é”®å­—<code>fun</code>å£°æ˜ï¼Œå‡½æ•°åä¸å˜é‡åä½¿ç”¨Unixé£æ ¼ï¼Œå°å†™å­—æ¯ï¼Œå¹¶ä½¿ç”¨ä¸‹æ¢çº¿åˆ†å‰²å•è¯</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">another_function</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">another_function</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Another function.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Rust ä¸å…³å¿ƒå‡½æ•°å®šä¹‰æ‰€åœ¨çš„ä½ç½®ï¼Œåªè¦å‡½æ•°è¢«è°ƒç”¨æ—¶å‡ºç°åœ¨è°ƒç”¨ä¹‹å¤„å¯è§çš„ä½œç”¨åŸŸå†…å°±è¡Œã€‚</strong></p><h3 id="å‡½æ•°çš„å‚æ•°"><a href="#å‡½æ•°çš„å‚æ•°" class="headerlink" title="å‡½æ•°çš„å‚æ•°"></a>å‡½æ•°çš„å‚æ•°</h3><p>å‡½æ•°çš„å‚æ•°å¿…é¡»å£°æ˜å‚æ•°ç±»å‹ï¼Œå¤šä¸ªå‚æ•°ä½¿ç”¨é€—å·åˆ†å‰²</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">another_function</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">another_function</span>(x: <span class="type">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;x&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯­å¥å’Œè¡¨è¾¾å¼"><a href="#è¯­å¥å’Œè¡¨è¾¾å¼" class="headerlink" title="è¯­å¥å’Œè¡¨è¾¾å¼"></a>è¯­å¥å’Œè¡¨è¾¾å¼</h3><ul><li><strong>è¯­å¥</strong> æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ï¼Œä»¥åˆ†å·ç»“å°¾</li><li><strong>è¡¨è¾¾å¼</strong> è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼</li></ul><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = <span class="number">1</span>; <span class="comment">//è¯­å¥ä¸ä¼šè¿”å›ä»»ä½•å€¼</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = (<span class="keyword">let</span> <span class="variable">c</span> = <span class="number">2</span>);<span class="comment">//ç¼–è¯‘ä¼šå¤±è´¥ let c = 2 ä¸ä¼šè¿”å›å€¼</span></span><br></pre></td></tr></table></figure><p>åœ¨rustä¸­ï¼Œå‡½æ•°è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚å®è°ƒç”¨æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚ç”¨å¤§æ‹¬å·åˆ›å»ºçš„ä¸€ä¸ªæ–°çš„å—ä½œç”¨åŸŸä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = <span class="number">1</span>;</span><br><span class="line">    b + <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ­¤æ—¶ a = 4</span></span><br></pre></td></tr></table></figure><h3 id="å…·æœ‰è¿”å›å€¼çš„å‡½æ•°"><a href="#å…·æœ‰è¿”å›å€¼çš„å‡½æ•°" class="headerlink" title="å…·æœ‰è¿”å›å€¼çš„å‡½æ•°"></a>å…·æœ‰è¿”å›å€¼çš„å‡½æ•°</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">ret</span>() <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="title function_ invoke__">ret</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ§åˆ¶æµ"><a href="#æ§åˆ¶æµ" class="headerlink" title="æ§åˆ¶æµ"></a>æ§åˆ¶æµ</h2><h3 id="ifè¡¨è¾¾å¼"><a href="#ifè¡¨è¾¾å¼" class="headerlink" title="ifè¡¨è¾¾å¼"></a><code>if</code>è¡¨è¾¾å¼</h3><p><strong><code>if</code>è¡¨è¾¾å¼ä½¿ç”¨çš„å€¼å¿…é¡»ä¸º<code>bool</code>ç±»å‹</strong></p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">num</span> = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">if</span> num &lt; <span class="number">5</span> &#123;</span><br><span class="line">   <span class="comment">//...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num &#123; <span class="comment">//ä¸èƒ½è¿™æ ·ä½¿ç”¨</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> num == <span class="number">1</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> num == <span class="number">2</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>if</code>ä¹Ÿå¯åœ¨<code>let</code>ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯éœ€è¦æ¯ä¸ªåˆ†æ”¯éƒ½å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">flag</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">num</span> = <span class="keyword">if</span> flag &#123;<span class="number">0</span>&#125; <span class="keyword">else</span> &#123;<span class="number">1</span>&#125;; <span class="comment">//å¯ä»¥</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">num2</span> = <span class="keyword">if</span> flag &#123;<span class="number">0</span>&#125; <span class="keyword">else</span> &#123;<span class="string">&quot;one&quot;</span>&#125; <span class="comment">//ä¸è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h3><h4 id="loopå¾ªç¯"><a href="#loopå¾ªç¯" class="headerlink" title="loopå¾ªç¯"></a>loopå¾ªç¯</h4><p>æ— æ¡ä»¶çš„å¾ªç¯ï¼Œå¯ä»¥ä½¿ç”¨<code>break</code>ä»å¾ªç¯è·³å‡ºï¼ŒåŒæ—¶å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>continue</code>è·³è¿‡å¾ªç¯</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">loop</span> &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;loopping !&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">cnt</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">res</span> = <span class="keyword">loop</span> &#123;</span><br><span class="line">    cnt += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> cnt == <span class="number">100</span> &#123;</span><br><span class="line">        <span class="keyword">break</span> cnt * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//res = 200</span></span><br></pre></td></tr></table></figure><p><code>break</code>å’Œ<code>continue</code>ä»…èƒ½æ§åˆ¶å½“å‰çš„å¾ªç¯ï¼Œå¯¹äºåµŒå¥—çš„å¾ªç¯ï¼Œå¯ä»¥é…åˆæ ‡ç­¾ä¸€èµ·ä½¿ç”¨æ¥æ§åˆ¶å¾ªç¯</p><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">num</span> = <span class="number">0</span>;</span><br><span class="line"><span class="symbol">&#x27;loop_start</span>&#x27;: <span class="keyword">loop</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;cnt = &#123;cnt&#125;&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">remaining</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;remaining = &#123;remaining&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> remaining == <span class="number">9</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> cnt == <span class="number">2</span> &#123;</span><br><span class="line">            <span class="keyword">break</span> <span class="symbol">&#x27;loop_start</span>&#x27;;</span><br><span class="line">        &#125;</span><br><span class="line">        remaining -= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cnt += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;End cnt = &#123;cnt&#125;&quot;</span>);</span><br></pre></td></tr></table></figure><h4 id="whileæ¡ä»¶å¾ªç¯"><a href="#whileæ¡ä»¶å¾ªç¯" class="headerlink" title="whileæ¡ä»¶å¾ªç¯"></a><code>while</code>æ¡ä»¶å¾ªç¯</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">num</span> = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">while</span> num != <span class="number">0</span> &#123;</span><br><span class="line">num -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">index</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> index &lt; <span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;the value is: &#123;&#125;&quot;</span>, a[index]);</span><br><span class="line">    index += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="foréå†é›†åˆ"><a href="#foréå†é›†åˆ" class="headerlink" title="foréå†é›†åˆ"></a><code>for</code>éå†é›†åˆ</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>, <span class="number">50</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="variable">one</span> <span class="keyword">in</span> a &#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;the value is: &#123;one&#125;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä»-hello-world-å¼€å§‹&quot;&gt;&lt;a href=&quot;#ä»-hello-world-å¼€å§‹&quot; class=&quot;headerlink&quot; title=&quot;ä» hello world å¼€å§‹&quot;&gt;&lt;/a&gt;ä» hello world å¼€å§‹&lt;/h1&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ª &lt;code&gt;main.rs&lt;/code&gt; æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹&lt;/p&gt;
&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;title function_&quot;&gt;main&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;println!&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘è¿è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;rustc main.rs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./main&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Hello, world!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ul&gt;
&lt;li&gt;ä¹Ÿå¯ä½¿ç”¨&lt;code&gt;Cargo&lt;/code&gt;å·¥å…·è¿›è¡Œæ„å»º&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cargo new  &lt;span class=&quot;variable&quot;&gt;$&amp;#123;project_name&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;variable&quot;&gt;$&amp;#123;project_name&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#è¿™å°†ä¼šåˆ›å»ºå¦‚ä¸‹ç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;$&amp;#123;project_name&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	src/main.rs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	Cargo.toml&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="Rust" scheme="http://zhaozhuolin.com/categories/Rust/"/>
    
    
    <category term="Rust" scheme="http://zhaozhuolin.com/tags/Rust/"/>
    
  </entry>
  
  <entry>
    <title>CMakeè¯­æ³•å°ç»“</title>
    <link href="http://zhaozhuolin.com/2023/03/20230318.html"/>
    <id>http://zhaozhuolin.com/2023/03/20230318.html</id>
    <published>2023-03-18T12:55:09.000Z</published>
    <updated>2023-05-07T11:15:56.082Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h1><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><h3 id="PROJECTå…³é”®å­—"><a href="#PROJECTå…³é”®å­—" class="headerlink" title="PROJECTå…³é”®å­—"></a>PROJECTå…³é”®å­—</h3><p><code>PROJECT(name)</code>æŒ‡å®šå·¥ç¨‹åç§°ï¼Œ é»˜è®¤æ”¯æŒæ‰€æœ‰è¯­è¨€</p><p><code>PROJECT(name CXX)</code>æŒ‡å®šå·¥ç¨‹åç§°ï¼Œ æ”¯æŒC++</p><p>ä¼šéšå¼å®šä¹‰ä¸¤ä¸ªå˜é‡</p><ul><li>${name}_BINARY_DIR</li><li>${name}_SOURCE_DIR</li></ul><p>ä¿®æ”¹å·¥ç¨‹åæ—¶ä¼šå°†è¿™ä¸¤ä¸ªå˜é‡ä¿®æ”¹ï¼Œå¯é€šè¿‡é¢„å®šä¹‰ä¸¤ä¸ªå˜é‡<code>PROJECT_BINARY_DIR</code>ä»¥åŠ<code>PROJECT_SOURCE_DIR</code>è§£å†³è¯¥é—®é¢˜</p><h3 id="SETå…³é”®å­—"><a href="#SETå…³é”®å­—" class="headerlink" title="SETå…³é”®å­—"></a>SETå…³é”®å­—</h3><p>è®¾å®šå€¼ï¼Œ<code>SET(SRC_LIST main.cpp a.cpp b.cpp)</code>ï¼Œå³è®¾å®šäº†<code>SEC_LIST</code>çš„å€¼</p><h3 id="MESSAGEå…³é”®å­—"><a href="#MESSAGEå…³é”®å­—" class="headerlink" title="MESSAGEå…³é”®å­—"></a>MESSAGEå…³é”®å­—</h3><p>è¾“å‡ºè‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä¸‰ç§</p><ul><li>SEND_ERRORï¼Œäº§ç”Ÿé”™è¯¯ç”Ÿæˆè¿‡ç¨‹è¢«è·³è¿‡</li><li>STAUSï¼Œæ˜¾ç¤ºæ™®é€šçš„æ¶ˆæ¯</li><li>FATAL_ERRORï¼Œç»ˆæ­¢cmakeè¿‡ç¨‹</li></ul><span id="more"></span><h3 id="ADD-EXECUTABLE"><a href="#ADD-EXECUTABLE" class="headerlink" title="ADD_EXECUTABLE"></a>ADD_EXECUTABLE</h3><p>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶<code>ADD_EXECUTABLE(target src)</code></p><h3 id="ADD-SUBDIRECTORY"><a href="#ADD-SUBDIRECTORY" class="headerlink" title="ADD_SUBDIRECTORY"></a>ADD_SUBDIRECTORY</h3><ul><li>æ·»åŠ å­˜æ”¾æºæ–‡ä»¶çš„å­ç›®å½•ï¼Œå¹¶å¯æŒ‡å®šä¸­é—´äºŒè¿›åˆ¶ä¸ç›®æ ‡äºŒè¿›åˆ¶çš„å­˜æ”¾ä½ç½®</li><li><code>EXECULDE_FORM_ALL</code>å¯å°†å‚æ•°ä»ç¼–è¯‘ä¸­æ’é™¤</li><li><code>ADD_SUBDIRECTORY(src bin)</code><ul><li>å°†srcç›®å½•åŠ å…¥å·¥ç¨‹å¹¶æŒ‡å®šç¼–è¯‘è¾“å‡ºï¼ˆåŒ…å«ä¸­é—´ç»“æœï¼‰è·¯å¾„ä¸ºbinç›®å½•</li><li>å¦‚æœä¸è¿›è¡Œ bin ç›®å½•æŒ‡å®šï¼Œ é‚£ç¼–è¯‘ç»“æœï¼ˆåŒ…å«ä¸­é—´æ–‡ä»¶ï¼‰å°†ä¼šå­˜æ”¾åœ¨æŒ‡å®šçš„ æ‰§è¡Œcmakeå‘½ä»¤ç›®å½•ä¸‹çš„src</li></ul></li></ul><h3 id="å…³äºæ›´æ”¹äºŒè¿›åˆ¶ä¿å­˜è·¯å¾„"><a href="#å…³äºæ›´æ”¹äºŒè¿›åˆ¶ä¿å­˜è·¯å¾„" class="headerlink" title="å…³äºæ›´æ”¹äºŒè¿›åˆ¶ä¿å­˜è·¯å¾„"></a>å…³äºæ›´æ”¹äºŒè¿›åˆ¶ä¿å­˜è·¯å¾„</h3><ul><li><code>SET(EXECUTABLE_OUTPUT_PATH $(PROJECT_BINARY_DIR)/bin)</code></li><li><code>SET(LIBRARY_OUTPUT_PATH $(PROJECT_BINARY_DIR)/lib)</code></li></ul><h3 id="åŸåˆ™"><a href="#åŸåˆ™" class="headerlink" title="åŸåˆ™"></a>åŸåˆ™</h3><ol><li>å˜é‡ä½¿ç”¨<code>$&#123;&#125;</code>å–å€¼ï¼Œ<strong>ä½†åœ¨ IF è¯­å¥ä¸­ç›´æ¥ä½¿ç”¨å˜é‡å</strong></li><li>æŒ‡ä»¤ä¸­çš„å‚æ•°éœ€ä½¿ç”¨<code>()</code>æ‹¬èµ·æ¥ï¼Œå‚æ•°ä¹‹é—´ä½¿ç”¨ç©ºæ ¼æˆ–åˆ†å·åˆ†éš”</li><li>æŒ‡ä»¤å¤§å°å†™æ— å…³</li><li>å¦‚æœå‚æ•°ä¸­åŒ…å«ç©ºæ ¼ï¼Œåˆ™éœ€è¦å°†å‚æ•°ä½¿ç”¨åŒå¼•å·åŒ…æ‹¬</li></ol><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><blockquote><p>INSTALLï¼šå®‰è£…æŒ‡ä»¤ï¼ŒåŒ…æ‹¬äºŒè¿›åˆ¶ï¼ŒåŠ¨æ€åº“ï¼Œé™æ€åº“ä»¥åŠæ–‡ä»¶ï¼Œç›®å½•ï¼Œè„šæœ¬ç­‰</p><p>CMAKE_INSTALL_PREFIXï¼šâ€“prefix</p></blockquote><ul><li>å®‰è£…æ–‡ä»¶ï¼š<code>INSTALL(FILES file1 file2 DESTINATION dst_dir)</code>ï¼Œå°†<code>file1</code>ä»¥åŠ<code>file2</code>å®‰è£…åˆ°<code>dest_dir</code>ä¸­ï¼Œå…¶ä¸­<code>FILES</code>ä¸ºæ–‡ä»¶ï¼Œ<code>DESTINATION </code>ä¸€èˆ¬ä¸ºï¼š<ul><li>ç»å¯¹è·¯å¾„</li><li>ç›¸å¯¹è·¯å¾„ï¼Œå³ä¸º<code>$&#123;CMAKE_INSTALL_PREFIX&#125;/$&#123;DESTINATION&#125;</code>ï¼Œ<code>CMAKE_INSTALL_PREFIX</code>ä¸€èˆ¬é»˜è®¤ä¸º<code>/usr/local/</code>ï¼Œå¯ä½¿ç”¨<code>cmake -DCMAKE_INSTALL_PREFIX=/usr</code>æŒ‡å®šè¯¥å˜é‡çš„å€¼</li></ul></li><li>å®‰è£…è„šæœ¬ï¼š<code>INSTALL(PROGRAMS abc.sh bin)</code>ï¼Œ<code>PROGRAMS</code> ä¸ºéç›®æ ‡æ–‡ä»¶çš„å¯æ‰§è¡Œç¨‹åºå®‰è£…</li><li>å®‰è£…ç›®å½•ï¼š<ul><li>ç›´æ¥åœ¨éœ€è¦å®‰è£…çš„ç›®å½•å†…åˆ›å»ºCMakeList.txtï¼Œåœ¨å…¶å†…å†™INSTALL file</li><li><code>INSTALL(DIRECTORY dir/ DESTINATION dst_dir)</code>ï¼šè‹¥ä¸º<code>dir/</code>åˆ™è¡¨ç¤ºå°†<code>dir</code>ç›®å½•ä¸‹æ‰€æœ‰å†…å®¹å®‰è£…åˆ°<code>dst_dir</code>ä¸‹ï¼Œè‹¥ä¸º<code>dir</code>åˆ™è¡¨ç¤ºå°†<code>dir</code>ç›®å½•æœ¬èº«å®‰è£…åˆ°<code>dst_dir</code></li></ul></li><li>å®‰è£…åº“æ–‡ä»¶ï¼š<code>INSTALL(TARGET bin_name lib_name_static LIBRARY DESTINATION lib ARCHIVE DESTINATION lib)</code>ï¼Œå®‰è£…äºŒè¿›åˆ¶ï¼Œé™æ€æˆ–åŠ¨æ€åº“å‡éœ€è¦ä½¿ç”¨<code>TARGET</code>ï¼Œ<code>ARCHIVE</code>ç‰¹æŒ‡é™æ€åº“ï¼Œ<code>LIBRARY</code>ç‰¹æŒ‡åŠ¨æ€åº“ï¼Œ<code>RUNTIME</code>ç‰¹æŒ‡å¯æ‰§è¡Œçš„ç›®æ ‡äºŒè¿›åˆ¶</li></ul><h2 id="æ„å»ºé™æ€åº“ä¸åŠ¨æ€åº“"><a href="#æ„å»ºé™æ€åº“ä¸åŠ¨æ€åº“" class="headerlink" title="æ„å»ºé™æ€åº“ä¸åŠ¨æ€åº“"></a>æ„å»ºé™æ€åº“ä¸åŠ¨æ€åº“</h2><p><code>ADD_LIBRARY(lib_name SHARED $&#123;LIB_SRC&#125;)</code></p><ul><li>lib_nameï¼šåº“åç§°</li><li>SHAREDï¼šè¡¨ç¤ºç”ŸæˆåŠ¨æ€åº“ï¼ŒSTATICè¡¨ç¤ºç”Ÿæˆé™æ€åº“</li><li>LIB_SRCï¼šæºæ–‡ä»¶</li></ul><blockquote><p>åŒæ—¶æ„å»ºé™æ€åº“ä¸åŠ¨æ€åº“çš„æ–¹å¼ï¼š</p><ol><li><p>ä½¿ç”¨ä¸¤ä¸ªåå­—ï¼Œä¾‹å¦‚</p><ul><li><code>ADD_LIBRARY(lib_name SHARED $&#123;LIB_SRC&#125;)</code></li><li><code>ADD_LIBRARY(lib_name_static STATIC $&#123;LIB_SRC&#125;)</code></li></ul></li><li><p>ä½¿ç”¨<code>SET_TARGET_PROPERTIES</code>ï¼Œè®¾ç½®è¾“å‡ºåç§°</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span>(LIB_NAME_SRC lib_src.cpp)</span><br><span class="line"><span class="keyword">ADD_LIBRARY</span>(lib_name_static STATIC <span class="variable">$&#123;LIBNAME_SRC&#125;</span>)</span><br><span class="line">   </span><br><span class="line">//é‡å‘½ålib_name_staticä¸ºlib_name</span><br><span class="line">SET_TARGET_PROPETIES(lib_name_static PROPETIES OUTPUT <span class="string">&quot;lib_name&quot;</span>)</span><br><span class="line">//åœ¨æ„å»ºæ–°çš„ç›®æ ‡æ—¶ï¼Œä¼šå°è¯•æ¸…ç†æ‰å…¶ä»–ä½¿ç”¨ä½¿ç”¨è¿™ä¸ªåç§°çš„åº“ï¼Œä¾‹å¦‚æ„å»ºlib_name.soæ—¶ä¼šæ¸…é™¤æ‰lib_name.a</span><br><span class="line">SET_TARGET_PROPETIES(lib_name_static PROPETIES CLEAN_DIRECT_OUTPUT <span class="number">1</span>)</span><br><span class="line">   </span><br><span class="line"><span class="keyword">ADD_LIBRARY</span>(lib_name SHARED <span class="variable">$&#123;LIBNAME_SRC&#125;</span>)</span><br><span class="line">   </span><br><span class="line">SET_TARGET_PROPETIES(lib_name PROPETIES OUTPUT <span class="string">&quot;lib_name&quot;</span>)</span><br><span class="line">SET_TARGET_PROPETIES(lib_name PROPETIES CLEAN_DIRECT_OUTPUT <span class="number">1</span>)</span><br></pre></td></tr></table></figure></li></ol></blockquote><h3 id="åŠ¨æ€åº“ç‰ˆæœ¬å·è®¾å®š"><a href="#åŠ¨æ€åº“ç‰ˆæœ¬å·è®¾å®š" class="headerlink" title="åŠ¨æ€åº“ç‰ˆæœ¬å·è®¾å®š"></a>åŠ¨æ€åº“ç‰ˆæœ¬å·è®¾å®š</h3><p><code>SET_TARGET_PROPERTIES(lib_name PROPERTIES VERSION 1.2 SOVERSION 1)</code>ï¼Œå…¶ä¸­ï¼š</p><ul><li>VERSIONï¼šåŠ¨æ€åº“ç‰ˆæœ¬</li><li>SOVERSIONï¼šAPIç‰ˆæœ¬</li></ul><h2 id="ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶"><a href="#ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶"></a>ä½¿ç”¨å¤–éƒ¨å…±äº«åº“å’Œå¤´æ–‡ä»¶</h2><p><code>INCLUDE_DIRECTORIES(head_path)</code>ï¼ŒæŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„</p><p><code>LINK_DIRECTORIES(lib_path)</code>ï¼ŒæŒ‡å®šåº“è·¯å¾„</p><p><code>TARGET_LINK_LIBRARIES(bin_name lib_name)</code>ï¼ŒæŒ‡å®šäºŒè¿›åˆ¶<code>lib_name</code>è¦é“¾æ¥çš„åº“æ–‡ä»¶</p><h2 id="å¸¸è§ç¯å¢ƒå˜é‡"><a href="#å¸¸è§ç¯å¢ƒå˜é‡" class="headerlink" title="å¸¸è§ç¯å¢ƒå˜é‡"></a>å¸¸è§ç¯å¢ƒå˜é‡</h2><ul><li><code>CMAKE_INCLUDE_PATH</code>ï¼Œå¤´æ–‡ä»¶è·¯å¾„</li><li><code>CMAKE_LIBRARY_PATH</code>ï¼Œåº“æ–‡ä»¶è·¯å¾„</li><li><code>CMAKE_BUILD_TYPE</code>ï¼Œrelease or debugç­‰</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åŸºç¡€è¯­æ³•&quot;&gt;&lt;a href=&quot;#åŸºç¡€è¯­æ³•&quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€è¯­æ³•&quot;&gt;&lt;/a&gt;åŸºç¡€è¯­æ³•&lt;/h1&gt;&lt;h2 id=&quot;å…³é”®å­—&quot;&gt;&lt;a href=&quot;#å…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;å…³é”®å­—&quot;&gt;&lt;/a&gt;å…³é”®å­—&lt;/h2&gt;&lt;h3 id=&quot;PROJECTå…³é”®å­—&quot;&gt;&lt;a href=&quot;#PROJECTå…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;PROJECTå…³é”®å­—&quot;&gt;&lt;/a&gt;PROJECTå…³é”®å­—&lt;/h3&gt;&lt;p&gt;&lt;code&gt;PROJECT(name)&lt;/code&gt;æŒ‡å®šå·¥ç¨‹åç§°ï¼Œ é»˜è®¤æ”¯æŒæ‰€æœ‰è¯­è¨€&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PROJECT(name CXX)&lt;/code&gt;æŒ‡å®šå·¥ç¨‹åç§°ï¼Œ æ”¯æŒC++&lt;/p&gt;
&lt;p&gt;ä¼šéšå¼å®šä¹‰ä¸¤ä¸ªå˜é‡&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;${name}_BINARY_DIR&lt;/li&gt;
&lt;li&gt;${name}_SOURCE_DIR&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¿®æ”¹å·¥ç¨‹åæ—¶ä¼šå°†è¿™ä¸¤ä¸ªå˜é‡ä¿®æ”¹ï¼Œå¯é€šè¿‡é¢„å®šä¹‰ä¸¤ä¸ªå˜é‡&lt;code&gt;PROJECT_BINARY_DIR&lt;/code&gt;ä»¥åŠ&lt;code&gt;PROJECT_SOURCE_DIR&lt;/code&gt;è§£å†³è¯¥é—®é¢˜&lt;/p&gt;
&lt;h3 id=&quot;SETå…³é”®å­—&quot;&gt;&lt;a href=&quot;#SETå…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;SETå…³é”®å­—&quot;&gt;&lt;/a&gt;SETå…³é”®å­—&lt;/h3&gt;&lt;p&gt;è®¾å®šå€¼ï¼Œ&lt;code&gt;SET(SRC_LIST main.cpp a.cpp b.cpp)&lt;/code&gt;ï¼Œå³è®¾å®šäº†&lt;code&gt;SEC_LIST&lt;/code&gt;çš„å€¼&lt;/p&gt;
&lt;h3 id=&quot;MESSAGEå…³é”®å­—&quot;&gt;&lt;a href=&quot;#MESSAGEå…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;MESSAGEå…³é”®å­—&quot;&gt;&lt;/a&gt;MESSAGEå…³é”®å­—&lt;/h3&gt;&lt;p&gt;è¾“å‡ºè‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä¸‰ç§&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SEND_ERRORï¼Œäº§ç”Ÿé”™è¯¯ç”Ÿæˆè¿‡ç¨‹è¢«è·³è¿‡&lt;/li&gt;
&lt;li&gt;STAUSï¼Œæ˜¾ç¤ºæ™®é€šçš„æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;FATAL_ERRORï¼Œç»ˆæ­¢cmakeè¿‡ç¨‹&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="ç¬”è®°" scheme="http://zhaozhuolin.com/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="cmake" scheme="http://zhaozhuolin.com/tags/cmake/"/>
    
  </entry>
  
  <entry>
    <title>å›¾</title>
    <link href="http://zhaozhuolin.com/2021/03/20210312.html"/>
    <id>http://zhaozhuolin.com/2021/03/20210312.html</id>
    <published>2021-03-12T05:08:09.000Z</published>
    <updated>2023-05-07T11:18:08.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å›¾çš„æ„æˆ"><a href="#å›¾çš„æ„æˆ" class="headerlink" title="å›¾çš„æ„æˆ"></a>å›¾çš„æ„æˆ</h1><p><strong>é¡¶ç‚¹é›†åˆ</strong>+<strong>è¾¹çš„é›†åˆ</strong>ï¼š<code>G = (V, E)</code>ï¼Œé¡¶ç‚¹é›†åˆ<code>V = &#123;x | xå±äºæŸä¸ªæ•°æ®å¯¹è±¡åŠ&#125;</code>æ˜¯æœ‰ç©·éç©ºé›†åˆ</p><ul><li><p><code>E = &#123;(x, y) | x, yå±äºV&#125;</code>æˆ–è€…<code>E = &#123;&lt;x, y&gt; | x, yå±äºV &amp;&amp; Path(x, y)&#125;</code>æ˜¯é¡¶ç‚¹é—´å…³ç³»çš„æœ‰ç©·é›†åˆï¼Œä¹Ÿå«è¾¹é›†åˆ</p></li><li><p><code>(x, y)</code>è¡¨ç¤ºxåˆ°yçš„ä¸€æ¡åŒå‘é€šé“ï¼Œå³<code>(x, y)</code>æ˜¯æ— æ–¹å‘çš„ï¼Œ<code>Path(x, y)</code>è¡¨ç¤ºä»xåˆ°yçš„ä¸€æ¡å•å‘é€šè·¯ï¼Œå³<code>Path(x, y)æ˜¯æœ‰æ–¹å‘çš„</code></p></li></ul><p>é¡¶ç‚¹å’Œè¾¹ï¼šå›¾ä¸­èŠ‚ç‚¹æˆä¸ºé¡¶ç‚¹ï¼Œç¬¬iä¸ªé¡¶ç‚¹è®°ä½œviï¼Œ ä¸¤ä¸ªé¡¶ç‚¹viå’Œvjç›¸å…³è”ç§°ä½œé¡¶ç‚¹viå’Œé¡¶ç‚¹vjä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œå›¾ä¸­ç¬¬kæ¡è¾¹è®°ä½œekï¼Œ<code>ek = (vi, vj)</code>æˆ–<code>ek = &lt;vi, vj&gt;</code></p><ul><li>åœ¨æœ‰å‘å›¾ä¸­ï¼Œé¡¶ç‚¹å¯¹<code>&lt;x, y&gt;</code>æ˜¯æœ‰åºçš„ï¼Œé¡¶ç‚¹å¯¹<code>&lt;x, y&gt;</code>ç§°ä¸ºé¡¶ç‚¹xåˆ°é¡¶ç‚¹yçš„ä¸€æ¡è¾¹(å¼§)ï¼Œ<code>&lt;x, y&gt;</code>å’Œ<code>&lt;y ,x&gt;</code>æ˜¯ä¸¤æ¡ä¸åŒçš„è¾¹ï¼Œå¦‚G3ã€G4</li><li>åœ¨æ— å‘å›¾ä¸­ï¼Œé¡¶ç‚¹å¯¹(x, y)æ˜¯æ— åºçš„ï¼Œé¡¶ç‚¹å¯¹(x,y) ç§°ä¸ºé¡¶ç‚¹xå’Œé¡¶ç‚¹yç›¸å…³è”çš„ä¸€æ¡è¾¹ï¼Œè¿™æ¡è¾¹æ²¡æœ‰ç‰¹å®šæ–¹å‘ï¼Œ(x, y)å’Œ(yï¼Œx)æ˜¯åŒä¸€æ¡è¾¹ï¼Œå¦‚G1ã€G2</li><li>æ³¨æ„ï¼š<strong>æ— å‘è¾¹<code>(x, y)</code>ç­‰äºæœ‰å‘è¾¹<code>&lt;x, y&gt;</code>å’Œ<code>&lt;y, x&gt;</code></strong></li></ul><span id="more"></span><p><em>å¯ä»¥è¡¨ç¤º</em>ï¼šç¤¾äº¤å…³ç³»</p><ul><li>ç¤¾äº¤å…³ç³»ä¸­ï¼Œæ¯ä¸ªäººå°±æ˜¯ä¸€ä¸ªé¡¶ç‚¹ï¼Œä¸¤ä¸ªäººæ˜¯å¥½å‹ï¼Œä»–ä»¬ä¹‹é—´å°±æœ‰äº†è¾¹ï¼Œé‚£ä¹ˆè¾¹çš„æƒå€¼å¯ä»¥æ˜¯ä»–ä»¬çš„äº²å¯†åº¦</li><li>æ— å‘å›¾ï¼šQQã€å¾®ä¿¡ç±»ä¼¼çš„ç¤¾äº¤å…³ç³»å¯ä»¥è¢«çœ‹ä½œæ˜¯æ— å‘å›¾ï¼ˆå¼ºç¤¾äº¤å…³ç³»ï¼Œç†Ÿäººç¤¾äº¤ï¼‰</li><li>æœ‰å‘å›¾ï¼šå¾®åšï¼ˆå…³æ³¨çš„å…³ç³»ï¼‰ã€æŠ–éŸ³ ï¼ˆå¼±ç¤¾äº¤å…³ç³»ï¼Œé™Œç”Ÿäººç¤¾äº¤ã€ç²‰ä¸ç¤¾äº¤ï¼‰</li><li>ä¹Ÿå¯ä»¥ç”¨æ¥è¡¨ç¤ºåœ°å›¾ï¼ˆå¯¼èˆªè·¯çº¿é€‰æ‹©ï¼‰ï¼Œç½‘ç»œè¿æ¥ï¼ˆè·¯ç”±å™¨é€‰æ‹©ï¼‰</li><li>vertex é¡¶ç‚¹ã€edge è¾¹ã€weight æƒå€¼</li></ul><h1 id="ç›¸å…³æ¦‚å¿µ"><a href="#ç›¸å…³æ¦‚å¿µ" class="headerlink" title="ç›¸å…³æ¦‚å¿µ"></a>ç›¸å…³æ¦‚å¿µ</h1><ol><li>å®Œå…¨å›¾ï¼ˆå³æ‰€æœ‰é¡¶ç‚¹ç›¸è¿æ¥ï¼‰ï¼šåœ¨æœ‰nä¸ªé¡¶ç‚¹çš„æ— å‘å›¾ä¸­ï¼Œè‹¥æœ‰<code>n * (n-1)/2</code>æ¡è¾¹ï¼Œå³<em>ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰ä¸”ä»…æœ‰ä¸€æ¡è¾¹</em>ï¼Œåˆ™ç§°æ­¤å›¾ä¸º<strong>æ— å‘å®Œå…¨å›¾</strong>ï¼Œå¦‚G1ï¼›åœ¨nä¸ªé¡¶ç‚¹çš„æœ‰å‘å›¾ä¸­ï¼Œè‹¥æœ‰<code>n * (n-1)</code>æ¡è¾¹ï¼Œå³<em>ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´æœ‰ä¸”ä»…æœ‰æ–¹å‘</em> ç›¸åçš„è¾¹ï¼Œåˆ™ç§°æ­¤å›¾ä¸º<strong>æœ‰å‘å®Œå…¨å›¾</strong>ï¼Œå¦‚G4ã€‚</li><li>é‚»æ¥é¡¶ç‚¹ï¼šåœ¨æ— å‘å›¾ä¸­Gä¸­ï¼Œè‹¥(u, v)æ˜¯E(G)ä¸­çš„ä¸€æ¡è¾¹ï¼Œåˆ™ç§°uå’Œväº’ä¸ºé‚»æ¥é¡¶ç‚¹ï¼Œå¹¶ç§°è¾¹(u,v)ä¾é™„äºé¡¶ç‚¹u å’Œvï¼›åœ¨æœ‰å‘å›¾Gä¸­ï¼Œè‹¥æ˜¯E(G)ä¸­çš„ä¸€æ¡è¾¹ï¼Œåˆ™ç§°é¡¶ç‚¹ué‚»æ¥åˆ°vï¼Œé¡¶ç‚¹vé‚»æ¥è‡ªé¡¶ç‚¹uï¼Œå¹¶ç§°è¾¹ä¸ é¡¶ç‚¹uå’Œé¡¶ç‚¹vç›¸å…³è”ã€‚</li><li>é¡¶ç‚¹çš„åº¦ï¼š<u>é¡¶ç‚¹vçš„åº¦æ˜¯æŒ‡ä¸å®ƒç›¸å…³è”çš„è¾¹çš„æ¡æ•°</u>ï¼Œè®°ä½œ<code>deg(v)</code>ã€‚åœ¨æœ‰å‘å›¾ä¸­ï¼Œé¡¶ç‚¹çš„åº¦ç­‰äºè¯¥é¡¶ç‚¹çš„å…¥åº¦ä¸ å‡ºåº¦ä¹‹å’Œï¼Œå…¶ä¸­é¡¶ç‚¹vçš„å…¥åº¦æ˜¯ä»¥vä¸ºç»ˆç‚¹çš„æœ‰å‘è¾¹çš„æ¡æ•°ï¼Œè®°ä½œ<code>indev(v)</code>;é¡¶ç‚¹vçš„å‡ºåº¦æ˜¯ä»¥vä¸ºèµ·å§‹ç‚¹çš„æœ‰å‘ è¾¹çš„æ¡æ•°ï¼Œè®°ä½œ<code>outdev(v)</code>ã€‚å› æ­¤ï¼š<code>dev(v) = indev(v) + outdev(v)</code>ã€‚æ³¨æ„ï¼šå¯¹äºæ— å‘å›¾ï¼Œé¡¶ç‚¹çš„åº¦ç­‰äºè¯¥é¡¶ ç‚¹çš„å…¥åº¦å’Œå‡ºåº¦ï¼Œå³<code>dev(v) = indev(v) = outdev(v)</code>ã€‚</li><li>è·¯å¾„ï¼šåœ¨å›¾<code>G = (Vï¼Œ E)</code>ä¸­ï¼Œè‹¥ä»é¡¶ç‚¹viå‡ºå‘æœ‰ä¸€ç»„è¾¹ä½¿å…¶å¯åˆ°è¾¾é¡¶ç‚¹vjï¼Œåˆ™ç§°é¡¶ç‚¹viåˆ°é¡¶ç‚¹vjçš„é¡¶ç‚¹åºåˆ—ä¸ºä» é¡¶ç‚¹viåˆ°é¡¶ç‚¹vjçš„è·¯å¾„ã€‚</li><li>è·¯å¾„é•¿åº¦ï¼šå¯¹äºä¸å¸¦æƒçš„å›¾ï¼Œä¸€æ¡è·¯å¾„çš„è·¯å¾„é•¿åº¦æ˜¯æŒ‡è¯¥è·¯å¾„ä¸Šçš„è¾¹çš„æ¡æ•°ï¼›å¯¹äºå¸¦æƒçš„å›¾ï¼Œä¸€æ¡è·¯ å¾„çš„è·¯ å¾„é•¿åº¦æ˜¯æŒ‡è¯¥è·¯å¾„ä¸Šå„ä¸ªè¾¹æƒå€¼çš„æ€»å’Œã€‚</li></ol><p><img src="/2021/03/20210312/008eGmZEly1gpljuxnpgij30k00i1aby.jpg" alt="æˆªå±2021-04-16 14.04.25"></p><ol><li>ç®€å•è·¯å¾„ä¸å›è·¯ï¼šè‹¥è·¯å¾„ä¸Šå„é¡¶ç‚¹v1ï¼Œv2ï¼Œv3ï¼Œâ€¦ï¼Œvmå‡ä¸é‡å¤ï¼Œåˆ™ç§°è¿™æ ·çš„è·¯å¾„ä¸ºç®€å•è·¯å¾„ã€‚è‹¥è·¯ å¾„ä¸Š ç¬¬ä¸€ä¸ªé¡¶ç‚¹v1å’Œæœ€åä¸€ä¸ªé¡¶ç‚¹vmé‡åˆï¼Œåˆ™ç§°è¿™æ ·çš„è·¯å¾„ä¸ºå›è·¯æˆ–ç¯ã€‚å³è·¯å¾„ä¸é‡å¤ä¸ºç®€å•è·¯å¾„ï¼Œé‡å¤åˆ™ä¸ºå›è·¯</li><li>å­å›¾ï¼šæŸä¸ªå›¾çš„ä¸€ä¸ªéƒ¨åˆ†ï¼ˆä¸€éƒ¨åˆ†è¾¹ã€ä¸€éƒ¨åˆ†é¡¶ç‚¹ç­‰ï¼‰ç§°ä¸ºå…¶çš„å­å›¾</li><li>è¿é€šå›¾ï¼šåœ¨<strong>æ— å‘å›¾</strong>ä¸­ï¼Œè‹¥ä»é¡¶ç‚¹v1åˆ°é¡¶ç‚¹v2æœ‰è·¯å¾„ï¼Œåˆ™ç§°é¡¶ç‚¹v1ä¸é¡¶ç‚¹v2æ˜¯è¿é€šçš„ã€‚å¦‚æœå›¾ä¸­ä»»æ„ä¸€ å¯¹é¡¶ç‚¹ éƒ½æ˜¯è¿é€šçš„ï¼Œåˆ™ç§°æ­¤å›¾ä¸ºè¿é€šå›¾ã€‚ï¼ˆè¿é€šå›¾ä¸ä¸€å®šæ˜¯å®Œå…¨å›¾ï¼Œä½†å®Œå…¨å›¾ä¸€å®šæ˜¯è¿é€šå›¾ï¼Œå¯¹è¿é€šå›¾æ¥è¯´ï¼Œä»…éœ€æœ‰è·¯å¾„å³å¯ï¼Œè€Œå®Œå…¨å›¾åˆ™è¦æ±‚ä¸¤é¡¶ç‚¹é‚»æ¥ï¼‰</li><li>å¼ºè¿é€šå›¾ï¼šåœ¨<strong>æœ‰å‘å›¾</strong>ä¸­ï¼Œè‹¥åœ¨æ¯ä¸€å¯¹é¡¶ç‚¹viå’Œvjä¹‹é—´éƒ½å­˜åœ¨ä¸€æ¡ä»viåˆ°vjçš„è·¯å¾„ï¼Œä¹Ÿå­˜åœ¨ä¸€æ¡ä»vjåˆ° viçš„è·¯ å¾„ï¼Œåˆ™ç§°æ­¤å›¾æ˜¯å¼ºè¿é€šå›¾</li><li>ç”Ÿæˆæ ‘ï¼ˆç”¨æœ€å°‘çš„è¾¹æŠŠå›¾è¿é€šï¼‰ï¼šä¸€ä¸ªè¿é€šå›¾çš„æœ€å°è¿é€šå­å›¾ç§°ä½œè¯¥å›¾çš„ç”Ÿæˆæ ‘ã€‚æœ‰nä¸ªé¡¶ç‚¹çš„è¿é€šå›¾çš„ç”Ÿæˆæ ‘æœ‰nä¸ªé¡¶ç‚¹å’Œn - 1æ¡è¾¹ã€‚</li></ol><ul><li>å›¾å’Œæ ‘çš„åŒºåˆ«ï¼š<ul><li>æ ‘å¯ä»¥è®¤ä¸ºæ˜¯ç‰¹æ®Šçš„å›¾ï¼Œå›¾ä¸ä¸€å®šæ˜¯æ ‘</li><li>è”é€šå›¾ï¼Œä¸”ä¸å¸¦ç¯ï¼ˆæ²¡æœ‰å›è·¯ï¼‰ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯æ ‘</li></ul></li></ul><h1 id="å›¾çš„å­˜å‚¨ç»“æ„"><a href="#å›¾çš„å­˜å‚¨ç»“æ„" class="headerlink" title="å›¾çš„å­˜å‚¨ç»“æ„"></a>å›¾çš„å­˜å‚¨ç»“æ„</h1><p>ä¿å­˜èŠ‚ç‚¹ä»¥åŠè¾¹çš„å…³ç³»</p><h2 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h2><p>å› ä¸ºèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»å°±æ˜¯è¿é€šä¸å¦ï¼Œå³ä¸º0æˆ–è€…1ï¼Œå› æ­¤é‚»æ¥çŸ©é˜µ(äºŒç»´æ•°ç»„)å³æ˜¯ï¼šå…ˆç”¨ä¸€ä¸ªæ•°ç»„å°†é¡¶ç‚¹ä¿å­˜ï¼Œç„¶åé‡‡ç”¨çŸ©é˜µæ¥è¡¨ç¤ºèŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</p><p><img src="/2021/03/20210312/008eGmZEly1gplp3axgjsj306n06wjrm.jpg" alt="æˆªå±2021-04-16 17.05.50"></p><p>ç”¨<code>vector&lt;char&gt; vertex</code>ä¿å­˜é¡¶ç‚¹ï¼Œç”¨çŸ©é˜µ<code>vector&lt;vector&lt;W&gt; &gt; edge</code>ä¿å­˜è¾¹ï¼Œå¦‚ä¸‹<br>$$<br>edge &#x3D; \left[ \begin{matrix}  &amp; A &amp; B &amp; C &amp; D \ A &amp; 0 &amp; 1 &amp; 0 &amp; 1 \ B &amp; 1 &amp; 0 &amp; 1 &amp; 0 \ C &amp; 0 &amp; 1 &amp; 0 &amp; 1 \ D &amp; 1 &amp; 0 &amp; 1 &amp; 0 \end{matrix} \right]<br>$$<br><img src="/2021/03/20210312/008eGmZEly1gpltlbqflfj305i098jrl.jpg" alt="æˆªå±2021-04-16 19.41.36"></p><p>ç”¨<code>vector&lt;char&gt; vertex</code>ä¿å­˜é¡¶ç‚¹ï¼Œç”¨çŸ©é˜µ<code>vector&lt;vector&lt;W&gt; &gt; edge</code>ä¿å­˜è¾¹ï¼Œå¦‚ä¸‹<br>$$<br>edge &#x3D; \left[ \begin{matrix}  &amp; A &amp; B &amp; C  \ A &amp; 0 &amp; 1 &amp; 0 \ B &amp; 1 &amp; 0 &amp; 1 \ C &amp; 0 &amp; 0 &amp; 0\end{matrix} \right]<br>$$</p><ul><li>æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µæ˜¯å¯¹ç§°çš„ï¼Œç¬¬iè¡Œ(åˆ—)å…ƒç´ ä¹‹å’Œï¼Œå°±æ˜¯é¡¶ç‚¹içš„åº¦ã€‚æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µåˆ™ä¸ä¸€å®šæ˜¯å¯¹ç§° çš„ï¼Œç¬¬iè¡Œ(åˆ—)å…ƒç´ ä¹‹åå°±æ˜¯é¡¶ç‚¹i çš„å‡º(å…¥)åº¦</li><li>å¦‚æœè¾¹å¸¦æœ‰æƒå€¼ï¼Œå¹¶ä¸”ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´æ˜¯è¿é€šçš„ï¼Œä¸Šå›¾ä¸­çš„è¾¹çš„å…³ç³»å°±ç”¨æƒå€¼ä»£æ›¿ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¸é€šï¼Œ åˆ™ä½¿ç”¨æ— ç©·å¤§ä»£æ›¿</li><li>ç”¨é‚»æ¥çŸ©é˜µå­˜å‚¨å›¾çš„æœ‰ç‚¹æ˜¯èƒ½å¤Ÿå¿«é€ŸçŸ¥é“ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦è¿é€šï¼Œç¼ºé™·æ˜¯å¦‚æœé¡¶ç‚¹æ¯”è¾ƒå¤šï¼Œè¾¹æ¯”è¾ƒå°‘æ—¶ï¼ŒçŸ© é˜µä¸­å­˜å‚¨äº†å¤§é‡çš„0æˆä¸ºç³»æ•°çŸ©é˜µï¼Œæ¯”è¾ƒæµªè´¹ç©ºé—´ï¼Œå¹¶ä¸”è¦æ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„ä¸æ˜¯å¾ˆå¥½æ±‚ã€‚</li></ul><p><img src="/2021/03/20210312/008eGmZEly1gpluoyfacuj30m409f406.jpg" alt="æˆªå±2021-04-16 20.18.53"></p><h3 id="é‚»æ¥çŸ©é˜µä»£ç å®ç°"><a href="#é‚»æ¥çŸ©é˜µä»£ç å®ç°" class="headerlink" title="é‚»æ¥çŸ©é˜µä»£ç å®ç°"></a>é‚»æ¥çŸ©é˜µä»£ç å®ç°</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vertex é¡¶ç‚¹</span></span><br><span class="line"><span class="comment">//edge è¾¹</span></span><br><span class="line"><span class="comment">//weight æƒå€¼</span></span><br><span class="line"><span class="comment">//matrixçŸ©é˜µ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> matrix</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">W</span>, <span class="type">bool</span> IsDirect = <span class="literal">false</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> Graph</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Graph</span>(V* vertexs, <span class="type">int</span> n)</span><br><span class="line">        &#123;</span><br><span class="line">            _vertexs.<span class="built_in">reserve</span>(n);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                _vertexs.<span class="built_in">push_back</span>(vertexs[i]);</span><br><span class="line">                _vertexIndexMap[vertexs[i]] = i;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _matrex.<span class="built_in">resize</span>(n);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">                _matrex[i].<span class="built_in">resize</span>(n, <span class="built_in">W</span>());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">GetVertexIndex</span><span class="params">(<span class="type">const</span> V&amp; v)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">auto</span> it = _vertexIndexMap.<span class="built_in">find</span>(v);</span><br><span class="line">            <span class="keyword">if</span>(it != _vertexIndexMap.<span class="built_in">end</span>())</span><br><span class="line">                <span class="keyword">return</span> it.second;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="comment">//return -1;</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;éæ³•é¡¶ç‚¹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ è¾¹</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">AddEdge</span><span class="params">(<span class="type">const</span> V&amp; src, <span class="type">const</span> V&amp; dst, <span class="type">const</span> W&amp; w)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="type">int</span> srcIndex = <span class="built_in">GetVertexIndex</span>(src);</span><br><span class="line">            <span class="type">int</span> dstIndex = <span class="built_in">GetVertexIndex</span>(dst);</span><br><span class="line"></span><br><span class="line">            _matrex[srcIndex][dstIndex] = w;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(IsDirect == <span class="literal">false</span>)</span><br><span class="line">                _matrex[dstIndex][srcIndex] = w;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        vector&lt;V&gt; _vertexs;             <span class="comment">//é¡¶ç‚¹é›†åˆ</span></span><br><span class="line">        map&lt;V, <span class="type">int</span>&gt; _vertexIndexMap;    <span class="comment">//è¡¨ç¤ºé¡¶ç‚¹çš„ä¸‹è¡¨æ˜ å°„å…³ç³»</span></span><br><span class="line">        vector&lt;vector&lt;W&gt; &gt; _matrex;     <span class="comment">//è¡¨ç¤ºé‚»æ¥çŸ©é˜µçš„è¾¹</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‚»æ¥è¡¨"><a href="#é‚»æ¥è¡¨" class="headerlink" title="é‚»æ¥è¡¨"></a>é‚»æ¥è¡¨</h2><p>ä½¿ç”¨æ•°ç»„è¡¨ç¤ºé¡¶ç‚¹çš„é›†åˆï¼Œä½¿ç”¨é“¾è¡¨è¡¨ç¤ºè¾¹çš„å…³ç³»ã€‚</p><ul><li>å›¾ä¸ºæ— å‘å›¾çš„é‚»æ¥è¡¨å­˜å‚¨</li></ul><p><img src="/2021/03/20210312/008eGmZEly1gpn1zc5fnyj30ir08adgk.jpg" alt="æˆªå±2021-04-17 21.17.19"></p><ul><li>æ³¨æ„ï¼šæ— å‘å›¾ä¸­åŒä¸€æ¡è¾¹åœ¨é‚»æ¥è¡¨ä¸­å‡ºç°äº†ä¸¤æ¬¡ã€‚å¦‚æœæƒ³çŸ¥é“é¡¶ç‚¹viçš„åº¦ï¼Œåªéœ€è¦çŸ¥é“é¡¶ç‚¹viè¾¹é“¾è¡¨é›†åˆä¸­ç»“ç‚¹çš„æ•°ç›®å³å¯</li><li>æœ‰å‘å›¾åˆ™æ·»åŠ ä¸€ä¸ªè¾¹çš„é›†åˆæˆ–è€…åå‘æ·»åŠ ä¸€æ¬¡</li></ul><h2 id="é‚»æ¥è¡¨çš„ä»£ç å®ç°"><a href="#é‚»æ¥è¡¨çš„ä»£ç å®ç°" class="headerlink" title="é‚»æ¥è¡¨çš„ä»£ç å®ç°"></a>é‚»æ¥è¡¨çš„ä»£ç å®ç°</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">namespace</span> table</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">W</span>&gt;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">EdgeNode</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> _srcIndex;</span><br><span class="line">        <span class="type">int</span> _dstIndex;</span><br><span class="line">        <span class="type">const</span> W&amp; _w;</span><br><span class="line"></span><br><span class="line">        EdgeNode&lt;W&gt;* _next;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">W</span>, <span class="type">bool</span> IsDirect = <span class="literal">false</span>&gt;</span><br><span class="line">    <span class="keyword">class</span> Graph</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="built_in">Graph</span>(V* vertexs, <span class="type">int</span> n)</span><br><span class="line">        &#123;</span><br><span class="line">            _vertexs.<span class="built_in">reserve</span>(n);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                _vertexs.<span class="built_in">push_back</span>(vertexs[i]);</span><br><span class="line">                _vertexIndexMap[vertexs[i]] = i;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _linkTable.<span class="built_in">resize</span>(n, <span class="literal">nullptr</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">GetVertexIndex</span><span class="params">(<span class="type">const</span> V&amp; v)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="keyword">auto</span> it = _vertexIndexMap.<span class="built_in">find</span>(v);</span><br><span class="line">            <span class="keyword">if</span>(it != _vertexIndexMap.<span class="built_in">end</span>())</span><br><span class="line">                <span class="keyword">return</span> it.second;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="comment">//return -1;</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="built_in">invalid_argument</span>(<span class="string">&quot;éæ³•é¡¶ç‚¹&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ·»åŠ è¾¹</span></span><br><span class="line">        <span class="function"><span class="type">void</span> <span class="title">AddEdge</span><span class="params">(<span class="type">const</span> V&amp; src, <span class="type">const</span> V&amp; dst, <span class="type">const</span> W&amp; w)</span></span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            <span class="type">int</span> srcIndex = <span class="built_in">GetVertexIndex</span>(src);</span><br><span class="line">            <span class="type">int</span> dstIndex = <span class="built_in">GetVertexIndex</span>(dst);</span><br><span class="line"></span><br><span class="line">            EdgeNode&lt;W&gt;* node = <span class="keyword">new</span> EdgeNode&lt;W&gt;;</span><br><span class="line">            node-&gt;_srcIndex = srcIndex;</span><br><span class="line">            node-&gt;_dstIndex = dstIndex;</span><br><span class="line">            node-&gt;_w = w;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//æŒ‚èµ·å¤´</span></span><br><span class="line">            node-&gt;_next = _linkTable[srcIndex];<span class="comment">//é“¾è¡¨çš„å¤´æ’æ“ä½œ</span></span><br><span class="line">            _linkTable[srcIndex] = node;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(IsDirect == <span class="literal">false</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                EdgeNode&lt;W&gt;* node = <span class="keyword">new</span> EdgeNode&lt;W&gt;;</span><br><span class="line">                node-&gt;_srcIndex = dstIndex;</span><br><span class="line">                node-&gt;_dstIndex = srcIndex;</span><br><span class="line">                node-&gt;_w = w;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//æŒ‚èµ·å¤´</span></span><br><span class="line">                node-&gt;_next = _linkTable[dstIndex];<span class="comment">//é“¾è¡¨çš„å¤´æ’æ“ä½œ</span></span><br><span class="line">                _linkTable[dstIndex] = node;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">        vector&lt;V&gt; _vertexs;             <span class="comment">//é¡¶ç‚¹é›†åˆ</span></span><br><span class="line">        map&lt;V, <span class="type">int</span>&gt; _vertexIndexMap;    <span class="comment">//è¡¨ç¤ºé¡¶ç‚¹çš„ä¸‹è¡¨æ˜ å°„å…³ç³»</span></span><br><span class="line">        vector&lt;EdgeNode&lt;W&gt;*&gt; _linkTable;<span class="comment">//é‚»æ¥è¡¨</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å›¾çš„éå†"><a href="#å›¾çš„éå†" class="headerlink" title="å›¾çš„éå†"></a>å›¾çš„éå†</h1><p>ç»™å®šä¸€ä¸ªå›¾Gå’Œå…¶ä¸­ä»»æ„ä¸€ä¸ªé¡¶ç‚¹v0ï¼Œä»v0å‡ºå‘ï¼Œæ²¿ç€å›¾ä¸­å„è¾¹è®¿é—®å›¾ä¸­çš„æ‰€æœ‰é¡¶ç‚¹ï¼Œä¸”æ¯ä¸ªé¡¶ç‚¹ä»…è¢«éå† ä¸€æ¬¡ã€‚â€éå†â€å³å¯¹ç»“ç‚¹è¿›è¡ŒæŸç§æ“ä½œçš„æ„æ€</p><h2 id="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„æ·±åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„æ·±åº¦ä¼˜å…ˆéå†"></a>å›¾çš„æ·±åº¦ä¼˜å…ˆéå†</h2><p>å¯¹é‚»æ¥çŸ©é˜µï¼Œæ·±åº¦ä¼˜å…ˆå¯æ˜¯ä½¿ç”¨é€’å½’çš„æ–¹å¼å®ç°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> _DFS(<span class="type">int</span> srcIndex, vector&lt;<span class="type">bool</span>&gt;&amp; visited)</span><br><span class="line">&#123;</span><br><span class="line">  cout &lt;&lt; _vertexs[srcIndex] &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; srcIndex &lt;&lt; <span class="string">&quot;-&gt;&quot;</span>;<span class="comment">//è¾“å‡ºå½“å‰èŠ‚ç‚¹</span></span><br><span class="line">  visited[srcIndex] = <span class="literal">true</span>;<span class="comment">//æ ‡è®°å½“å‰èŠ‚ç‚¹å·²è®¿é—®</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _vertexs.<span class="built_in">size</span>(); i++)</span><br><span class="line">  &#123;<span class="comment">//è®¿é—®å½“å‰èŠ‚ç‚¹çš„ç›¸é‚»é¡¶ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span>(_matrex[srcIndex][i] != <span class="built_in">W</span>() &amp;&amp; visited[i] == <span class="literal">false</span>)</span><br><span class="line">      _DFS(i, visited);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">DFS</span><span class="params">(<span class="type">const</span> V&amp; src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(_vertexs.size(), <span class="literal">false</span>)</span></span>;</span><br><span class="line">  <span class="type">int</span> srcIndex = <span class="built_in">GetVertexIndex</span>(src);</span><br><span class="line">  _DFS(srcIndex, visited);</span><br><span class="line">  cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"></a>å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†</h2><p>å¯¹é‚»æ¥çŸ©é˜µï¼Œå¹¿åº¦ä¼˜å…ˆå¯ä»¥ä½¿ç”¨é˜Ÿåˆ—å®ç°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">BFS</span><span class="params">(<span class="type">const</span> V&amp; src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function">vector&lt;<span class="type">bool</span>&gt; <span class="title">visited</span><span class="params">(_vertexs.size(), <span class="literal">false</span>)</span></span>;</span><br><span class="line">  <span class="type">int</span> srcIndex = <span class="built_in">GetVertexIndex</span>(src);</span><br><span class="line"></span><br><span class="line">  queue&lt;<span class="type">int</span>&gt; q;</span><br><span class="line">  q.<span class="built_in">push</span>(srcIndex);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span>(!q.<span class="built_in">empty</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="type">int</span> front = q.<span class="built_in">front</span>();</span><br><span class="line">    q.<span class="built_in">pop</span>();</span><br><span class="line">    cout &lt;&lt; _vertexs[front] &lt;&lt; <span class="string">&quot;:&quot;</span> &lt;&lt; front &lt;&lt; <span class="string">&quot;-&gt;&quot;</span>;</span><br><span class="line">    <span class="comment">//å¥½å‹å…¥é˜Ÿ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _vertexs.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>(visited[i] == <span class="literal">false</span> &amp;&amp; _matrex[front][i] != <span class="built_in">W</span>())</span><br><span class="line">      &#123;</span><br><span class="line">        q.<span class="built_in">push</span>(i);</span><br><span class="line">        visited[i] = <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æœ€å°ç”Ÿæˆæ ‘"><a href="#æœ€å°ç”Ÿæˆæ ‘" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘"></a>æœ€å°ç”Ÿæˆæ ‘</h1><p>è¿é€šå›¾ä¸­çš„æ¯ä¸€æ£µç”Ÿæˆæ ‘ï¼Œéƒ½æ˜¯åŸå›¾çš„ä¸€ä¸ªæå¤§æ— ç¯å­å›¾ï¼Œå³ï¼šä»å…¶ä¸­åˆ å»ä»»ä½•ä¸€æ¡è¾¹ï¼Œç”Ÿæˆæ ‘å°±ä¸å†è¿é€šï¼›åä¹‹ï¼Œåœ¨å…¶ä¸­å¼•å…¥ä»»ä½•ä¸€æ¡æ–°è¾¹ï¼Œéƒ½ä¼šå½¢æˆä¸€æ¡å›è·¯ã€‚ </p><p>è‹¥è¿é€šå›¾ç”±nä¸ªé¡¶ç‚¹ç»„æˆï¼Œåˆ™å…¶ç”Ÿæˆæ ‘å¿…å«nä¸ªé¡¶ç‚¹å’Œn-1æ¡è¾¹ã€‚å› æ­¤æ„é€ æœ€å°ç”Ÿæˆæ ‘çš„å‡†åˆ™æœ‰ä¸‰æ¡ï¼š</p><ol><li>åªèƒ½ä½¿ç”¨å›¾ä¸­çš„è¾¹æ¥æ„é€ æœ€å°ç”Ÿæˆæ ‘ </li><li>åªèƒ½ä½¿ç”¨æ°å¥½n-1æ¡è¾¹æ¥è¿æ¥å›¾ä¸­çš„nä¸ªé¡¶ç‚¹</li><li>é€‰ç”¨çš„n-1æ¡è¾¹ä¸èƒ½æ„æˆå›è·¯</li></ol><p>æ„é€ æœ€å°ç”Ÿæˆæ ‘çš„æ–¹æ³•ï¼š<strong>Kruskalç®—æ³•</strong>å’Œ<strong>Primç®—æ³•</strong>ã€‚</p><ul><li>è¿™ä¸¤ä¸ªç®—æ³•éƒ½é‡‡ç”¨äº†<strong>é€æ­¥æ±‚è§£çš„è´ªå¿ƒç­–ç•¥</strong>ã€‚ è´ªå¿ƒç®—æ³•ï¼šæ˜¯æŒ‡åœ¨é—®é¢˜æ±‚è§£æ—¶ï¼Œæ€»æ˜¯åšå‡ºå½“å‰çœ‹èµ·æ¥æœ€å¥½çš„é€‰æ‹©ã€‚ä¹Ÿå°±æ˜¯è¯´è´ªå¿ƒç®—æ³•åšå‡ºçš„ä¸æ˜¯æ•´ä½“æœ€ä¼˜çš„é€‰æ‹©ï¼Œè€Œæ˜¯æŸç§æ„ä¹‰ä¸Šçš„å±€éƒ¨æœ€ä¼˜è§£ã€‚è´ªå¿ƒç®—æ³•ä¸æ˜¯å¯¹æ‰€æœ‰çš„é—®é¢˜éƒ½èƒ½å¾—åˆ°æ•´ä½“æœ€ä¼˜è§£ã€‚</li></ul><h2 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h2><ol><li><p>ä»»ç»™ä¸€ä¸ªæœ‰nä¸ªé¡¶ç‚¹çš„è¿é€šç½‘ç»œ<code>N=&#123;V,E&#125;</code></p></li><li><p>é¦–å…ˆæ„é€ ä¸€ä¸ªç”±è¿™nä¸ªé¡¶ç‚¹ç»„æˆã€ä¸å«ä»»ä½•è¾¹çš„å›¾<code>G=&#123;V,NULL&#125;</code>ï¼Œå…¶ä¸­æ¯ä¸ªé¡¶ç‚¹è‡ªæˆä¸€ä¸ªè¿é€šåˆ†é‡</p></li><li><p>æ¥ç€ä¸æ–­ä»Eä¸­å–å‡ºæƒå€¼æœ€å°çš„ä¸€æ¡è¾¹(è‹¥æœ‰å¤šæ¡ä»»å–å…¶ä¸€)ï¼Œè‹¥è¯¥è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹æ¥è‡ªä¸åŒçš„è¿é€šåˆ†é‡ï¼Œåˆ™å°†æ­¤è¾¹åŠ å…¥åˆ°Gä¸­ã€‚</p></li><li><p>å¦‚æ­¤é‡å¤ï¼Œç›´åˆ°æ‰€æœ‰é¡¶ç‚¹åœ¨åŒä¸€ä¸ªè¿é€šåˆ†é‡ä¸Šä¸ºæ­¢ã€‚</p></li></ol><ul><li>æ ¸å¿ƒï¼šæ¯æ¬¡è¿­ä»£æ—¶ï¼Œé€‰å‡ºä¸€æ¡å…·æœ‰æœ€å°æƒå€¼ï¼Œä¸”ä¸¤ç«¯ç‚¹ä¸åœ¨åŒä¸€è¿é€šåˆ†é‡ä¸Šçš„è¾¹ï¼ŒåŠ å…¥ç”Ÿæˆæ ‘ã€‚</li></ul><blockquote><p>å¦‚ä½•åˆ¤æ–­é€‰å‡ºä¸€æ¡è¾¹ä»¥åè·Ÿå·²æœ‰çš„è¾¹æ˜¯å¦æ„æˆå›è·¯ï¼šå¹¶æŸ¥é›†</p><p>å¦‚æœé€‰çš„è¾¹åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨ï¼Œä¸åœ¨ä¸€ä¸ªé›†åˆæ‰èƒ½æ·»åŠ </p></blockquote><h2 id="Primeç®—æ³•"><a href="#Primeç®—æ³•" class="headerlink" title="Primeç®—æ³•"></a>Primeç®—æ³•</h2><p>ä»æ˜¯è´ªå¿ƒç®—æ³•ï¼Œä½†å®ƒå…ˆé€‰å‡ºæœ€å°çš„ä¸€æ¡è¾¹ï¼Œæ¥ç€å¹¶éä»å…¨å±€ä¸­æ‰¾åˆ°æœ€å°çš„è¾¹ï¼Œè€Œæ˜¯ä»¥æœ€å°çš„è¾¹ä¸ºåŸºç¡€ï¼Œé€‰å·²æœ‰çš„è¾¹çš„é‚»æ¥é¡¶ç‚¹é“¾æ¥å‡ºçš„è¾¹ä¸­æœ€å°çš„ï¼Œé¿å¼€äº†é€‰å‡ºç¯è·¯çš„æƒ…å†µ</p><h1 id="å•å…ƒæœ€çŸ­è·¯å¾„"><a href="#å•å…ƒæœ€çŸ­è·¯å¾„" class="headerlink" title="å•å…ƒæœ€çŸ­è·¯å¾„"></a>å•å…ƒæœ€çŸ­è·¯å¾„</h1><p>ä»åœ¨å¸¦æƒå›¾çš„æŸä¸€é¡¶ç‚¹å‡ºå‘ï¼Œæ‰¾å‡ºä¸€æ¡é€šå¾€å¦ä¸€é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼Œæœ€çŸ­ä¹Ÿå°±æ˜¯æ²¿è·¯å¾„å„è¾¹çš„æƒå€¼æ€»å’Œè¾¾åˆ°æœ€å°ã€‚</p><blockquote><p>Dijkstraç®—æ³•å’ŒFloydç®—æ³•</p></blockquote><h2 id="Dijkstraç®—æ³•"><a href="#Dijkstraç®—æ³•" class="headerlink" title="Dijkstraç®—æ³•"></a>Dijkstraç®—æ³•</h2><p>æ±‚ä¸€ä¸ªç‚¹å’Œå›¾ä¸­çš„å…¶ä»–æ‰€æœ‰ç‚¹ä¹‹é—´çš„æœ€è·¯å¾„</p><p><img src="/2021/03/20210312/008i3skNly1gptzx4hmntj30au0a0mxt.jpg" alt="æˆªå±2021-04-23 21.25.02"></p><p><img src="/2021/03/20210312/008i3skNly1gpu0bcc8v9j30kv089wgk.jpg" alt="æˆªå±2021-04-23 21.38.39"></p><table><thead><tr><th>è·¯å¾„</th><th>è·¯å¾„é•¿åº¦</th></tr></thead><tbody><tr><td>0ï¼Œ1</td><td>æ— ç©·å¤§</td></tr><tr><td>0ï¼Œ2</td><td>50</td></tr><tr><td>0ï¼Œ3</td><td>10</td></tr><tr><td>0ï¼Œ4</td><td>50</td></tr></tbody></table><p>ä¾æ¬¡éå†æ‰€æœ‰çš„è¾¹ï¼Œæ‰¾å‡ºæ›´çŸ­è·¯å¾„ï¼Œæ‰¾åˆ°åˆ™æ›´æ–°</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å›¾çš„æ„æˆ&quot;&gt;&lt;a href=&quot;#å›¾çš„æ„æˆ&quot; class=&quot;headerlink&quot; title=&quot;å›¾çš„æ„æˆ&quot;&gt;&lt;/a&gt;å›¾çš„æ„æˆ&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;é¡¶ç‚¹é›†åˆ&lt;/strong&gt;+&lt;strong&gt;è¾¹çš„é›†åˆ&lt;/strong&gt;ï¼š&lt;code&gt;G = (V, E)&lt;/code&gt;ï¼Œé¡¶ç‚¹é›†åˆ&lt;code&gt;V = &amp;#123;x | xå±äºæŸä¸ªæ•°æ®å¯¹è±¡åŠ&amp;#125;&lt;/code&gt;æ˜¯æœ‰ç©·éç©ºé›†åˆ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;E = &amp;#123;(x, y) | x, yå±äºV&amp;#125;&lt;/code&gt;æˆ–è€…&lt;code&gt;E = &amp;#123;&amp;lt;x, y&amp;gt; | x, yå±äºV &amp;amp;&amp;amp; Path(x, y)&amp;#125;&lt;/code&gt;æ˜¯é¡¶ç‚¹é—´å…³ç³»çš„æœ‰ç©·é›†åˆï¼Œä¹Ÿå«è¾¹é›†åˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;(x, y)&lt;/code&gt;è¡¨ç¤ºxåˆ°yçš„ä¸€æ¡åŒå‘é€šé“ï¼Œå³&lt;code&gt;(x, y)&lt;/code&gt;æ˜¯æ— æ–¹å‘çš„ï¼Œ&lt;code&gt;Path(x, y)&lt;/code&gt;è¡¨ç¤ºä»xåˆ°yçš„ä¸€æ¡å•å‘é€šè·¯ï¼Œå³&lt;code&gt;Path(x, y)æ˜¯æœ‰æ–¹å‘çš„&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¡¶ç‚¹å’Œè¾¹ï¼šå›¾ä¸­èŠ‚ç‚¹æˆä¸ºé¡¶ç‚¹ï¼Œç¬¬iä¸ªé¡¶ç‚¹è®°ä½œviï¼Œ ä¸¤ä¸ªé¡¶ç‚¹viå’Œvjç›¸å…³è”ç§°ä½œé¡¶ç‚¹viå’Œé¡¶ç‚¹vjä¹‹é—´æœ‰ä¸€æ¡è¾¹ï¼Œå›¾ä¸­ç¬¬kæ¡è¾¹è®°ä½œekï¼Œ&lt;code&gt;ek = (vi, vj)&lt;/code&gt;æˆ–&lt;code&gt;ek = &amp;lt;vi, vj&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æœ‰å‘å›¾ä¸­ï¼Œé¡¶ç‚¹å¯¹&lt;code&gt;&amp;lt;x, y&amp;gt;&lt;/code&gt;æ˜¯æœ‰åºçš„ï¼Œé¡¶ç‚¹å¯¹&lt;code&gt;&amp;lt;x, y&amp;gt;&lt;/code&gt;ç§°ä¸ºé¡¶ç‚¹xåˆ°é¡¶ç‚¹yçš„ä¸€æ¡è¾¹(å¼§)ï¼Œ&lt;code&gt;&amp;lt;x, y&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;&amp;lt;y ,x&amp;gt;&lt;/code&gt;æ˜¯ä¸¤æ¡ä¸åŒçš„è¾¹ï¼Œå¦‚G3ã€G4&lt;/li&gt;
&lt;li&gt;åœ¨æ— å‘å›¾ä¸­ï¼Œé¡¶ç‚¹å¯¹(x, y)æ˜¯æ— åºçš„ï¼Œé¡¶ç‚¹å¯¹(x,y) ç§°ä¸ºé¡¶ç‚¹xå’Œé¡¶ç‚¹yç›¸å…³è”çš„ä¸€æ¡è¾¹ï¼Œè¿™æ¡è¾¹æ²¡æœ‰ç‰¹å®šæ–¹å‘ï¼Œ(x, y)å’Œ(yï¼Œx)æ˜¯åŒä¸€æ¡è¾¹ï¼Œå¦‚G1ã€G2&lt;/li&gt;
&lt;li&gt;æ³¨æ„ï¼š&lt;strong&gt;æ— å‘è¾¹&lt;code&gt;(x, y)&lt;/code&gt;ç­‰äºæœ‰å‘è¾¹&lt;code&gt;&amp;lt;x, y&amp;gt;&lt;/code&gt;å’Œ&lt;code&gt;&amp;lt;y, x&amp;gt;&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
    
    <category term="å›¾" scheme="http://zhaozhuolin.com/tags/%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨çº¿çš„é¢è¯•é¢„çº¦ç³»ç»Ÿ</title>
    <link href="http://zhaozhuolin.com/2020/08/20200827.html"/>
    <id>http://zhaozhuolin.com/2020/08/20200827.html</id>
    <published>2020-08-26T16:05:00.000Z</published>
    <updated>2023-05-07T11:18:08.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ€»ä½“æ€è·¯"><a href="#æ€»ä½“æ€è·¯" class="headerlink" title="æ€»ä½“æ€è·¯"></a>æ€»ä½“æ€è·¯</h1><p>é€šè¿‡httplibåº“å‡½æ•°ä¸­çš„Postå’ŒGetæ–¹æ³•æ¥å¤„ç†ä»¥ä¸‹å››ç§è¯·æ±‚</p><ul><li><code>æ³¨å†Œ</code> ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œå¹¶è°ƒç”¨æ•°æ®åº“å‡½æ•°å¢åŠ åˆ—</li><li><code>ç™»å½•</code> ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œç™»é™†æˆåŠŸåˆ™ç”ŸæˆsessionIDç”¨ä»¥åç»­ä½¿ç”¨</li><li><code>æ•°æ®é¡µé¢</code>ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œä½¿ç”¨sessionIDæŸ¥è¯¢å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·ä¿¡æ¯å¹¶è¿”å›</li><li><code>æ•°æ®æäº¤</code>ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œæ ¹æ®å¤´éƒ¨çš„sessionIDæŸ¥è¯¢ç™»é™†ç”¨æˆ·ï¼Œåˆ‡å‰²æ­£æ–‡æäº¤çš„ä¿¡æ¯ï¼Œæ’å…¥æ•°æ®åº“</li></ul><span id="more"></span><p><img src="/2020/08/20200827/007S8ZIlly1gi4nyalqwpj31f40nijuu.jpg" alt="IMG_7559"></p><h1 id="æ•´ä½“ç»“æ„"><a href="#æ•´ä½“ç»“æ„" class="headerlink" title="æ•´ä½“ç»“æ„"></a>æ•´ä½“ç»“æ„</h1><h3 id="httpæœåŠ¡"><a href="#httpæœåŠ¡" class="headerlink" title="httpæœåŠ¡"></a>httpæœåŠ¡</h3><p>åˆ›å»ºäº†ä¸€ä¸ªç±»æ¥å®Œæˆæ•´ä¸ªé¡¹ç›®çš„è¿è¡Œï¼Œè¿™ä¸ªç±»ç”¨äºä¿å­˜ç™»å½•æ•°æ®åº“çš„å‚æ•°ã€æ‰€æœ‰ç™»å½•ç”¨æˆ·çš„sessionidã€å¯åŠ¨httpæœåŠ¡ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AisSvr</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">AisSvr</span>()</span><br><span class="line">  &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">int</span> <span class="title">OnInit</span><span class="params">(<span class="type">const</span> string&amp; config_filename)</span><span class="comment">//åˆå§‹åŒ–</span></span></span><br><span class="line"><span class="function">  </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">Start</span><span class="params">()</span><span class="comment">//å¯åŠ¨httpæœåŠ¡</span></span></span><br><span class="line"><span class="function">  </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">GetSessionId</span><span class="params">(httplib::Request res, string* session_id)</span></span>;<span class="comment">//è·å–å½“å‰ç”¨æˆ·çš„sessionid</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">Load</span><span class="params">(<span class="type">const</span> string&amp; config_filename)</span></span>;<span class="comment">//æ‰“å¼€é…ç½®æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  string _svr_ip;<span class="comment">//æœåŠ¡ç«¯ç›‘å¬çš„IPåœ°å€</span></span><br><span class="line">  <span class="type">uint16_t</span> _svr_port;<span class="comment">//æœåŠ¡ç«¯ç›‘å¬çš„ç«¯å£</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ•°æ®åº“ç±»æˆå‘˜</span></span><br><span class="line">  DataBaseSvr* _db;</span><br><span class="line">  string _db_ip;</span><br><span class="line">  string _db_user;</span><br><span class="line">  string _db_passwd;</span><br><span class="line">  string _db_name;</span><br><span class="line">  <span class="type">uint16_t</span> _db_port;</span><br><span class="line"></span><br><span class="line">  AllSessionInfo* _all_session;<span class="comment">//æ‰€æœ‰ç™»å½•ç”¨æˆ·çš„sessionid</span></span><br><span class="line"></span><br><span class="line">  httplib::Server _http_svr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><p>å¯¹äºæ•°æ®åº“çš„æ“ä½œï¼ŒåŒæ ·åˆ›å»ºäº†ä¸€ä¸ªç±»æ¥å®Œæˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DataBaseSvr</span><span class="comment">//æ•°æ®åº“ç±»</span></span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">DataBaseSvr</span>(string&amp; host, string&amp; user, string&amp; passwd, string&amp; db, <span class="type">uint16_t</span> port)</span><br><span class="line">    &#123;</span><br><span class="line">      _host = host;</span><br><span class="line">      _user = user;</span><br><span class="line">      _passwd = passwd;</span><br><span class="line">      _db = db;</span><br><span class="line">      _port = port;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">mysql_init</span>(&amp;_mysql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ~<span class="built_in">DataBaseSvr</span>()</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">mysql_close</span>(&amp;_mysql);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">QuerySql</span><span class="params">(<span class="type">const</span> string&amp; sql)</span></span>;<span class="comment">//æ“ä½œæ•°æ®åº“æ¥å£</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Connect2MySQL</span><span class="params">()</span>ï¼›</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  <span class="type">bool</span> <span class="title">QueryUserExist</span><span class="params">(Json::Value&amp; request_json, Json::Value* result)</span></span>;<span class="comment">//æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">QueryOneStuInfo</span><span class="params">(string user_id, Json::Value* result)</span></span>;<span class="comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//MySQLå°±æ˜¯å®¢æˆ·ç«¯çš„æ“ä½œå¥æŸ„</span></span><br><span class="line">    MYSQL _mysql;</span><br><span class="line">    string _host;</span><br><span class="line">    string _user;</span><br><span class="line">    string _passwd;</span><br><span class="line">    string _db;</span><br><span class="line">    <span class="type">uint16_t</span> _port;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="sessionidç®¡ç†"><a href="#sessionidç®¡ç†" class="headerlink" title="sessionidç®¡ç†"></a>sessionidç®¡ç†</h3><p>åˆ›å»ºäº†ä¸€ä¸ªç±»ä¸“é—¨è®¡ç®—MD5å€¼ï¼Œç”¨å¦ä¸€ä¸ªç±»è¿›è¡Œå°è£…ï¼ŒåŒæ—¶ç®¡ç†ä¸€æ‰¹sessionid</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Session</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Session</span>()</span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="built_in">Session</span>(Json::Value&amp; user_info)</span><br><span class="line">    &#123;</span><br><span class="line">      _origin_str.<span class="built_in">clear</span>();</span><br><span class="line">      _user_info = user_info;</span><br><span class="line"></span><br><span class="line">      _origin_str += <span class="built_in">to_string</span>(_user_info[<span class="string">&quot;stu_id&quot;</span>].<span class="built_in">asInt</span>());</span><br><span class="line">      _origin_str += _user_info[<span class="string">&quot;stu_name&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">      _origin_str += _user_info[<span class="string">&quot;stu_interview_time&quot;</span>].<span class="built_in">asString</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Session</span>()</span><br><span class="line">    &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">SumMd5</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">string&amp; <span class="title">GetSessionId</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">      <span class="built_in">SumMd5</span>();</span><br><span class="line">      <span class="keyword">return</span> _session_id;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//private:å› ä¸ºä¸æƒ³å†å†™ä¸ªæ¥å£è·å–sessionidæ‰€ä»¥ç›´æ¥å°†æˆå‘˜å˜é‡è®¾ä¸ºpublicï¼ˆæ‡’æƒ°ï¼ï¼‰</span></span><br><span class="line">    string _session_id;<span class="comment">//ä¿å­˜session_id</span></span><br><span class="line">    string _origin_str;<span class="comment">//åŸå§‹çš„ä¸²ï¼Œç”¨æ¥ç”Ÿæˆsession_id</span></span><br><span class="line">    Json::Value _user_info;<span class="comment">//åŸå§‹ä¸²å†…å®¹ï¼šstu_id, stu_name, stu_interview_time</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AllSessionInfo</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">AllSessionInfo</span>();</span><br><span class="line">  ~<span class="built_in">AllSessionInfo</span>();</span><br><span class="line">  <span class="comment">//Set Session</span></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">SetSessionValue</span><span class="params">(string&amp; session_id, Session&amp; session_info)</span></span>;</span><br><span class="line">  <span class="comment">//Get Session</span></span><br><span class="line">  <span class="function"><span class="type">bool</span> <span class="title">GetSessionValue</span><span class="params">(string&amp; session_id, Session* session_info)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="comment">//keyï¼šsessionidï¼Œvalueï¼šsession</span></span><br><span class="line">  unordered_map&lt;string, Session&gt; _session_map;</span><br><span class="line">  <span class="type">pthread_mutex_t</span> _map_lock;<span class="comment">//æ‰€æœ‰æ“ä½œå‡éœ€è¦äº’æ–¥å®Œæˆ</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h3><p>è¯¥æ¨¡å—ä¸»è¦å®Œæˆå¯¹æµè§ˆå™¨å“åº”æ­£æ–‡çš„æ•°æ®è¿›è¡Œåˆ†å‰²å’Œè§£æï¼Œè¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼Œè¾ƒä¸ºç®€å•</p><h1 id="æ‰§è¡Œæµç¨‹"><a href="#æ‰§è¡Œæµç¨‹" class="headerlink" title="æ‰§è¡Œæµç¨‹"></a>æ‰§è¡Œæµç¨‹</h1><h3 id="å“åº”ç™»å½•è¯·æ±‚-Postæ–¹æ³•"><a href="#å“åº”ç™»å½•è¯·æ±‚-Postæ–¹æ³•" class="headerlink" title="å“åº”ç™»å½•è¯·æ±‚(Postæ–¹æ³•)"></a>å“åº”ç™»å½•è¯·æ±‚(Postæ–¹æ³•)</h3><ol><li>è§£ææäº¤çš„å†…å®¹</li><li>å…ˆæ ¹æ®é‚®ç®±ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œå¦‚æœé‚®ç®±ä¸å­˜åœ¨ï¼Œåˆ™ç™»é™†å¤±è´¥ï¼Œå¦‚æœé‚®ç®±å­˜åœ¨ï¼Œåˆ™æ ¡éªŒå¯†ç </li><li>ä¸Šä¸€æ­¥æ ¡éªŒå¤±è´¥ï¼Œå‘æµè§ˆå™¨è¿”å›falseï¼Œæ ¡éªŒæˆåŠŸåˆ™è¿›è¡Œä¸‹ä¸€æ­¥</li><li>æ ¹æ®ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼Œç”Ÿæˆsessionidï¼Œç”¨ä»¥è¡¨ç¤ºå½“å‰ç”¨æˆ·</li><li>è·³è½¬åˆ°ä¸ªäººä¿¡æ¯é¡µé¢</li></ol><h3 id="ä¸ªäººä¿¡æ¯ä¹Ÿé¡µé¢-Getæ–¹æ³•"><a href="#ä¸ªäººä¿¡æ¯ä¹Ÿé¡µé¢-Getæ–¹æ³•" class="headerlink" title="ä¸ªäººä¿¡æ¯ä¹Ÿé¡µé¢(Getæ–¹æ³•)"></a>ä¸ªäººä¿¡æ¯ä¹Ÿé¡µé¢(Getæ–¹æ³•)</h3><ol><li>æ ¹æ®è¯·æ±‚å¤´éƒ¨çš„sessionidä¿¡æ¯ï¼Œä»ç®¡ç†sessionidçš„ç±»ä¸­è·å–å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯</li><li>æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–ç”¨æˆ·ä¿¡æ¯</li><li>ç»„ç»‡åº”ç­”</li></ol><h3 id="æ³¨å†Œè¯·æ±‚-Postæ–¹æ³•"><a href="#æ³¨å†Œè¯·æ±‚-Postæ–¹æ³•" class="headerlink" title="æ³¨å†Œè¯·æ±‚(Postæ–¹æ³•)"></a>æ³¨å†Œè¯·æ±‚(Postæ–¹æ³•)</h3><ol><li>è§£æè¯·æ±‚æ­£æ–‡</li><li>å°†è§£æå‡ºçš„ç”¨æˆ·ä¿¡æ¯æ’å…¥æ³¨å†Œä¿¡æ¯è¡¨(æ­¤å¤„éœ€è¦å¼€å¯æ•°æ®åº“äº‹åŠ¡ï¼ŒåŠ å…¥æ³¨å†Œä¿¡æ¯æ’å…¥å¤±è´¥ï¼Œåˆ™å›æ»š)</li><li>ç»„ç»‡åº”ç­”</li></ol><h3 id="é¢„çº¦è¯·æ±‚-Postæ–¹æ³•"><a href="#é¢„çº¦è¯·æ±‚-Postæ–¹æ³•" class="headerlink" title="é¢„çº¦è¯·æ±‚(Postæ–¹æ³•)"></a>é¢„çº¦è¯·æ±‚(Postæ–¹æ³•)</h3><p>åŸºæœ¬æ€è·¯åŒæ³¨å†Œè¯·æ±‚</p><h1 id="æ•ˆæœé¢„è§ˆå›¾ä¸é¡¹ç›®ä»£ç "><a href="#æ•ˆæœé¢„è§ˆå›¾ä¸é¡¹ç›®ä»£ç " class="headerlink" title="æ•ˆæœé¢„è§ˆå›¾ä¸é¡¹ç›®ä»£ç "></a>æ•ˆæœé¢„è§ˆå›¾ä¸é¡¹ç›®ä»£ç </h1><p>æ³¨å†Œé¡µé¢</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nypyjs4j310k0qiwgl.jpg" alt="IMG_7555"></p><p>ç™»å½•é¡µé¢</p><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1gi4nzbxgiwj310k0qiwgh.jpg" alt="IMG_7556"></p><p>æ•°æ®æäº¤é¡µé¢</p><p><img src="/2020/08/20200827/007S8ZIlly1gi4o34di6rj30xn06574p.jpg" alt="IMG_7554"></p><p>ä¸ªäººä¿¡æ¯é¡µé¢</p><p><img src="/2020/08/20200827/007S8ZIlly1gi4o35739vj30xn06574p.jpg" alt="IMG_7558"></p><p>GitHubåœ°å€ï¼š<a href="https://github.com/Latsummer/interview-system">https://github.com/Latsummer/interview-system</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ€»ä½“æ€è·¯&quot;&gt;&lt;a href=&quot;#æ€»ä½“æ€è·¯&quot; class=&quot;headerlink&quot; title=&quot;æ€»ä½“æ€è·¯&quot;&gt;&lt;/a&gt;æ€»ä½“æ€è·¯&lt;/h1&gt;&lt;p&gt;é€šè¿‡httplibåº“å‡½æ•°ä¸­çš„Postå’ŒGetæ–¹æ³•æ¥å¤„ç†ä»¥ä¸‹å››ç§è¯·æ±‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;æ³¨å†Œ&lt;/code&gt; ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œå¹¶è°ƒç”¨æ•°æ®åº“å‡½æ•°å¢åŠ åˆ—&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ç™»å½•&lt;/code&gt; ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œåœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œç™»é™†æˆåŠŸåˆ™ç”ŸæˆsessionIDç”¨ä»¥åç»­ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;&lt;code&gt;æ•°æ®é¡µé¢&lt;/code&gt;ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œä½¿ç”¨sessionIDæŸ¥è¯¢å½“å‰ç™»å½•çš„ç”¨æˆ·ï¼Œåœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è¯¥ç”¨æˆ·ä¿¡æ¯å¹¶è¿”å›&lt;/li&gt;
&lt;li&gt;&lt;code&gt;æ•°æ®æäº¤&lt;/code&gt;ï¼šå¤„ç†æµè§ˆå™¨ä¼ æ¥çš„æ•°æ®ï¼Œæ ¹æ®å¤´éƒ¨çš„sessionIDæŸ¥è¯¢ç™»é™†ç”¨æˆ·ï¼Œåˆ‡å‰²æ­£æ–‡æäº¤çš„ä¿¡æ¯ï¼Œæ’å…¥æ•°æ®åº“&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="å°ä½œå“" scheme="http://zhaozhuolin.com/categories/%E5%B0%8F%E4%BD%9C%E5%93%81/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="åç«¯" scheme="http://zhaozhuolin.com/tags/%E5%90%8E%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç®€å•çš„Boostæ–‡æ¡£æœç´¢å¼•æ“--åŸºäºjiebaåˆ†è¯å’ŒHTTPåè®®</title>
    <link href="http://zhaozhuolin.com/2020/08/20200826.html"/>
    <id>http://zhaozhuolin.com/2020/08/20200826.html</id>
    <published>2020-08-26T07:40:00.000Z</published>
    <updated>2023-05-07T11:15:56.092Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸ºäº†æ›´æ–¹ä¾¿çš„ä½¿ç”¨Booståº“ï¼Œäºæ˜¯æƒ³åˆ°å®ç°ä¸€ä¸ªåŸºäºBoostç¦»çº¿æ–‡æ¡£çš„æœç´¢å¼•æ“ï¼Œå¯¹ç¦»çº¿çš„HTMLæ–‡ä»¶è¿›è¡Œåˆ†æï¼Œã€å¹¶å¯¹æŸ¥è¯¢è¯è¿›è¡Œåˆ†è¯ï¼ˆå€Ÿç”¨ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œç„¶åæ ¹æ®ç›¸å…³æ€§ï¼ˆç®€é™‹çš„ç›¸å…³æ€§å…¬å¼ï¼‰è¿›è¡Œæ’åºï¼Œæœ€ç»ˆå°†æŸ¥è¯¢ç»“æœç”¨JSONçš„æ•°æ®æ ¼å¼è¿›è¡Œç»„ç»‡æ‰“åŒ…ï¼Œæœ€ç»ˆé€šè¿‡å¯¹å¤–çš„httpæœåŠ¡å°†æŸ¥è¯¢ç»“æœè¿”å›</p><span id="more"></span><h2 id="æˆå“æ•ˆæœä»¥åŠGitHubé“¾æ¥"><a href="#æˆå“æ•ˆæœä»¥åŠGitHubé“¾æ¥" class="headerlink" title="æˆå“æ•ˆæœä»¥åŠGitHubé“¾æ¥"></a>æˆå“æ•ˆæœä»¥åŠGitHubé“¾æ¥</h2><blockquote><p>ç”±äºä¸æ€ä¹ˆä¼šå‰ç«¯çš„ä¸€äº›è¯­æ³•ï¼Œæ‰€ä»¥é¡µé¢æ¯”è¾ƒç®€é™‹</p></blockquote><p><img src="/2020/08/20200826/007S8ZIlly1gi49kgwwqmj31hc0u01a0.jpg" alt="IMG_7552"></p><p><img src="/2020/08/20200826/007S8ZIlly1gi49kbll6kj30rx06wwg2.jpg" alt="IMG_7553"></p><p>è¯¦ç»†ä»£ç äº - GitHubé“¾æ¥ï¼š<a href="https://github.com/Latsummer/Boost-search-engine">GitHub  Boost-search-engine</a></p><h1 id="æ•´ä½“ç»“æ„"><a href="#æ•´ä½“ç»“æ„" class="headerlink" title="æ•´ä½“ç»“æ„"></a>æ•´ä½“ç»“æ„</h1><p>æŒ‰ç…§å¤„ç†æµç¨‹ï¼Œæ•´ä¸ªé¡¹ç›®çš„ç»“æ„å¯ä»¥è¢«åˆ†ä¸ºï¼Œé¢„å¤„ç†æ¨¡å—ï¼Œç´¢å¼•æ¨¡å—ï¼Œæœç´¢æ¨¡å—ä»¥åŠæœåŠ¡å™¨æ¨¡å—</p><ol><li>é¢„å¤„ç†æ¨¡å—ï¼šè¯»å–åŸå§‹çš„HTMLæ–‡æ¡£å†…å®¹ï¼Œè¿›è¡Œé¢„å¤„ç†æ“ä½œï¼šè§£æä¸€äº›é‡è¦çš„ä¿¡æ¯ï¼Œå¦‚æ–‡æ¡£æ ‡é¢˜ã€æ–‡æ¡£çš„URLï¼Œæ–‡æ¡£çš„æ­£æ–‡ï¼Œå³å»é™¤HTMLæ ‡ç­¾ï¼Œåªä¿ç•™æ­£æ–‡ï¼›åœ¨é¢„å¤„ç†å®Œæ¯•ä¹‹åï¼Œå°†ç»“æœæ•´ç†æˆä¸€ä¸ªè¡Œæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨ä»¥ä¹‹åçš„æ¨¡å—ä½¿ç”¨</li><li>ç´¢å¼•æ¨¡å—ï¼šå°†é¢„å¤„ç†å¥½çš„è¡Œæ–‡æœ¬æ–‡ä»¶è¾“å…¥ï¼Œæ ¹æ®é¢„å¤„ç†ç»“æœï¼Œåœ¨å†…å­˜ä¸­æ„é€ æ­£æ’ç´¢å¼•ï¼ˆæ–‡æ¡£ID &#x3D;&gt; æ–‡æ¡£æ­£æ–‡ï¼‰å’Œå€’æ’ç´¢å¼•ï¼ˆæ–‡æ¡£æ­£æ–‡ &#x3D;&gt; æ–‡æ¡£IDï¼‰</li><li>æœç´¢æ¨¡å—ï¼šè¾“å…¥æŸ¥è¯¢è¯ï¼Œå…ˆå¯¹æŸ¥è¯¢è¯è¿›è¡Œåˆ†è¯ï¼Œç„¶åå®ç°è§¦å‘ï¼Œå°†æŸ¥è¯¢ç»“æœæŒ‰ç…§ç›¸å…³æ€§è¿›è¡Œæ’åºï¼Œä¾æ¬¡æ‹¼è£…ï¼ŒæŒ‰ç…§JSONæ•°æ®æ ¼å¼è¿›è¡Œç»„ç»‡</li><li>æœåŠ¡å™¨æ¨¡å—ï¼šåŠ è½½æœç´¢å¼•æ“æ¨¡å—ï¼Œå¯¹å¤–æä¾›HTTPæœåŠ¡</li></ol><p><img src="/2020/08/20200826/007S8ZIlly1gi49l0rlk0j317m0csgnf.jpg" alt="IMG_7551"></p><h1 id="é¢„å¤„ç†æ¨¡å—"><a href="#é¢„å¤„ç†æ¨¡å—" class="headerlink" title="é¢„å¤„ç†æ¨¡å—"></a>é¢„å¤„ç†æ¨¡å—</h1><p>è¯¥æ¨¡å—æ ¸å¿ƒåŠŸèƒ½ä¸ºï¼šè¯»å–å¹¶åˆ†æBoostæ–‡æ¡£çš„.htmlæ–‡ä»¶å†…å®¹ï¼Œè§£æå‡ºæ¯ä¸ªæ–‡æ¡£çš„æ ‡é¢˜ï¼ŒURLï¼Œæ­£æ–‡ï¼Œæœ€ç»ˆæŠŠç»“æœè¾“å‡ºä¸ºä¸€ä¸ªè¡Œæ–‡ç‰ˆæ–‡ä»¶</p><p>é¦–å…ˆæ ¹æ®æ ¸å¿ƒåŠŸèƒ½ï¼Œå®šä¹‰ä¸€ä¸ªå¯ä»¥è¡¨ç¤ºä¸€ä¸ªæ–‡ç« çš„ç»“æ„ä½“ï¼Œä»¥åŠä¸€äº›å…¨å±€å˜é‡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">string g_input_path = <span class="string">&quot;../data/input/&quot;</span>;<span class="comment">//è¡¨ç¤ºä»å“ªä¸ªç›®å½•ä¸­è¯»å–boostæ–‡æ¡£ä¸­çš„html</span></span><br><span class="line">string g_output_path = <span class="string">&quot;../data/tmp/raw_input&quot;</span>;<span class="comment">//è¡¨ç¤ºé¢„å¤„ç†æ¨¡å—çš„è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DocInfo</span></span><br><span class="line">&#123;</span><br><span class="line">  string tittle;<span class="comment">//æ ‡é¢˜</span></span><br><span class="line">  string url;<span class="comment">//url</span></span><br><span class="line">  string content;<span class="comment">//æ­£æ–‡</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æšä¸¾è·¯å¾„"><a href="#æšä¸¾è·¯å¾„" class="headerlink" title="æšä¸¾è·¯å¾„"></a>æšä¸¾è·¯å¾„</h2><p>ä½¿ç”¨Boostä¸­çš„filesystemçš„é€’å½’æ–‡æ¡£è¿­ä»£å™¨æ¥å¯¹æ¯ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæšä¸¾ï¼Œä½¿ç”¨ä¸€ä¸ªvectoræ¥ä¸´æ—¶å­˜å‚¨ï¼Œç”¨äºä¹‹åçš„è§£æ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">EnumFile</span><span class="params">(<span class="type">const</span> string&amp; input_path, vector&lt;string&gt;* file_list)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  boost::<span class="function">filesystem::path <span class="title">root_path</span><span class="params">(input_path)</span></span>;</span><br><span class="line">  <span class="keyword">if</span>( !boost::filesystem::<span class="built_in">exists</span>(root_path) )</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;ç›®å½•ä¸å­˜åœ¨&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//è¿™ä¸ªè¿­ä»£å™¨ä½¿ç”¨å¾ªç¯çš„æ—¶å€™å¯ä»¥è‡ªåŠ¨å®Œæˆé€’å½’ï¼ˆå¯¹æ–‡ä»¶ï¼‰</span></span><br><span class="line">  boost::filesystem::recursive_directory_iterator end_iter;</span><br><span class="line">  <span class="keyword">for</span>(boost::filesystem::recursive_directory_iterator <span class="built_in">it</span>(root_path);  it != end_iter; it++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">//å½“å‰è·¯å¾„å¯¹åº”çš„å¦‚æœæ˜¯ç›®å½•åˆ™è·³è¿‡</span></span><br><span class="line">    <span class="keyword">if</span>( !boost::filesystem::<span class="built_in">is_regular_file</span>(*it) )</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    <span class="comment">//å½“å‰è·¯å¾„å¯¹åº”çš„æ–‡ä»¶å¦‚æœä¸æ˜¯htmlæ–‡ä»¶ï¼Œè·³è¿‡</span></span><br><span class="line">    <span class="keyword">if</span>( it-&gt;<span class="built_in">path</span>().<span class="built_in">extension</span>() != <span class="string">&quot;.html&quot;</span> )</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    <span class="comment">//æŠŠå¾—åˆ°çš„è·¯å¾„åŠ å…¥åˆ°vectorä¸­</span></span><br><span class="line">    file_list-&gt;<span class="built_in">push_back</span>(it-&gt;<span class="built_in">path</span>().<span class="built_in">string</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è§£ææ–‡ä»¶"><a href="#è§£ææ–‡ä»¶" class="headerlink" title="è§£ææ–‡ä»¶"></a>è§£ææ–‡ä»¶</h2><ol><li>éå†ä¸Šä¸€æ­¥vectorä¸­å­˜æ”¾çš„æ–‡ä»¶è·¯å¾„ï¼Œè¯»å–æ–‡ä»¶å†…å®¹ï¼Œå°†è¯»å–å†…å®¹å†™å…¥åˆ°stringç±»å‹å˜é‡<code>html</code>ä¸­</li><li>æ ¹æ®è¯»å–åˆ°çš„å†…å®¹ï¼Œé¦–å…ˆè§£æå‡ºæ ‡é¢˜ï¼ŒæŒ‰ç…§htmlä¸­çš„æ ‡ç­¾<code>&lt;title&gt;&lt;/title&gt;</code>ï¼Œè°ƒç”¨stringç±»æˆå‘˜å‡½æ•°<code>substr</code>è·å–æ–‡ç« æ ‡é¢˜</li><li>æ ¹æ®è¯»å–åˆ°çš„å†…å®¹ï¼Œæ„é€ å¯¹åº”çš„URLï¼Œç”±äºç½‘ç»œè·¯å¾„å’Œæ–‡ä»¶è·¯å¾„ä¸€è‡´ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨æ–‡ä»¶çš„è·¯å¾„å‰åŠ ä¸Šå‰ç¼€<code>https://www.boost.org/doc/libs/1_53_0/doc/</code>å³å¯</li><li>æ ¹ç»è¯»å–åˆ°çš„å†…å®¹ï¼Œè§£ææ­£æ–‡ç‰‡æ®µï¼Œè·³è¿‡å­—ç¬¦<code>&lt;</code>å’Œå­—ç¬¦<code>&gt;</code>ä¸­çš„å†…å®¹ï¼ŒåŒæ—¶å°†å†…å®¹ä¸­çš„<code>\n</code>æ›¿æ¢ä¸ºç©ºæ ¼ï¼ˆå› ä¸ºæœ€ç»ˆç»“æœè¦å¯¹åº”åˆ°åŸå§‹çš„htmlæ–‡æ¡£ï¼‰</li><li>å¯¹äº2ã€3ã€4æ­¥éª¤ï¼Œè§£æå‡ºçš„ä¸‰ä¸ªå†…å®¹ä½¿ç”¨ä¸å¯è§å­—ç¬¦<code>\3</code>åˆ†å‰²ï¼Œç„¶åå†™å…¥åˆ é™¤æ–‡ä»¶<code>raw_put</code>ä¸­</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">ParseFile</span><span class="params">(<span class="type">const</span> string&amp; file_path, DocInfo* doc_info)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//1. å…ˆè¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">  string html;</span><br><span class="line">  <span class="type">bool</span> ret = common::Util::<span class="built_in">Read</span>(file_path, &amp;html);</span><br><span class="line">  <span class="keyword">if</span>(!ret)</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;è§£ææ–‡ä»¶å¤±è´¥!&quot;</span> &lt;&lt; file_path &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//2. æ ¹æ®æ–‡ä»¶å†…å®¹è§£æå‡ºæ ‡é¢˜</span></span><br><span class="line">  ret = <span class="built_in">ParseTitle</span>(html, &amp;doc_info-&gt;tittle);</span><br><span class="line">  <span class="keyword">if</span>( !ret )</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ ‡é¢˜è§£æå¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//3. æ ¹æ®æ–‡ä»¶è·¯å¾„ï¼Œæ„é€ å‡ºå¯¹åº”çš„åœ¨çº¿æ–‡æ¡£</span></span><br><span class="line">  ret = <span class="built_in">ParseUrl</span>(file_path, &amp;doc_info-&gt;url);</span><br><span class="line">  <span class="keyword">if</span>( !ret )</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;url è§£æå¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//4. æ ¹æ®æ–‡ä»¶å†…å®¹ï¼Œå»æ ‡ç­¾ï¼Œä½œä¸ºdoc_infoä¸­çš„contentå­—æ®µå†…å®¹</span></span><br><span class="line">  ret = <span class="built_in">ParseContent</span>(html, &amp;doc_info-&gt;content);</span><br><span class="line">  <span class="keyword">if</span>( !ret )</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æ­£æ–‡è§£æå¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ç´¢å¼•æ¨¡å—"><a href="#ç´¢å¼•æ¨¡å—" class="headerlink" title="ç´¢å¼•æ¨¡å—"></a>ç´¢å¼•æ¨¡å—</h1><p>ç´¢å¼•ä½¿ç”¨äº†æ­£æ’ç´¢å¼•å’Œå€’æ’ç´¢å¼•ï¼Œå…¶ç»“æ„ä½“åˆ†åˆ«å¦‚ä¸‹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­£æ’ç´¢å¼•ï¼šç»™å®šdoc_idæ˜ å°„åˆ°æ–‡æ¡£å†…å®¹ï¼ˆDocInfoå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">DocInfo</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int64_t</span> _doc_id;</span><br><span class="line">  string _title;</span><br><span class="line">  string _url;</span><br><span class="line">  string _content;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å€’æ’ç´¢å¼•ï¼šç»™å®šè¯ï¼Œæ˜ å°„åˆ°åŒ…å«è¯¥è¯è¯­çš„æ–‡æ¡£idåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Weight</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">int64_t</span> _doc_id;<span class="comment">//è¯¥è¯åœ¨å“ªä¸ªæ–‡æ¡£å‡ºç°</span></span><br><span class="line">  <span class="type">int</span> _weight;<span class="comment">//å¯¹åº”çš„æƒé‡</span></span><br><span class="line">  string _word;<span class="comment">//ä»€ä¹ˆè¯</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªç±»æ¥è¡¨ç¤ºæ•´ä¸ªç´¢å¼•ç»“æ„ï¼Œå¹¶æä¾›å¤–éƒ¨è°ƒç”¨çš„API</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Index</span>();</span><br><span class="line">    <span class="comment">//1. æŸ¥æ­£æ’</span></span><br><span class="line">    <span class="function"><span class="type">const</span> DocInfo* <span class="title">GetDocInfo</span><span class="params">(<span class="type">int64_t</span> doc_id)</span></span>;</span><br><span class="line">    <span class="comment">//2. æŸ¥å€’æ’</span></span><br><span class="line">    <span class="function"><span class="type">const</span> vector&lt;Weight&gt;* <span class="title">GetInvertedList</span><span class="params">(<span class="type">const</span> string&amp; key)</span></span>;</span><br><span class="line">    <span class="comment">//3. æ„å»ºç´¢å¼•</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">Build</span><span class="params">(<span class="type">const</span> string&amp; input_path)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">CutWord</span><span class="params">(<span class="type">const</span> string&amp; input, vector&lt;string&gt;* output)</span></span>;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="function">DocInfo* <span class="title">BuildForward</span><span class="params">(<span class="type">const</span> string&amp; line)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">BuildInverted</span><span class="params">(<span class="type">const</span> DocInfo&amp; doc_info)</span></span>;</span><br><span class="line">    cppjieba::Jieba jieba;<span class="comment">//jiebaåˆ†è¯</span></span><br><span class="line">    </span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//æ­£æ’ç´¢å¼•ï¼Œæ•°ç»„ä¸‹æ ‡å¯¹åº”åˆ°doc_id</span></span><br><span class="line">    vector&lt;DocInfo&gt; _forward_index;</span><br><span class="line">    <span class="comment">//å€’æ’ç´¢å¼•ï¼Œä½¿ç”¨ä¸€ä¸ªhashè¡¨æ¥è¡¨ç¤ºæ˜ å°„å…³ç³»</span></span><br><span class="line">    unordered_map&lt;string, vector&lt;Weight&gt; &gt; _inverted_index;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ­£æ’ç´¢å¼•"><a href="#åˆ›å»ºæ­£æ’ç´¢å¼•" class="headerlink" title="åˆ›å»ºæ­£æ’ç´¢å¼•"></a>åˆ›å»ºæ­£æ’ç´¢å¼•</h2><p>æ­£æ’ç´¢å¼•ä½¿ç”¨vectoræ¥å­˜æ”¾ï¼Œæ–‡ç« çš„IDå°±æ˜¯å…¶æ‰€åœ¨ä½ç½®çš„ä¸‹æ ‡ï¼Œå…ƒç´ å†…å®¹å°±æ˜¯é¢„å¤„ç†æ¨¡å—ä¸­çš„è¾“å‡ºå†…å®¹</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">DocInfo* <span class="title">Index::BuildForward</span><span class="params">(<span class="type">const</span> string&amp; line)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  vector&lt;string&gt; tokens;</span><br><span class="line">  common::Util::<span class="built_in">Split</span>(line, <span class="string">&quot;\3&quot;</span>, &amp;tokens);</span><br><span class="line">  <span class="keyword">if</span>( tokens.<span class="built_in">size</span>() != <span class="number">3</span> )<span class="comment">//å¦‚æœæ²¡æœ‰è¢«åˆ‡åˆ†ä¸º3ä»½ï¼Œè¯´æ˜èŠ‚åˆ†ç»“æœæœ‰é—®é¢˜</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//æŠŠåˆ‡åˆ†ç»“æœå¡«å……åˆ°DocInfoå¯¹è±¡ä¸­</span></span><br><span class="line">  DocInfo doc_info;</span><br><span class="line">  doc_info._doc_id = _forward_index.<span class="built_in">size</span>();</span><br><span class="line">  doc_info._title = tokens[<span class="number">0</span>];</span><br><span class="line">  doc_info._url = tokens[<span class="number">1</span>];</span><br><span class="line">  doc_info._content = tokens[<span class="number">2</span>];</span><br><span class="line">    </span><br><span class="line">  _forward_index.<span class="built_in">push_back</span>(<span class="built_in">move</span>(doc_info));<span class="comment">//è½¬åŒ–ä¸ºå³å€¼å¼•ç”¨ï¼Œç§»åŠ¨è¯­ä¹‰å¤åˆ¶èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;_forward_index.<span class="built_in">back</span>();<span class="comment">//é˜²æ­¢é‡æŒ‡é’ˆé—®é¢˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå€’æ’ç´¢å¼•"><a href="#åˆ›å»ºå€’æ’ç´¢å¼•" class="headerlink" title="åˆ›å»ºå€’æ’ç´¢å¼•"></a>åˆ›å»ºå€’æ’ç´¢å¼•</h2><p>ä¾æ¬¡å¯¹æ ‡é¢˜ä¸æ­£æ–‡è¿›è¡Œåˆ†è¯ï¼Œå»ºç«‹ç»Ÿè®¡è¯é¢‘çš„ç»“æ„ä½“ï¼Œæ ¹æ®ç»Ÿè®¡ç»“æœï¼Œå¡«å……<code>Weight</code>å¯¹è±¡ï¼Œå…¶ä¸­æˆå‘˜<code>_weight</code>(æƒé‡)ç®€å•çš„è®¾è®¡äº†ä¸€ä¸ªå…¬å¼ï¼šæƒé‡ &#x3D;&#x3D; 10 * æ ‡é¢˜å‡ºç°æ¬¡æ•° + æ­£æ–‡å‡ºç°æ¬¡æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//å€’æ’æ˜¯ä¸€ä¸ªhashè¡¨</span></span><br><span class="line">  <span class="comment">//keyæ˜¯è¯ï¼ˆé’ˆå¯¹æ–‡æ¡£åˆ†è¯ç»“æœï¼‰</span></span><br><span class="line">  <span class="comment">//valueæ˜¯å€’æ’æ‹‰é“¾ï¼ˆåŒ…å«è‹¥å¹²ä¸ªWeightå¯¹è±¡ï¼‰</span></span><br><span class="line">  <span class="comment">//æ¯æ¬¡éå†åˆ°ä¸€ä¸ªæ–‡æ¡£ï¼Œåˆ†æä¹‹åæŠŠä¿¡æ¯æ›´æ–°åˆ°å€’æ’ç»“æ„ä¸­</span></span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">Index::BuildInverted</span><span class="params">(<span class="type">const</span> DocInfo&amp; doc_info)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">//0. åˆ›å»ºä¸“é—¨ç»Ÿè®¡è¯é¢‘çš„ç»“æ„</span></span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">WordCnt</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="type">int</span> _title_cnt;</span><br><span class="line">      <span class="type">int</span> _content_cnt;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">WordCnt</span>() </span><br><span class="line">          : _title_cnt(<span class="number">0</span>)</span><br><span class="line">          , _content_cnt(<span class="number">0</span>) </span><br><span class="line">      &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    unordered_map&lt;string, WordCnt&gt; word_cnt_map;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. å¯¹æ ‡é¢˜è¿›è¡Œåˆ†è¯</span></span><br><span class="line">    vector&lt;string&gt; title_token;</span><br><span class="line">    <span class="built_in">CutWord</span>(doc_info.title, &amp;title_token);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. éå†åˆ†è¯ç»“æœï¼Œç»Ÿè®¡æ¯ä¸ªå•è¯å‡ºç°æ¬¡æ•°</span></span><br><span class="line">    <span class="comment">//æ¬¡æ•°è¦è€ƒè™‘å¤§å°å†™é—®é¢˜ï¼Œå¤§å°å†™åº”è¯¥éƒ½ç®—æˆå°å†™</span></span><br><span class="line">    <span class="keyword">for</span>(string&amp; word : title_token)</span><br><span class="line">    &#123;</span><br><span class="line">      boost::<span class="built_in">to_lower</span>(word);</span><br><span class="line">      ++word_cnt_map[word]._title_cnt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. å¯¹æ­£æ–‡åˆ†è¯</span></span><br><span class="line">    vector&lt;string&gt; content_token;</span><br><span class="line">    <span class="built_in">CutWord</span>(doc_info.content, &amp;content_token);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. éå†åˆ†è¯ç»“æœï¼Œç»Ÿè®¡æ¯ä¸ªå•è¯å‡ºç°æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> (string word : content_token) </span><br><span class="line">    &#123;</span><br><span class="line">       boost::<span class="built_in">to_lower</span>(word);</span><br><span class="line">       ++word_cnt_map[word]._content_cnt;                      </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//5. æ ¹æ®ç»Ÿè®¡ç»“æœï¼Œæ•´ä¸ªå‡ºWeightå¯¹è±¡ï¼ŒæŠŠç»“æœæ›´æ–°åˆ°å€’æ’ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; word_pair : word_cnt_map)</span><br><span class="line">    &#123;</span><br><span class="line">      Weight weight;</span><br><span class="line">      weight._doc_id = doc_info.doc_id;</span><br><span class="line">      weight._weight = <span class="number">10</span> * word_pair.second._title_cnt + word_pair.second._content_cnt;</span><br><span class="line">      weight._word = word_pair.first;</span><br><span class="line"></span><br><span class="line">      vector&lt;Weight&gt;&amp; inverted_list = _inverted_index[word_pair.first];</span><br><span class="line">      inverted_list.<span class="built_in">push_back</span>(<span class="built_in">move</span>(weight));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Index::CutWord</span><span class="params">(<span class="type">const</span> string&amp; input, vector&lt;string&gt;* output)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    jieba.<span class="built_in">CutForSearch</span>(input, *output);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæ•´ä¸ªç´¢å¼•æ¨¡å—å»ºç«‹å®Œæˆï¼Œå†…å­˜ä¸­å³å­˜åœ¨äº†æ­£æ’ç´¢å¼•ç»“æ„å’Œå€’æ’ç´¢å¼•ç»“æ„ï¼Œç­‰å¾…æœç´¢æ¨¡å—å»è°ƒç”¨</p><h2 id="æŸ¥è¯¢æ­£æ’-x2F-å€’æ’ç´¢å¼•"><a href="#æŸ¥è¯¢æ­£æ’-x2F-å€’æ’ç´¢å¼•" class="headerlink" title="æŸ¥è¯¢æ­£æ’&#x2F;å€’æ’ç´¢å¼•"></a>æŸ¥è¯¢æ­£æ’&#x2F;å€’æ’ç´¢å¼•</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> DocInfo* <span class="title">Index::GetDocInfo</span><span class="params">(<span class="type">int64_t</span> doc_id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>( doc_id &lt; <span class="number">0</span> || doc_id &gt;= _forward_index.<span class="built_in">size</span>() )</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">  <span class="keyword">return</span> &amp;_forward_index[doc_id];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">const</span> vector&lt;Weight&gt;* <span class="title">Index::GetInvertedList</span><span class="params">(<span class="type">const</span> string&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> it = _inverted_index.<span class="built_in">find</span>(key);</span><br><span class="line">  <span class="keyword">if</span>( it == _inverted_index.<span class="built_in">end</span>() )</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &amp;it-&gt;second;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æœç´¢æ¨¡å—"><a href="#æœç´¢æ¨¡å—" class="headerlink" title="æœç´¢æ¨¡å—"></a>æœç´¢æ¨¡å—</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Searcher</span></span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//æœç´¢è¿‡ç¨‹ä¸­ä¾èµ–ç´¢å¼•ï¼Œéœ€è¦æŒæœ‰ç´¢å¼•æŒ‡é’ˆ</span></span><br><span class="line">    Index* index;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">      <span class="built_in">Searcher</span>() </span><br><span class="line">        :<span class="built_in">index</span>(<span class="keyword">new</span> <span class="built_in">Index</span>())</span><br><span class="line">        &#123;&#125;</span><br><span class="line">      <span class="function"><span class="type">bool</span> <span class="title">Init</span><span class="params">(<span class="type">const</span> string&amp; input_path)</span></span>;</span><br><span class="line">      <span class="function"><span class="type">bool</span> <span class="title">Search</span><span class="params">(<span class="type">const</span> string&amp; query, string* results)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">      <span class="function">string <span class="title">GenerateDesc</span><span class="params">(<span class="type">const</span> string&amp; content, <span class="type">const</span> string&amp; word)</span></span>;<span class="comment">//ç”Ÿæˆæè¿°</span></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><p>åœ¨ä½¿ç”¨æœç´¢æ¨¡å—æ—¶ï¼Œåˆ›å»º<code>Searcher</code>å¯¹è±¡ï¼Œå³<code>new</code>äº†ä¸€ä¸ªIndexå¯¹è±¡ï¼Œæ¥ç€è°ƒç”¨æˆå‘˜å‡½æ•°<code>Init</code>ï¼Œå®ƒä¼šè°ƒç”¨Indexçš„æˆå‘˜å‡½æ•°<code>Build</code>ï¼Œæ¥åˆ›å»ºæ­£æ’ç´¢å¼•å’Œå€’æ’ç´¢å¼•ï¼Œåœ¨éœ€è¦æŸ¥è¯¢æ—¶ï¼Œè°ƒç”¨æˆå‘˜å‡½æ•°<code>Search</code>ï¼Œå®ŒæˆæŸ¥è¯¢è¿‡ç¨‹ï¼Œå°†ç»“æœå†™å…¥stringç±»å¯¹è±¡<code>results</code>ä¸­</p><h2 id="æœç´¢å‡½æ•°"><a href="#æœç´¢å‡½æ•°" class="headerlink" title="æœç´¢å‡½æ•°"></a>æœç´¢å‡½æ•°</h2><p>æœç´¢æ¨¡å—å…ˆå¯¹æŸ¥è¯¢è¯è¿›è¡Œåˆ†è¯ï¼Œå†æ ¹æ®åˆ†è¯ç»“æœå»è°ƒç”¨ç´¢å¼•æ¨¡å—çš„æŸ¥è¯¢æ­£æ’ï¼Œå€’æ’æˆå‘˜å‡½æ•°ï¼Œæ¥ç€å°†æŸ¥è¯¢ç»“æœæŒ‰ç…§æƒé‡é™åºæ’åˆ—ï¼Œæœ€åè°ƒç”¨JSONCPPåº“å‡½æ•°æ¥åŒ…è£…æŸ¥è¯¢ç»“æœï¼ˆåŒæ—¶è°ƒç”¨ç›¸å…³å‡½æ•°æ¥ç”Ÿæˆæè¿°ï¼‰ï¼Œåºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²è¾“å‡ºç»“æœ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Searcher::Search</span><span class="params">(<span class="type">const</span> string&amp; query, string* output)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    <span class="comment">//1. [åˆ†è¯] é’ˆå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†è¯</span></span><br><span class="line">    vector&lt;string&gt; tokens;</span><br><span class="line">    index-&gt;<span class="built_in">CutWord</span>(query, &amp;tokens);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. [è§¦å‘] æ ¹æ®åˆ†è¯ç»“æœï¼ŒæŸ¥è¯¢å€’æ’ï¼ŒæŠŠç›¸å…³æ–‡æ¡£éƒ½è·å–åˆ°</span></span><br><span class="line">    vector&lt;Weight&gt; all_token_result;</span><br><span class="line">    <span class="keyword">for</span>(string word : tokens)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//åšç´¢å¼•çš„æ—¶å€™ï¼Œå·²ç»æŠŠå…¶ä¸­çš„è¯ç»Ÿä¸€è½¬æˆå°å†™äº†</span></span><br><span class="line">      <span class="comment">//æŸ¥è¯¢åˆ°æ’çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦æŠŠæŸ¥è¯¢è¯ç»Ÿä¸€è½¬æˆå°å†™</span></span><br><span class="line">      boost::<span class="built_in">to_lower</span>(word);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">auto</span>* inverted_list = index-&gt;<span class="built_in">GetInvertedList</span>(word);</span><br><span class="line">      <span class="keyword">if</span>( inverted_list == <span class="literal">nullptr</span> )</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">//è¯´æ˜è¯¥è¯åœ¨å€’æ’ç´¢å¼•ä¸­ä¸å­˜åœ¨ï¼Œå¦‚æœè¿™ä¸ªè¯æ¯”è¾ƒç”Ÿåƒ»ï¼Œ</span></span><br><span class="line">        <span class="comment">//åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­éƒ½æ²¡æœ‰å‡ºç°è¿‡ã€‚æ­¤æ—¶å¾—åˆ°çš„å€’æ’æ‹‰é“¾å°±æ˜¯nullptr</span></span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//tokens åŒ…å«å¤šä¸ªç»“æœï¼Œéœ€è¦æŠŠå¤šä¸ªç»“æœåˆå¹¶åˆ°ä¸€èµ·ï¼Œæ‰èƒ½è¿›è¡Œç»Ÿä¸€æ’åº</span></span><br><span class="line">      all_token_result.<span class="built_in">insert</span>(all_token_result.<span class="built_in">end</span>(), </span><br><span class="line">                              inverted_list-&gt;<span class="built_in">begin</span>(), inverted_list-&gt;<span class="built_in">end</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. [æ’åº] æŠŠåˆšæ‰æŸ¥åˆ°çš„æ–‡æ¡£çš„å€’æ’æ‹‰é“¾åˆå¹¶åˆ°ä¸€èµ·å¹¶æŒ‰ç…§æƒé‡è¿›è¡Œé™åºæ’åº</span></span><br><span class="line">    <span class="built_in">sort</span>(all_token_result.<span class="built_in">begin</span>(), all_token_result.<span class="built_in">end</span>(),</span><br><span class="line">    [](<span class="type">const</span> Weight&amp; w1, <span class="type">const</span> Weight&amp; w2)&#123;</span><br><span class="line">      <span class="comment">//å®ç°é™åºæ’åº w1 &gt; w2</span></span><br><span class="line">      <span class="keyword">return</span> w1.weight &gt; w2.weight;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4. [åŒ…è£…ç»“æœ] æŠŠå¾—åˆ°çš„è¿™äº›å€’æ’æ‹‰é“¾ä¸­çš„æ–‡æ¡£idè·å–åˆ°ï¼Œç„¶åå»æŸ¥æ­£æ’ï¼Œ</span></span><br><span class="line">    <span class="comment">//             å†æŠŠdoc_infoä¸­çš„å†…å®¹æ„é€ æˆæœ€ç»ˆçš„é¢„æœŸæ ¼å¼(JSON)</span></span><br><span class="line">    <span class="comment">//ä½¿ç”¨JSONCPPåº“æ¥å®ç°</span></span><br><span class="line">    Json::Value results;<span class="comment">//åŒ…å«è‹¥å¹²ä¸ªç»“æœï¼Œæ¯ä¸ªç»“æœå°±æ˜¯ä¸€ä¸ªJSONå¯¹è±¡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">const</span> <span class="keyword">auto</span>&amp; weight : all_token_result)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//æ ¹æ®weightä¸­çš„ç»“æœæŸ¥è¯¢æ­£æ’åº</span></span><br><span class="line">      <span class="type">const</span> DocInfo* doc_info = index-&gt;<span class="built_in">GetDocInfo</span>(weight.doc_id);</span><br><span class="line">      <span class="comment">//æŠŠdoc_infoå¯¹è±¡è¿›ä¸€æ­¥åŒ…è£…æˆä¸€ä¸ªJSONå¯¹è±¡</span></span><br><span class="line">      Json::Value result;</span><br><span class="line">      result[<span class="string">&quot;title&quot;</span>] = doc_info-&gt;title;</span><br><span class="line">      result[<span class="string">&quot;url&quot;</span>] = doc_info-&gt;url;</span><br><span class="line">      result[<span class="string">&quot;desc&quot;</span>] = <span class="built_in">GenerateDesc</span>(doc_info-&gt;content, weight.word);</span><br><span class="line">      results.<span class="built_in">append</span>(result);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€åä¸€æ­¥ï¼ŒæŠŠå¾—åˆ°çš„resultsè¿™ä¸ªJSONå¯¹è±¡åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå†™å…¥outputä¸­</span></span><br><span class="line">    Json::FastWriter writer;</span><br><span class="line">    *output = writer.<span class="built_in">write</span>(results);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæœç´¢æ¨¡å—å°±æ­å»ºå¥½äº†ï¼Œç­‰å¾…æœ€ç»ˆçš„æœåŠ¡å™¨æ¨¡å—è°ƒç”¨</p><h1 id="æœåŠ¡å™¨æ¨¡å—"><a href="#æœåŠ¡å™¨æ¨¡å—" class="headerlink" title="æœåŠ¡å™¨æ¨¡å—"></a>æœåŠ¡å™¨æ¨¡å—</h1><p>é¦–å…ˆåˆå§‹åŒ–Searcherå¯¹è±¡ï¼Œè°ƒç”¨<code>Init</code>æˆå‘˜å‡½æ•°åˆå§‹åŒ–ç´¢å¼•ç»“æ„ï¼Œç„¶åè°ƒç”¨Serverå¯¹è±¡ä¸­çš„Getæ–¹æ³•ï¼Œæ¥æ”¶ç½‘é¡µç«¯è¯·æ±‚ï¼Œåˆ†æå‚æ•°è°ƒç”¨æŸ¥è¯¢å‡½æ•°ï¼Œç„¶å°±å°†ç»“æœè¿”å›ç»™ç½‘é¡µç«¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">using</span> <span class="keyword">namespace</span> httplib;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1. åˆ›å»ºSearcherå¯¹è±¡</span></span><br><span class="line">    searcher::Searcher searcher;</span><br><span class="line">    <span class="type">bool</span> ret = searcher.<span class="built_in">Init</span>(<span class="string">&quot;../data/tmp/raw_input&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!ret)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Searcheråˆå§‹åŒ–å¤±è´¥&quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Server server;</span><br><span class="line">    server.<span class="built_in">Get</span>(<span class="string">&quot;/searcher&quot;</span>, [&amp;searcher](<span class="type">const</span> Request&amp; req, Response&amp; resp)&#123;</span><br><span class="line">        <span class="keyword">if</span> (!req.<span class="built_in">has_param</span>(<span class="string">&quot;query&quot;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            resp.<span class="built_in">set_content</span>(<span class="string">&quot;è¯·æ±‚å‚æ•°é”™è¯¯&quot;</span>, <span class="string">&quot;text/plain; charset=utf-8&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string query = req.<span class="built_in">get_param_value</span>(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        cout  &lt;&lt; <span class="string">&quot;æ”¶åˆ°æŸ¥è¯¢è¯ï¼š&quot;</span> &lt;&lt; query &lt;&lt; endl;</span><br><span class="line">        string results;</span><br><span class="line">        searcher.<span class="built_in">Search</span>(query, &amp;results);</span><br><span class="line">        resp.<span class="built_in">set_content</span>(results, <span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    server.<span class="built_in">set_base_dir</span>(<span class="string">&quot;./www&quot;</span>);</span><br><span class="line">    server.<span class="built_in">listen</span>(<span class="string">&quot;x.x.x.x&quot;</span>, [port]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæ•´ä¸ªæœç´¢å¼•æ“å·²ç»æ­å»ºå®Œæˆï¼Œåªéœ€è¦è¿è¡Œèµ·æ¥å³å¯</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¸ºäº†æ›´æ–¹ä¾¿çš„ä½¿ç”¨Booståº“ï¼Œäºæ˜¯æƒ³åˆ°å®ç°ä¸€ä¸ªåŸºäºBoostç¦»çº¿æ–‡æ¡£çš„æœç´¢å¼•æ“ï¼Œå¯¹ç¦»çº¿çš„HTMLæ–‡ä»¶è¿›è¡Œåˆ†æï¼Œã€å¹¶å¯¹æŸ¥è¯¢è¯è¿›è¡Œåˆ†è¯ï¼ˆå€Ÿç”¨ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œç„¶åæ ¹æ®ç›¸å…³æ€§ï¼ˆç®€é™‹çš„ç›¸å…³æ€§å…¬å¼ï¼‰è¿›è¡Œæ’åºï¼Œæœ€ç»ˆå°†æŸ¥è¯¢ç»“æœç”¨JSONçš„æ•°æ®æ ¼å¼è¿›è¡Œç»„ç»‡æ‰“åŒ…ï¼Œæœ€ç»ˆé€šè¿‡å¯¹å¤–çš„httpæœåŠ¡å°†æŸ¥è¯¢ç»“æœè¿”å›&lt;/p&gt;</summary>
    
    
    
    <category term="å°ä½œå“" scheme="http://zhaozhuolin.com/categories/%E5%B0%8F%E4%BD%9C%E5%93%81/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="åç«¯" scheme="http://zhaozhuolin.com/tags/%E5%90%8E%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>ç‰¹æ®Šç±»è®¾è®¡</title>
    <link href="http://zhaozhuolin.com/2020/08/20200820.html"/>
    <id>http://zhaozhuolin.com/2020/08/20200820.html</id>
    <published>2020-08-20T06:14:00.000Z</published>
    <updated>2023-05-07T11:18:08.087Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»"><a href="#åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»" class="headerlink" title="åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»"></a>åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»</h1><ol><li>æ„é€ å‡½æ•°ç§æœ‰</li><li>æä¾›ä¸€ä¸ªé™æ€çš„å †ä¸Šåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</li><li>é˜²æ­¢æ‹·è´ï¼ˆæ‹·è´æ„é€ å£°æ˜ä¸ºç§æœ‰ä¸”ä¸å®ç°ï¼Œæˆ–è€…å£°æ˜ä¸ºdeleteï¼‰<span id="more"></span></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HeapOnly</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> HeapOnly* <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> HeapOnly;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">HeapOnly</span>()</span><br><span class="line">&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">HeapOnly</span>(<span class="type">const</span> HeapOnly&amp; H) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">testHeaponly</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HeapOnly* ptr = HeapOnly::<span class="built_in">getInstance</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»"><a href="#åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»" class="headerlink" title="åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»"></a>åªèƒ½åœ¨æ ˆä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»</h1><ol><li>æ„é€ å‡½æ•°ç§æœ‰</li><li>æä¾›ä¸€ä¸ªé™æ€çš„æ ˆä¸Šåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StackOnly</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> StackOnly <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">StackOnly</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">StackOnly</span>()&#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">testStackOnly</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">StackOnly so = StackOnly::<span class="built_in">getInstance</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šå±è”½new</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StackOnly2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">StackOnly2</span>()</span><br><span class="line">&#123; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="keyword">operator</span> <span class="title">new</span><span class="params">(<span class="type">size_t</span> size)</span> </span>= <span class="keyword">delete</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="keyword">operator</span> <span class="title">delete</span><span class="params">(<span class="type">void</span>* p)</span> </span>= <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å¯¹è±¡ä¸èƒ½è¢«æ‹·è´çš„ç±»"><a href="#å¯¹è±¡ä¸èƒ½è¢«æ‹·è´çš„ç±»" class="headerlink" title="å¯¹è±¡ä¸èƒ½è¢«æ‹·è´çš„ç±»"></a>å¯¹è±¡ä¸èƒ½è¢«æ‹·è´çš„ç±»</h1><p>å°†æ‹·è´æ„é€ ä¸èµ‹å€¼è¿ç®—ç¬¦å£°æ˜ä¸ºdeleteå‡½æ•°æˆ–è€…å£°æ˜ä¸ºç§æœ‰ä¸”ä¸å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CopyBan</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">CopyBan</span>() &#123; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">CopyBan</span>(<span class="type">const</span> CopyBan&amp; cb) = <span class="keyword">delete</span>;</span><br><span class="line">CopyBan&amp; <span class="keyword">operator</span>=(<span class="type">const</span> CopyBan&amp; cb) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»"><a href="#ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»" class="headerlink" title="ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»"></a>ä¸èƒ½è¢«ç»§æ‰¿çš„ç±»</h1><ol><li>çˆ¶ç±»æ„é€ å£°æ˜ä¸ºç§æœ‰</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NoSon</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">NoSon</span>() &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åŠ ä¸Šfinalå…³é”®å­—</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NoSon</span> <span class="keyword">final</span></span><br><span class="line">&#123; &#125;;</span><br></pre></td></tr></table></figure><h1 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h1><p>ä¸€ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥æ¨¡å¼å¯ä»¥ä¿è¯è¯¥ç±»ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼Œè¯¥å®ä¾‹è¢«æ‰€æœ‰ç¨‹åºæ¨¡å—å…±äº«</p><h2 id="é¥¿æ±‰æ¨¡å¼"><a href="#é¥¿æ±‰æ¨¡å¼" class="headerlink" title="é¥¿æ±‰æ¨¡å¼"></a>é¥¿æ±‰æ¨¡å¼</h2><ol><li>æ„é€ å‡½æ•°ç§æœ‰</li><li>æä¾›ä¸€ä¸ªé™æ€çš„æ–¹æ³•è¿”å›å•ä¾‹</li><li>å£°æ˜ä¸€ä¸ªé™æ€çš„å•ä¾‹æˆå‘˜</li><li>æ‹·è´æ„é€ å’Œèµ‹å€¼å£°æ˜ä¸ºdeleteå‡½æ•°</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> &amp;_single;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">Singleton</span>() &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Singleton</span>(<span class="type">const</span> Singleton&amp; s) = <span class="keyword">delete</span>;</span><br><span class="line">Singleton&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton&amp; s) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> Singleton _single;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//é™æ€æˆå‘˜åˆå§‹åŒ–</span></span><br><span class="line">Singleton Singleton::_single;</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼šå®ç°ç®€å•ï¼Œå¤šçº¿ç¨‹æƒ…å¢ƒä¸‹æ•ˆç‡é«˜</p><p>ç¼ºé™·ï¼šç¨‹åºå¯åŠ¨æ¯”è¾ƒæ»¡ï¼Œå¤šä¸ªå•ä¾‹å¯¹è±¡åˆå§‹åŒ–çš„é¡ºåºæ— æ³•æ§åˆ¶</p><h2 id="æ‡’æ±‰æ¨¡å¼"><a href="#æ‡’æ±‰æ¨¡å¼" class="headerlink" title="æ‡’æ±‰æ¨¡å¼"></a>æ‡’æ±‰æ¨¡å¼</h2><ol><li>æ„é€ å‡½æ•°ç§æœ‰</li><li>æä¾›ä¸€ä¸ªé™æ€çš„æ–¹æ³•è¿”å›å•ä¾‹ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨åˆ›å»ºå¯¹è±¡ï¼Œåç»­è°ƒç”¨ç›´æ¥è¿”å›</li><li>å£°æ˜ä¸€ä¸ªé™æ€æŒ‡é’ˆï¼ŒæŒ‡é’ˆåˆå§‹åŒ–ä¸ºnullptr</li><li>æ‹·è´æ„é€ å’Œèµ‹å€¼å£°æ˜ä¸ºdelete</li><li>ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ˆä¿®æ”¹æŒ‡é’ˆï¼‰ï¼ŒåŒæ£€æŸ¥æé«˜æ•ˆç‡</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Singleton2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">static</span> Singleton2* <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_ptr == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;<span class="comment">//åŒæ£€æŸ¥</span></span><br><span class="line">_mtx.<span class="built_in">lock</span>();</span><br><span class="line"><span class="keyword">if</span> (_ptr == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ åˆ›å»ºå¯¹è±¡</span></span><br><span class="line">_ptr = <span class="keyword">new</span> Singleton2;</span><br><span class="line">&#125;</span><br><span class="line">_mtx.<span class="built_in">unlock</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> _ptr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GC</span></span><br><span class="line">&#123;</span><br><span class="line">~<span class="built_in">GC</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(_ptr)</span><br><span class="line"><span class="keyword">delete</span> _ptr;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="built_in">Singleton2</span>() &#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Singleton2</span>(<span class="type">const</span> Singleton2&amp; s) = <span class="keyword">delete</span>;</span><br><span class="line">Singleton2&amp; <span class="keyword">operator</span>=(<span class="type">const</span> Singleton2&amp; s) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> Singleton2* _ptr;</span><br><span class="line"><span class="type">static</span> mutex _mtx;</span><br><span class="line"><span class="type">static</span> GC _gc;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Singleton2* Singleton2::_ptr = <span class="literal">nullptr</span>;</span><br><span class="line">mutex Singleton2::_mtx;</span><br><span class="line">Singleton2::GC Singleton2::_gc;</span><br></pre></td></tr></table></figure><p>ç‰¹ç‚¹ï¼šå»¶è¿ŸåŠ è½½ï¼Œç¨‹åºå¯åŠ¨å¿«ï¼Œå¯ä»¥æŒ‡å®šå¤šä¸ªå•ä¾‹å¯¹è±¡çš„åˆå§‹åŒ–é¡ºåº</p><p>ç¼ºé™·ï¼šå®ç°è¾ƒä¸ºå¤æ‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»&quot;&gt;&lt;a href=&quot;#åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»&quot; class=&quot;headerlink&quot; title=&quot;åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»&quot;&gt;&lt;/a&gt;åªèƒ½åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡çš„ç±»&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;æ„é€ å‡½æ•°ç§æœ‰&lt;/li&gt;
&lt;li&gt;æä¾›ä¸€ä¸ªé™æ€çš„å †ä¸Šåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•&lt;/li&gt;
&lt;li&gt;é˜²æ­¢æ‹·è´ï¼ˆæ‹·è´æ„é€ å£°æ˜ä¸ºç§æœ‰ä¸”ä¸å®ç°ï¼Œæˆ–è€…å£°æ˜ä¸ºdeleteï¼‰&lt;/li&gt;&lt;/ol&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="-C++ -ç±»ä¸å¯¹è±¡" scheme="http://zhaozhuolin.com/tags/C-%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>C++11ä¸­çš„æ–°ç‰¹æ€§</title>
    <link href="http://zhaozhuolin.com/2020/07/20200727.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200727.html</id>
    <published>2020-07-27T08:40:15.000Z</published>
    <updated>2023-05-07T11:18:08.081Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆ—è¡¨åˆå§‹åŒ–"><a href="#åˆ—è¡¨åˆå§‹åŒ–" class="headerlink" title="åˆ—è¡¨åˆå§‹åŒ–"></a>åˆ—è¡¨åˆå§‹åŒ–</h1><p>C++11ï¼šæ”¯æŒå†…ç½®ç±»å‹ä¸è‡ªå®šä¹‰ç±»å‹çš„åˆ—è¡¨åˆå§‹åŒ–ï¼Œå…¶ä¸­è‡ªå®šä¹‰ç±»å‹ä¸æ˜¯å¤©ç„¶æ”¯æŒåˆ—è¡¨åˆå§‹åŒ–ï¼Œéœ€è¦æ˜¾ç¤ºå®šä¹‰å‚æ•°ç±»å‹ä¸º<code>initiaizer_list</code>çš„æ„é€ å‡½æ•°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">A</span> (<span class="type">int</span> a, <span class="type">int</span> b)</span><br><span class="line">    : _a(a)</span><br><span class="line">    , _b(b)</span><br><span class="line">  &#123; &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="type">int</span> _a;</span><br><span class="line">  <span class="type">int</span> _b;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = &#123; <span class="number">1</span> &#125;;</span><br><span class="line"><span class="type">int</span> c&#123; <span class="number">1</span> &#125;;</span><br><span class="line"><span class="type">float</span> d = &#123; <span class="number">1.2</span> &#125;;</span><br><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt; arr1&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; arr2 = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">pair&lt;<span class="type">int</span>, <span class="type">int</span>&gt; p = &#123;<span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m = &#123; &#123;<span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">2</span>, <span class="number">2</span>&#125;, &#123;<span class="number">3</span>, <span class="number">3</span>&#125; &#125;;</span><br><span class="line"></span><br><span class="line">A a = &#123;<span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line"><span class="function">A <span class="title">a</span><span class="params">(<span class="number">1</span>, <span class="number">2</span>)</span></span>;</span><br></pre></td></tr></table></figure><span id="more"></span><h1 id="å˜é‡ç±»å‹æ¨å¯¼"><a href="#å˜é‡ç±»å‹æ¨å¯¼" class="headerlink" title="å˜é‡ç±»å‹æ¨å¯¼"></a>å˜é‡ç±»å‹æ¨å¯¼</h1><ul><li>autoï¼šç¼–è¯‘æ—¶æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼è¿›è¡Œç±»å‹æ¨å¯¼</li><li>decltypeï¼šè¿è¡Œæ—¶ç±»å‹è¯†åˆ«ï¼Œå¦‚æœæœ‰å‚æ•°åˆ—è¡¨ï¼Œæ¨å¯¼è¿”å›å€¼ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°åˆ—è¡¨ï¼Œåªæœ‰å‡½æ•°åï¼Œæ¨å¯¼ä¸ºå‡½æ•°çš„æ¥å£ç±»å‹</li></ul><h1 id="finalä¸override"><a href="#finalä¸override" class="headerlink" title="finalä¸override"></a>finalä¸override</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> <span class="keyword">final</span> <span class="comment">//ä¸èƒ½è¢«ç»§æ‰¿</span></span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">override</span> <span class="comment">//å¼ºåˆ¶å­ç±»é‡å†™çˆ¶ç±»è™šå‡½æ•°</span></span><br><span class="line">&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="é»˜è®¤æˆå‘˜å‡½æ•°æ§åˆ¶"><a href="#é»˜è®¤æˆå‘˜å‡½æ•°æ§åˆ¶" class="headerlink" title="é»˜è®¤æˆå‘˜å‡½æ•°æ§åˆ¶"></a>é»˜è®¤æˆå‘˜å‡½æ•°æ§åˆ¶</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> </span><br><span class="line">&#123; </span><br><span class="line"><span class="keyword">public</span>: </span><br><span class="line"><span class="built_in">A</span>(<span class="type">int</span> a): _a(a) </span><br><span class="line">&#123;&#125; </span><br><span class="line">  <span class="comment">// æ˜¾å¼ç¼ºçœæ„é€ å‡½æ•°ï¼Œç”±ç¼–è¯‘å™¨ç”Ÿæˆ </span></span><br><span class="line"><span class="built_in">A</span>() = <span class="keyword">default</span>; </span><br><span class="line"></span><br><span class="line">  <span class="built_in">A</span>(<span class="type">const</span> C&amp; c) = <span class="keyword">delete</span>;</span><br><span class="line">  <span class="comment">//æŠŠä¸€ä¸ªå‡½æ•°å£°æ˜æˆå·²åˆ é™¤å‡½æ•°ï¼Œä¸èƒ½å†è¢«ä½¿ç”¨</span></span><br><span class="line">  <span class="comment">//æ‹·è´æ„é€ å£°æ˜ä¸ºdeleteï¼šæ”¾æ‹·è´</span></span><br><span class="line">  </span><br><span class="line">A&amp; <span class="keyword">operator</span>=(<span class="type">const</span> A&amp; a); </span><br><span class="line"> <span class="comment">// åœ¨ç±»ä¸­å£°æ˜ï¼Œåœ¨ç±»å¤–å®šä¹‰æ—¶è®©ç¼–è¯‘å™¨ç”Ÿæˆé»˜è®¤èµ‹å€¼è¿ç®—ç¬¦é‡è½½ </span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span>: </span><br><span class="line"><span class="type">int</span> _a; </span><br><span class="line">&#125;; </span><br><span class="line"></span><br><span class="line">A&amp; A::<span class="keyword">operator</span>=(<span class="type">const</span> A&amp; a) = <span class="keyword">default</span>; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line"><span class="function">A <span class="title">a1</span><span class="params">(<span class="number">10</span>)</span></span>; </span><br><span class="line">A a2; </span><br><span class="line">a2 = a1; </span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h1 id="å³å€¼å¼•ç”¨"><a href="#å³å€¼å¼•ç”¨" class="headerlink" title="å³å€¼å¼•ç”¨"></a>å³å€¼å¼•ç”¨</h1><p>ç®€å•æ¥è¯´ï¼Œå·¦å€¼ï¼šå¯ä»¥å‡ºç°åœ¨<code>=</code>çš„ä¸¤è¾¹ã€æˆ–è€…å¯ä»¥å–åœ°å€çš„</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = a;</span><br><span class="line"><span class="type">int</span>* p = &amp;a;</span><br><span class="line"><span class="type">int</span>* p2 = &amp;b;</span><br></pre></td></tr></table></figure><p>å³å€¼ï¼šåªèƒ½å‡ºç°åœ¨<code>=</code>çš„å³è¾¹ï¼Œæˆ–è€…ä¸å¯ä»¥å–åœ°å€ï¼ˆéç»å¯¹ï¼‰</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> = <span class="number">20</span>ï¼›</span><br><span class="line"><span class="type">int</span>* p = &amp;<span class="number">10</span>;</span><br><span class="line"><span class="comment">//æ­¤å¤„10å’Œ20å‡ä¸ºå³å€¼</span></span><br></pre></td></tr></table></figure><p>C++ä¸­çš„å³å€¼ï¼š</p><ul><li>çº¯å³å€¼ï¼šå¸¸é‡ã€ä¸´æ—¶å˜é‡ã€‚<code>getA(A) = b;int* p = &amp;(getA());</code></li><li>å°†äº¡å€¼ï¼šå£°æ˜å‘¨æœŸå³å°†ç»“æŸçš„å€¼</li></ul><p>ä¸´æ—¶å˜é‡ï¼šå‡½æ•°ä»¥å€¼è¿”å›çš„å˜é‡ï¼Œè°ƒç”¨ç±»çš„æ„é€ å‡½æ•°åˆ›å»ºçš„å˜é‡</p><ul><li>å·¦å€¼å¼•ç”¨ï¼šå¼•ç”¨çš„å®ä½“æ—¢å¯ä»¥ä¸ºå·¦å€¼ï¼Œä¹Ÿå¯ä»¥ä¸ºå³å€¼</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>&amp; ra = a;</span><br><span class="line"><span class="comment">//raå®ä½“ä¸ºå·¦å€¼</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; ri = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//riå®ä½“ä¸ºå³å€¼</span></span><br></pre></td></tr></table></figure><ul><li>å³å€¼å¼•ç”¨</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>&amp;&amp; lr = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//å®ä½“ä¸ºå¸¸é‡</span></span><br><span class="line"><span class="type">int</span>&amp;&amp; lr2 = <span class="built_in">getA</span>();</span><br><span class="line"><span class="comment">//å®ä½“ä¸ºä¸´æ—¶å˜é‡</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>&amp; r3 = <span class="built_in">getA</span>();<span class="comment">//å·¦å€¼å¼•ç”¨ï¼Œå®ä½“ä¸ºå³å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>&amp;&amp; r4 = a;<span class="comment">//ä¸èƒ½ä½¿ç”¨ï¼Œå³å€¼å¼•ç”¨è¯­æ³•ä¸èƒ½ç”¨æ¥å¼•ç”¨å·¦å€¼</span></span><br></pre></td></tr></table></figure><p>å°ç»“ï¼š</p><p>å·¦å€¼å¼•ç”¨ï¼Œå³å€¼å¼•ç”¨çš„è¯­æ³•æ„ä¹‰ï¼šéƒ½æ˜¯å˜é‡çš„åˆ«å</p><p>å·¦å€¼å¼•ç”¨ï¼šå°±å¯ä»¥å¼•ç”¨å·¦å€¼ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨å³å€¼ï¼Œå¦‚æœå¼•ç”¨å³å€¼ï¼Œéœ€è¦ä¸ºconstå·¦å€¼å¼•ç”¨</p><p>å³å€¼å¼•ç”¨ï¼šå¼•ç”¨å³å€¼</p><ul><li>ç§»åŠ¨æ„é€ ï¼šå‚æ•°ç±»å‹ä¸ºå³å€¼å¼•ç”¨ï¼Œæé«˜æ‹·è´çš„æ•ˆç‡<ul><li>ç›¸å¯¹äºæ‹·è´æ„é€ ï¼Œå¯ä»¥å®ç°æµ…æ‹·è´çš„æƒ…å†µä¸‹ï¼Œä¸äº§ç”Ÿé”™è¯¯</li><li>å³å€¼å¼•ç”¨æŒ‡å‘çš„å®ä½“ä¸€èˆ¬æ˜¯å°†äº¡å€¼ï¼Œå¯ä»¥ç›´æ¥è·å–å³å€¼å¼•ç”¨æ‰€æŒ‡å‘çš„å®ä½“èµ„æºï¼Œä¸éœ€è¦æ·±æ‹·è´</li></ul></li><li>ç§»åŠ¨èµ‹å€¼ï¼šå‚æ•°ç±»å‹ä¸ºå³å€¼å¼•ç”¨ï¼Œä¹Ÿæ˜¯æµ…æ‹·è´ï¼ŒåŸç†åŒä¸Š</li><li><code>move</code>ï¼šç§»åŠ¨è¯­ä¹‰ï¼Œå°†å·¦å€¼å˜ä¸ºå³å€¼ï¼Œä½¿ç”¨æ—¶å€™éœ€è¦æ³¨æ„ä¿è¯å±æ€§è¢«ä¿®æ”¹çš„å·¦å€¼åœ¨ä¹‹åä¸ä¼šå†ç”¨åˆ°</li></ul><h1 id="lambdaè¡¨è¾¾å¼"><a href="#lambdaè¡¨è¾¾å¼" class="headerlink" title="lambdaè¡¨è¾¾å¼"></a>lambdaè¡¨è¾¾å¼</h1><p><code>[æ•æ‰åˆ—è¡¨](å‚æ•°åˆ—è¡¨)mutable-&gt;è¿”å›å€¼ç±»å‹&#123;å‡½æ•°ä½“&#125;</code></p><ul><li>æ•æ‰åˆ—è¡¨ï¼ˆcapture-listï¼‰ï¼šåœ¨lambdaå‡½æ•°çš„å¼€å§‹ä½ç½®ï¼Œç¼–è¯‘å™¨æ ¹æ®[]æ¥åˆ¤æ–­æ¥ä¸‹æ¥ çš„ä»£ç æ˜¯å¦ä¸ºlambdaå‡½æ•°ï¼Œæ•æ‰åˆ—è¡¨èƒ½å¤Ÿæ•æ‰ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡ä¾›lambdaå‡½æ•°ä½¿ç”¨ã€‚ </li><li>å‚æ•°åˆ—è¡¨ï¼ˆparametersï¼‰ï¼šä¸æ™®é€šå‡½æ•°çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ï¼Œå¦‚æœä¸éœ€è¦å‚æ•°ä¼ é€’ï¼Œåˆ™å¯ä»¥è¿åŒ()ä¸€èµ·çœç•¥ </li><li>mutableï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œlambdaå‡½æ•°æ€»æ˜¯ä¸€ä¸ªconstå‡½æ•°ï¼Œmutableå¯ä»¥å–æ¶ˆå…¶å¸¸é‡æ€§ã€‚ä½¿ç”¨è¯¥ä¿®é¥°ç¬¦æ—¶ï¼Œå‚æ•°åˆ—è¡¨ä¸å¯çœç•¥(å³ä½¿å‚æ•°ä¸ºç©º)ã€‚ </li><li>è¿”å›å€¼ç±»å‹ï¼ˆreturntypeï¼‰ï¼šç”¨è¿½è¸ªè¿”å›ç±»å‹å½¢å¼å£°æ˜å‡½æ•°çš„è¿”å›å€¼ç±»å‹ï¼Œæ²¡æœ‰è¿”å›å€¼æ—¶æ­¤éƒ¨åˆ† å¯çœç•¥ã€‚è¿”å›å€¼ç±»å‹æ˜ç¡®æƒ…å†µä¸‹ï¼Œä¹Ÿå¯çœç•¥ï¼Œç”±ç¼–è¯‘å™¨å¯¹è¿”å›ç±»å‹è¿›è¡Œæ¨å¯¼ã€‚ </li><li>å‡½æ•°ä½“ï¼ˆstatementï¼‰ï¼šåœ¨è¯¥å‡½æ•°ä½“å†…ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨å…¶å‚æ•°å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æ‰€æœ‰æ•è·åˆ°çš„å˜é‡ã€‚</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">5</span>;</span><br><span class="line">[] &#123;&#125;;</span><br><span class="line">[a, b]()<span class="keyword">mutable</span> &#123;a = <span class="number">100</span>; b = <span class="number">200</span>; <span class="keyword">return</span> a + b; &#125;;</span><br><span class="line"><span class="keyword">auto</span> func = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span> &#123;a = <span class="number">1</span>; b = <span class="number">2</span>; <span class="keyword">return</span> a + b; &#125;;</span><br><span class="line"><span class="built_in">func</span>(a, b);</span><br></pre></td></tr></table></figure><h2 id="æ•æ‰åˆ—è¡¨"><a href="#æ•æ‰åˆ—è¡¨" class="headerlink" title="æ•æ‰åˆ—è¡¨"></a>æ•æ‰åˆ—è¡¨</h2><ul><li>[var]ï¼šä»¥å€¼ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡var</li><li>[&#x3D;]ï¼šè¡¨ç¤ºä»¥å€¼ä¼ é€’çš„æ–¹å¼æ•æ‰çˆ¶ç±»ä½œç”¨åŸŸçš„æ‰€æœ‰å˜é‡</li><li>[&amp;]ï¼šè¡¨ç¤ºä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼æ•æ‰çˆ¶ä½œç”¨åŸŸçš„æ‰€æœ‰å˜é‡ï¼Œå¦‚æœæ˜¯ä¼ å¼•ç”¨å½¢å¼ï¼Œä¸éœ€è¦mutableä¹Ÿå¯ä»¥ä¿®æ”¹æ•æ‰åˆ—è¡¨ä¸­çš„å˜é‡</li><li>[&amp;var]ï¼šä»¥å¼•ç”¨ä¼ é€’çš„æ–¹å¼æ•æ‰å˜é‡var</li><li>[this]ï¼šä»¥å€¼ä¼ é€’æ–¹å¼æ•æ‰å½“å‰çš„thisæŒ‡é’ˆ</li><li>æ•æ‰åˆ—è¡¨å¯ä»¥äº¤å‰ä½¿ç”¨</li><li>çˆ¶ç±»ä½œç”¨åŸŸä¸ä¸€å®šæ˜¯ç›´æ¥çˆ¶ç±»ä½œç”¨åŸŸï¼ŒåµŒå¥—çš„ä¹Ÿå¯ä»¥</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="comment">//[=]ä»¥ä¼ å€¼çš„å½¢å¼æ•æ‰çˆ¶ç±»ä½œç”¨åŸŸçš„æ‰€æœ‰å˜é‡</span></span><br><span class="line">[=](<span class="type">int</span> num)<span class="keyword">mutable</span>-&gt;<span class="type">int</span> &#123;</span><br><span class="line">  a = <span class="number">5</span>;</span><br><span class="line">  b = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> a + b + num;</span><br><span class="line">  <span class="comment">//return a + b + c + num;</span></span><br><span class="line">  <span class="comment">//cè¿˜æ²¡æœ‰è¢«å®šä¹‰ï¼Œä¸èƒ½æ•æ‰</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> fun2 = [&amp;](<span class="type">int</span> num)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">  a = <span class="number">5</span>;</span><br><span class="line">  b = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">return</span> a + b + num;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">fun2</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é™¤äº†aä»¥å¤–å…¶ä»–å˜é‡éƒ½ä»¥å€¼ä¼ é€’æ•æ‰ï¼Œaä»¥å¼•ç”¨ä¼ é€’æ•æ‰</span></span><br><span class="line"><span class="comment">//é”™è¯¯å†™æ³•[=, a]ï¼Œéƒ½æ˜¯å€¼ä¼ é€’</span></span><br><span class="line"><span class="keyword">auto</span> fun3 = [=, &amp;a](<span class="type">int</span> num)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + num;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> fun4 = [&amp;, a](<span class="type">int</span> num)-&gt;<span class="type">int</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b + num;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>lambdaè¡¨è¾¾å¼ä¸èƒ½ç›¸äº’èµ‹å€¼ï¼Œä½†å¯ä»¥æ‹·è´ï¼›å¯ä»¥å§lambdaè¡¨è¾¾å¼èµ‹ç»™ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> fun1 = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span>&#123;<span class="keyword">return</span> a + b; &#125;;</span><br><span class="line"><span class="keyword">auto</span> fun2 = [](<span class="type">int</span> a, <span class="type">int</span> b)-&gt;<span class="type">int</span>&#123;<span class="keyword">return</span> a + b; &#125;;</span><br><span class="line"></span><br><span class="line">fun1 = fun2;<span class="comment">//èµ‹å€¼æ“ä½œï¼Œä¸èƒ½æ‰§è¡Œ</span></span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">fun3</span><span class="params">(fun2)</span></span>;<span class="comment">//æ‹·è´æ“ä½œ</span></span><br><span class="line"><span class="keyword">auto</span> fun4 = fun2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">int</span><span class="params">(*fptr)</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span><span class="params">(*fptr2)</span></span>;</span><br><span class="line"></span><br><span class="line">fptr ptr;</span><br><span class="line"></span><br><span class="line">ptr = fun1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å£ä¸ä¸€è‡´</span></span><br><span class="line"><span class="comment">//fptr2 ptr2 = fun1;</span></span><br></pre></td></tr></table></figure><h1 id="çº¿ç¨‹åº“"><a href="#çº¿ç¨‹åº“" class="headerlink" title="çº¿ç¨‹åº“"></a>çº¿ç¨‹åº“</h1><p>å¤´æ–‡ä»¶thread</p><table><thead><tr><th>å‡½æ•°å</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>thread</td><td>æ„é€ ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œæ²¡æœ‰å…³è”ä»»ä½•çº¿ç¨‹å‡½æ•°ï¼Œå³æ²¡æœ‰å¯åŠ¨ä»»ä½•çº¿ç¨‹</td></tr><tr><td>thread(fun, args1, args2, â€¦)</td><td>æ„é€ ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ï¼Œå¹¶å…³è”çº¿ç¨‹å‡½æ•°funï¼Œå‡½æ•°å‚æ•°ä¸ºargs</td></tr><tr><td>get_id()</td><td>è·å–çº¿ç¨‹ID</td></tr><tr><td>joinable()</td><td>çº¿ç¨‹æ˜¯å¦è¿˜åœ¨æ‰§è¡Œï¼Œjoinableä»£è¡¨çš„æ˜¯ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œä¸­çš„çº¿ç¨‹</td></tr><tr><td>join()</td><td>è¯¥å‡½æ•°è°ƒç”¨åä¼šé˜»å¡çº¿ç¨‹ï¼Œå½“è¯¥å‡½æ•°ç»“æŸåï¼Œä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ</td></tr><tr><td>detach()</td><td>çº¿ç¨‹åˆ†ç¦»ï¼ŒæŠŠè¢«åˆ›å»ºçš„çº¿ç¨‹ä¸çº¿ç¨‹å¯¹è±¡åˆ†ç¦»</td></tr></tbody></table><p>RAIIï¼šèµ„æºè·å–ç«‹å³åˆå§‹åŒ–ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–èµ„æºï¼Œåœ¨ææ„å‡½æ•°ä¸­é”€æ¯èµ„æº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadMange</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">ThreadMange</span>(thread&amp; t)</span><br><span class="line">: _thread(t)</span><br><span class="line">&#123; &#125;</span><br><span class="line"></span><br><span class="line">~<span class="built_in">ThreadMange</span>()</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (_thread.<span class="built_in">joinable</span>())</span><br><span class="line">_thread.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">thread&amp; _thread;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">testThread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//thread t1;</span></span><br><span class="line"></span><br><span class="line"><span class="function">thread <span class="title">t1</span><span class="params">(r1)</span></span>;</span><br><span class="line"><span class="function">thread <span class="title">t2</span><span class="params">(r2, <span class="number">1</span>)</span></span>;</span><br><span class="line"><span class="function">thread <span class="title">t3</span><span class="params">(r3, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">ThreadMange <span class="title">tm1</span><span class="params">(t1)</span></span>;</span><br><span class="line"><span class="function">ThreadMange <span class="title">tm2</span><span class="params">(t2)</span></span>;</span><br><span class="line"><span class="function">ThreadMange <span class="title">tm3</span><span class="params">(t3)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*t1.join();</span></span><br><span class="line"><span class="comment">t2.join();</span></span><br><span class="line"><span class="comment">t3.join();*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ç±»çš„æˆå‘˜å‡½æ•°åšçº¿ç¨‹å‡½æ•°ï¼Œéœ€è¦å†™å®Œæ•´çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”éœ€è¦æ˜¾ç¤ºå–åœ°å€ï¼Œå‚æ•°éœ€è¦åŠ ä¸Šthisæ‰€æŒ‡çš„å¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bfun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;B::bfun&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">B b;</span><br><span class="line"><span class="function">thread <span class="title">t1</span><span class="params">(&amp;B::bfun, &amp;b)</span></span>;</span><br><span class="line">t1.<span class="built_in">join</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡½æ•°å‚æ•°ç±»å‹ä¸ºå¼•ç”¨ï¼Œåœ¨çº¿ç¨‹ä¸­éœ€è¦ä¿®æ”¹åŸæ˜¯å˜é‡ï¼Œåˆ™éœ€è¦å¬è¿‡refè½¬æ¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(<span class="type">int</span>&amp; a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">a += <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test3</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">0</span>;</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line"><span class="function">thread <span class="title">t1</span><span class="params">(fun, ref(a))</span></span>;</span><br><span class="line">t1.<span class="built_in">join</span>();</span><br><span class="line">cout &lt;&lt; a &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸå­æ€§æ“ä½œåº“ï¼ˆatomicï¼‰"><a href="#åŸå­æ€§æ“ä½œåº“ï¼ˆatomicï¼‰" class="headerlink" title="åŸå­æ€§æ“ä½œåº“ï¼ˆatomicï¼‰"></a>åŸå­æ€§æ“ä½œåº“ï¼ˆatomicï¼‰</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">unsigned</span> <span class="type">long</span> sum = <span class="number">0L</span>;</span><br><span class="line"><span class="function">atomic&lt;<span class="type">int</span>&gt; <span class="title">sum2</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">(<span class="type">size_t</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">sum2++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line">cin &gt;&gt; num;</span><br><span class="line"></span><br><span class="line"><span class="function">thread <span class="title">t1</span><span class="params">(func, num)</span></span>;</span><br><span class="line"><span class="function">thread <span class="title">t2</span><span class="params">(func, num)</span></span>;</span><br><span class="line"></span><br><span class="line">t1.<span class="built_in">join</span>();</span><br><span class="line">t2.<span class="built_in">join</span>();</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; sum2 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†ä¸€ä¸ªå˜é‡å£°æ˜ä¸ºåŸå­ç±»å‹å˜é‡ä¹‹åï¼Œä¸éœ€è¦å¯¹è¯¥å˜é‡åŠ äº’æ–¥é”ï¼Œçº¿ç¨‹ä¹Ÿèƒ½å¤Ÿå¯¹è¯¥å˜é‡äº’æ–¥è®¿é—®ï¼Œå¯ä»¥æ ¹æ®<code>atomic</code>ç±»æ¨¡ç‰ˆï¼Œå®šä¹‰å‡ºéœ€è¦çš„ä»»æ„åŸå­ç±»å‹ã€‚</p><p>ç”±äºåŸå­ç±»å‹é€šå¸¸å±äºèµ„æºå‹æ•°æ®ï¼Œæ•…åœ¨C++11ä¸­ï¼Œæ ‡å‡†åº“å°†æ‹·è´æ„é€ ï¼Œç§»åŠ¨æ„é€ ä»¥åŠè¿ç®—ç¬¦é‡è½½é»˜è®¤ç½®ä¸º<code>delete</code></p><h1 id="mutex"><a href="#mutex" class="headerlink" title="mutex"></a>mutex</h1><ol><li>mutex</li></ol><p>try_lockï¼šéé˜»å¡åŠ é”æ“ä½œï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹æ²¡æœ‰é‡Šæ”¾å½“å‰é”ï¼Œåˆ™ç›´æ¥è¿”å›åŠ é”å¤±è´¥ç»“æœ</p><p>lockï¼šé˜»å¡åŠ é”æ“ä½œï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹æ²¡æœ‰é‡Šæ”¾å½“å‰é”ï¼Œé˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹é‡Šæ”¾å½“å‰é”</p><p>unlockï¼šè§£é”</p><ol start="2"><li>recursive_mutexï¼šé€’å½’ä¸Šé”ï¼Œå…è®¸å¯¹äº’æ–¥é‡è¿›è¡Œå¤šæ¬¡ä¸Šé”ï¼Œä½†è§£é”éœ€è¦è°ƒç”¨ä¸ä¸Šé”ç›¸åŒçš„é€’å½’æ·±åº¦</li><li>timed_mutex</li></ol><ul><li>try_lock_forï¼šæ¥å—ä¸€ä¸ªæ—¶é—´èŒƒå›´ï¼Œè¡¨ç¤ºåœ¨è¿™ä¸€æ®µæ—¶é—´èŒƒå›´ä¹‹å†…çº¿ç¨‹å¦‚æœæ²¡æœ‰è·å¾—é”åˆ™è¢«é˜»å¡ä½ï¼ˆä¸ std::mutex çš„ try_lock() ä¸åŒï¼Œtry_lock å¦‚æœè¢«è°ƒç”¨æ—¶æ²¡æœ‰è·å¾—é”åˆ™ç›´æ¥è¿”å› falseï¼‰ï¼Œå¦‚æœåœ¨æ­¤æœŸé—´å…¶ä»–çº¿ç¨‹ é‡Šæ”¾äº†é”ï¼Œåˆ™è¯¥çº¿ç¨‹å¯ä»¥è·å¾—å¯¹äº’æ–¥é‡çš„é”ï¼Œå¦‚æœè¶…æ—¶ï¼ˆå³åœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ˜¯æ²¡æœ‰è·å¾—é”ï¼‰ï¼Œåˆ™è¿” å› falseã€‚ </li><li>try_lock_until() ï¼šæ¥å—ä¸€ä¸ªæ—¶é—´ç‚¹ä½œä¸ºå‚æ•°ï¼Œåœ¨æŒ‡å®šæ—¶é—´ç‚¹æœªåˆ°æ¥ä¹‹å‰çº¿ç¨‹å¦‚æœæ²¡æœ‰è·å¾—é”åˆ™è¢«é˜»å¡ä½ï¼Œå¦‚æœåœ¨æ­¤æœŸ é—´å…¶ä»–çº¿ç¨‹é‡Šæ”¾äº†é”ï¼Œåˆ™è¯¥çº¿ç¨‹å¯ä»¥è·å¾—å¯¹äº’æ–¥é‡çš„é”ï¼Œå¦‚æœè¶…æ—¶ï¼ˆå³åœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ˜¯æ²¡æœ‰è·å¾— é”ï¼‰ï¼Œåˆ™è¿”å› falseã€‚</li></ul><ol start="4"><li>recursive_timed_mutex</li></ol><h2 id="lock-guard"><a href="#lock-guard" class="headerlink" title="lock_guard"></a>lock_guard</h2><p>lock_guardç±»æ¨¡ç‰ˆé€šè¿‡RAIIçš„æ–¹å¼å¯¹å…¶ç®¡ç†çš„äº’æ–¥é‡è¿›è¡Œäº†å°è£…ï¼Œåœ¨éœ€è¦åŠ é”çš„åœ°æ–¹ï¼Œä½¿ç”¨ä»»æ„ä¸€ä¸ªäº’æ–¥ä½“å®ä¾‹åŒ–ä¸€ä¸ªlock_guardï¼Œè°ƒç”¨å…¶æ„é€ å‡½æ•°å³ä¸Šé”ï¼Œåœ¨å‡ºä½œç”¨åŸŸå‰ï¼Œlock_guardå¯¹è±¡è¦è¢«é”€æ¯ï¼Œä¼šè°ƒç”¨å…¶ææ„å‡½æ•°è€Œè‡ªåŠ¨è§£é”ï¼Œå¯ä»¥æœ‰æ•ˆé¿å…æ­»é”é—®é¢˜ã€‚</p><p>ç¼ºé™·ï¼šå¤ªè¿‡å•ä¸€ï¼Œç”¨æˆ·æ— æ³•å¯¹è¯¥é”è¿›è¡Œæ§åˆ¶</p><h2 id="unique-lock"><a href="#unique-lock" class="headerlink" title="unique_lock"></a>unique_lock</h2><p>ç›¸è¾ƒäºlock_guardæœ‰äº†æ›´å¤šçš„æ¥å£</p><p>ä¸Šé”&#x2F;è§£é”æ“ä½œï¼šlockã€try_lockã€try_lock_forã€try_lock_untilå’Œunlock </p><p>ä¿®æ”¹æ“ä½œï¼šç§»åŠ¨èµ‹å€¼ã€äº¤æ¢(swapï¼šä¸å¦ä¸€ä¸ªunique_lockå¯¹è±¡äº’æ¢æ‰€ç®¡ç†çš„äº’æ–¥é‡æ‰€æœ‰æƒ)ã€é‡Šæ”¾ (releaseï¼šè¿”å›å®ƒæ‰€ç®¡ç†çš„äº’æ–¥é‡å¯¹è±¡çš„æŒ‡é’ˆï¼Œå¹¶é‡Šæ”¾æ‰€æœ‰æƒ) </p><p>è·å–å±æ€§ï¼šowns_lock(è¿”å›å½“å‰å¯¹è±¡æ˜¯å¦ä¸Šäº†é”)ã€operator bool()(ä¸owns_lock()çš„åŠŸèƒ½ç›¸åŒ)ã€ mutex(è¿”å›å½“å‰unique_lockæ‰€ç®¡ç†çš„äº’æ–¥é‡çš„æŒ‡é’ˆ)ã€‚</p><h1 id="å¤šçº¿ç¨‹å®‰å…¨"><a href="#å¤šçº¿ç¨‹å®‰å…¨" class="headerlink" title="å¤šçº¿ç¨‹å®‰å…¨"></a>å¤šçº¿ç¨‹å®‰å…¨</h1><ol><li><p>åŸå­æ“ä½œï¼šæŒ‡ä»¤ä¸ä¼šè¢«æ‰“æ–­ï¼Œçº¿ç¨‹å®‰å…¨æ“ä½œï¼Œæ•ˆç‡è¾ƒé«˜</p><p> atomic&lt;T&gt;ï¼šæŠŠTç±»å‹æ•°æ®å°è£…æˆåŸå­æ“ä½œ</p></li><li><p>åŠ é”ï¼šé€šè¿‡å¤šçº¿ç¨‹ä¹‹é—´çš„åŠ é”é˜»å¡ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡è¾ƒä½ï¼ŒåŠ é”è§£é”æ¯”è¾ƒè€—æ—¶ï¼ˆç›¸å¯¹äºåŸå­æ“ä½œï¼‰</p><p> mutexã€recursive_mutexã€timed_mutexã€recursive_timed_mutex</p><p> lockï¼šé˜»å¡å¼åŠ é”</p><p> unlockï¼šè§£é”</p><p> try_lockï¼šéé˜»å¡å¼åŠ é”</p></li></ol><p>lock_guardã€unique_lockï¼šRAIIå®ç°ï¼Œé€šè¿‡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ§åˆ¶é”çš„ç”Ÿå‘½å‘¨æœŸï¼š</p><p>æ„é€ å‡½æ•°-&gt;åŠ é”ã€ææ„å‡½æ•°-&gt;è§£é”</p><p>ä¸æ”¯æŒæ‹·è´æ“ä½œ</p><h1 id="å¼‚å¸¸æ¦‚å¿µ"><a href="#å¼‚å¸¸æ¦‚å¿µ" class="headerlink" title="å¼‚å¸¸æ¦‚å¿µ"></a>å¼‚å¸¸æ¦‚å¿µ</h1><ul><li>throwï¼šå½“é—®é¢˜å‡ºç°æ—¶ï¼Œç¨‹åºä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œé€šè¿‡throwå…³é”®å­—æ¥å®Œæˆ</li><li>catchï¼šåœ¨æƒ³è¦å¤„ç†é—®é¢˜çš„åœ°æ–¹ï¼Œé€šè¿‡å¼‚å¸¸å¤„ç†ç¨‹åºæ•è·ä¸€åœºï¼Œcatchç”¨äºæ•è·å¼‚å¸¸ï¼Œå¯ä»¥æœ‰å¤šä¸ªcatchè¿›è¡Œæ•è·</li><li>tryï¼štryä»£ç å—ä¸­çš„ä»£ç è¡¨ç¤ºå°†è¢«æ¿€æ´»ç‰¹å®šçš„å¼‚å¸¸</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="number">0</span>;<span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//tryï¼šå¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„ä»£ç æ”¾åœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="built_in">fun2</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">char</span> ch)</span><br><span class="line">&#123;<span class="comment">//æ•è·å¯¹åº”ç±»å‹çš„å¼‚å¸¸</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;catch(char)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">char</span>* str)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;catch(char*)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;catch(int)&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼‚å¸¸çš„ä½¿ç”¨"><a href="#å¼‚å¸¸çš„ä½¿ç”¨" class="headerlink" title="å¼‚å¸¸çš„ä½¿ç”¨"></a>å¼‚å¸¸çš„ä½¿ç”¨</h2><p><strong>å¼‚å¸¸çš„æŠ›å‡ºå’ŒåŒ¹é…åŸåˆ™ï¼š</strong> </p><ol><li>å¼‚å¸¸æ˜¯é€šè¿‡æŠ›å‡ºå¯¹è±¡è€Œå¼•å‘çš„ï¼Œè¯¥å¯¹è±¡çš„ç±»å‹å†³å®šäº†åº”è¯¥æ¿€æ´»å“ªä¸ªcatchçš„å¤„ç†ä»£ç ã€‚ </li><li>è¢«é€‰ä¸­çš„å¤„ç†ä»£ç æ˜¯è°ƒç”¨é“¾ä¸­ä¸è¯¥å¯¹è±¡ç±»å‹åŒ¹é…ä¸”ç¦»æŠ›å‡ºå¼‚å¸¸ä½ç½®æœ€è¿‘çš„é‚£ä¸€ä¸ªã€‚ </li><li>æŠ›å‡ºå¼‚å¸¸å¯¹è±¡åï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¼‚å¸¸å¯¹è±¡çš„æ‹·è´ï¼Œå› ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡å¯èƒ½æ˜¯ä¸€ä¸ªä¸´æ—¶å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆä¸€ä¸ªæ‹·è´å¯¹è±¡ï¼Œè¿™ä¸ªæ‹·è´çš„ä¸´æ—¶å¯¹è±¡ä¼šåœ¨è¢«catchä»¥åé”€æ¯ã€‚ï¼ˆè¿™é‡Œçš„å¤„ç†ç±»ä¼¼äºå‡½æ•°çš„ä¼ å€¼è¿”å›ï¼‰ </li><li>catch(â€¦)å¯ä»¥æ•è·ä»»æ„ç±»å‹çš„å¼‚å¸¸ï¼Œä½†æ˜¯ä¸çŸ¥é“å¼‚å¸¸é”™è¯¯æ˜¯ä»€ä¹ˆã€‚ </li><li>å®é™…ä¸­æŠ›å‡ºå’Œæ•è·çš„åŒ¹é…åŸåˆ™æœ‰ä¸ªä¾‹å¤–ï¼Œå¹¶ä¸æ˜¯ç±»å‹å®Œå…¨åŒ¹é…ï¼Œå¯ä»¥æŠ›å‡ºæ´¾ç”Ÿç±»å¯¹è±¡ï¼Œä½¿ç”¨åŸºç±»æ•è·ã€‚</li></ol><p><strong>åœ¨å‡½æ•°è°ƒç”¨é“¾ä¸­å¼‚å¸¸æ ˆå±•å¼€åŒ¹é…åŸåˆ™ï¼š</strong> </p><ol><li>é¦–å…ˆæ£€æŸ¥throwæœ¬èº«æ˜¯å¦åœ¨tryå—å†…éƒ¨ï¼Œå¦‚æœæ˜¯å†æŸ¥æ‰¾åŒ¹é…çš„catchè¯­å¥ã€‚å¦‚æœæœ‰åŒ¹é…çš„ï¼Œåˆ™è°ƒåˆ°catchçš„åœ°æ–¹è¿›è¡Œå¤„ç†ã€‚ </li><li>æ²¡æœ‰åŒ¹é…çš„catchåˆ™é€€å‡ºå½“å‰å‡½æ•°æ ˆï¼Œç»§ç»­åœ¨è°ƒç”¨å‡½æ•°çš„æ ˆä¸­è¿›è¡ŒæŸ¥æ‰¾åŒ¹é…çš„catchã€‚ </li><li>å¦‚æœåˆ°è¾¾mainå‡½æ•°çš„æ ˆï¼Œä¾æ—§æ²¡æœ‰åŒ¹é…çš„ï¼Œåˆ™ç»ˆæ­¢ç¨‹åºã€‚ä¸Šè¿°è¿™ä¸ªæ²¿ç€è°ƒç”¨é“¾æŸ¥æ‰¾åŒ¹é…çš„catchå­å¥çš„è¿‡ç¨‹ç§°ä¸ºæ ˆå±•å¼€ã€‚æ‰€ä»¥å®é™…ä¸­ä¸€èˆ¬éƒ½ä¼šåŠ ä¸€ä¸ªcatch(â€¦)æ•è·ä»»æ„ç±»å‹çš„å¼‚å¸¸ï¼Œå¦åˆ™å½“æœ‰å¼‚å¸¸æ²¡æ• è·ï¼Œç¨‹åºå°±ä¼šç›´æ¥ç»ˆæ­¢ã€‚ </li><li>æ‰¾åˆ°åŒ¹é…çš„catchå­å¥å¹¶å¤„ç†ä»¥åï¼Œä¼šç»§ç»­æ²¿ç€catchå­å¥åé¢ç»§ç»­æ‰§è¡Œ</li></ol><p><strong>å¼‚å¸¸çš„é‡æ–°æŠ›å‡ºï¼š</strong>æœ‰å¯èƒ½å•ä¸ªçš„catchä¸èƒ½å®Œå…¨å¤„ç†å¼‚å¸¸ï¼Œåœ¨è¿›è¡Œä¸€äº›çŸ«æ­£å¤„ç†åï¼Œå¸Œæœ›å†äº¤ç»™æ›´å¤–å±‚çš„è°ƒç”¨é“¾å‡½æ•°æ¥å¤„ç†ï¼Œcatchåˆ™å¯ä»¥é€šè¿‡é‡æ–°æŠ›å‡ºå¼‚å¸¸ä¼ é€’ç»™æ›´ä¸Šå±‚çš„å‡½æ•°è¿›è¡Œå¤„ç†</p><p><strong>å¼‚å¸¸å®‰å…¨ï¼š</strong></p><ul><li>æ„é€ å‡½æ•°å®Œæˆå¯¹è±¡çš„æ„é€ å’Œåˆå§‹åŒ–ï¼Œæœ€å¥½ä¸è¦åœ¨æ„é€ å‡½æ•°ä¸­æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´å¯¹è±¡ä¸å®Œæ•´æˆ–æ²¡æœ‰å®Œå…¨åˆå§‹åŒ–</li><li>ææ„å‡½æ•°ä¸»è¦å®Œæˆèµ„æºçš„æ¸…ç†ï¼Œæœ€å¥½ä¸è¦åœ¨ææ„å‡½æ•°å†…æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´èµ„æºæ³„æ¼(å†…å­˜æ³„æ¼ã€å¥æŸ„æœªå…³é—­ç­‰) </li><li>C++ä¸­å¼‚å¸¸ç»å¸¸ä¼šå¯¼è‡´èµ„æºæ³„æ¼çš„é—®é¢˜ï¼Œæ¯”å¦‚åœ¨newå’Œdeleteä¸­æŠ›å‡ºäº†å¼‚å¸¸ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œåœ¨lockå’Œunlockä¹‹é—´æŠ›å‡ºäº†å¼‚å¸¸å¯¼è‡´æ­»é”ï¼Œè€ŒC++ç»å¸¸ä½¿ç”¨RAIIæ¥è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚</li></ul><p><strong>å¼‚å¸¸è§„èŒƒï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°ä¼šæŠ›å‡ºA/B/C/Dä¸­çš„æŸç§ç±»å‹çš„å¼‚å¸¸ </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">()</span> <span class="title">throw</span><span class="params">(Aï¼ŒBï¼ŒCï¼ŒD)</span></span>; </span><br><span class="line"><span class="comment">// è¿™é‡Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°åªä¼šæŠ›å‡ºbad_allocçš„å¼‚å¸¸ </span></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="keyword">operator</span> <span class="title">new</span> <span class="params">(std::<span class="type">size_t</span> size)</span> <span class="title">throw</span> <span class="params">(std::bad_alloc)</span></span>; </span><br><span class="line"><span class="comment">// è¿™é‡Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ </span></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="keyword">operator</span> <span class="title">new</span> <span class="params">(std::<span class="type">size_t</span> size, <span class="type">void</span>* ptr)</span> <span class="title">throw</span><span class="params">()</span></span>; </span><br></pre></td></tr></table></figure><h2 id="æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸ä½“ç³»"><a href="#æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸ä½“ç³»" class="headerlink" title="æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸ä½“ç³»"></a>æ ‡å‡†åº“ä¸­çš„å¼‚å¸¸ä½“ç³»</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">try</span></span><br><span class="line">  &#123;</span><br><span class="line">    vector&lt;<span class="type">int</span>&gt; arr;</span><br><span class="line">    arr.<span class="built_in">at</span>(<span class="number">10</span>) = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">catch</span>(exception&amp; e)</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; e.<span class="built_in">what</span>() &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">catch</span>(...)</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;æœªçŸ¥å¼‚å¸¸&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>std::execptiom</code>æ˜¯æ‰€æœ‰æ ‡å‡†C++å¼‚å¸¸çš„çˆ¶ç±»ï¼Œç”¨æ‰€æœ‰å¼‚å¸¸çš„æ ¹åŸºç±»çš„å¼•ç”¨æˆ–æŒ‡é’ˆè¿›è¡Œæ•æ‰ï¼Œå¯ä»¥åŒ¹é…æ‰€æœ‰ç»§æ‰¿ä½“ç³»çš„æ‰€æœ‰ç±»å‹ï¼Œé€šè¿‡æ ¹åŸºç±»è™šå‡½æ•°é‡å†™ï¼Œå®Œæˆå¤šæ€çš„é€»è¾‘ï¼Œæœ€ç»ˆé€šè¿‡å¤šæ€å®Œæˆå¯¹å¼‚å¸¸çš„ç²¾å‡†å¤„ç†</p><h2 id="å¼‚å¸¸çš„ä¼˜ç¼ºç‚¹"><a href="#å¼‚å¸¸çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="å¼‚å¸¸çš„ä¼˜ç¼ºç‚¹"></a>å¼‚å¸¸çš„ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ol><li>å¼‚å¸¸å¯¹è±¡å®šä¹‰å¥½äº†ï¼Œç›¸æ¯”é”™è¯¯ç çš„æ–¹å¼å¯ä»¥æ¸…æ™°å‡†ç¡®çš„å±•ç¤ºå‡ºé”™è¯¯çš„å„ç§ä¿¡æ¯ï¼Œç”šè‡³å¯ä»¥åŒ…å«å †æ ˆè°ƒç”¨çš„ä¿¡æ¯ï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©æ›´å¥½çš„å®šä½ç¨‹åºçš„bugã€‚ </li><li>è¿”å›é”™è¯¯ç çš„ä¼ ç»Ÿæ–¹å¼æœ‰ä¸ªå¾ˆå¤§çš„é—®é¢˜æ˜¯ï¼Œåœ¨å‡½æ•°è°ƒç”¨é“¾ä¸­ï¼Œæ·±å±‚çš„å‡½æ•°è¿”å›äº†é”™è¯¯ï¼Œéœ€è¦å¾—å±‚å±‚è¿”å›é”™è¯¯ï¼Œæœ€å¤–å±‚æ‰èƒ½æ‹¿åˆ°é”™è¯¯ã€‚</li><li>å¾ˆå¤šçš„ç¬¬ä¸‰æ–¹åº“éƒ½åŒ…å«å¼‚å¸¸ã€‚</li><li>å¾ˆå¤šæµ‹è¯•æ¡†æ¶éƒ½ä½¿ç”¨å¼‚å¸¸ï¼Œè¿™æ ·èƒ½æ›´å¥½çš„ä½¿ç”¨å•å…ƒæµ‹è¯•ç­‰è¿›è¡Œç™½ç›’çš„æµ‹è¯•ã€‚ </li><li>éƒ¨åˆ†å‡½æ•°ä½¿ç”¨å¼‚å¸¸æ›´å¥½å¤„ç†ï¼Œæ¯”å¦‚æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä¸æ–¹ä¾¿ä½¿ç”¨é”™è¯¯ç æ–¹å¼å¤„ç†ã€‚æ¯”å¦‚T&amp;operatorè¿™æ ·çš„å‡½æ•°ï¼Œå¦‚æœposè¶Šç•Œäº†åªèƒ½ä½¿ç”¨å¼‚å¸¸æˆ–è€…ç»ˆæ­¢ç¨‹åºå¤„ç†ï¼Œæ²¡åŠæ³•é€šè¿‡è¿”å›å€¼è¡¨ç¤ºé”™è¯¯ã€‚</li></ol><p><strong>ç¼ºç‚¹ï¼š</strong></p><ol><li>å¼‚å¸¸ä¼šå¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæµä¹±è·³ï¼Œå¹¶ä¸”éå¸¸çš„æ··ä¹±ï¼Œå¹¶ä¸”æ˜¯è¿è¡Œæ—¶å‡ºé”™æŠ›å¼‚å¸¸å°±ä¼šä¹±è·³ã€‚ä¼šå¯¼è‡´è¸ªè°ƒè¯•æ—¶ä»¥åŠåˆ†æç¨‹åºæ—¶æ¯”è¾ƒå›°éš¾ã€‚ </li><li>å¼‚å¸¸ä¼šæœ‰ä¸€äº›æ€§èƒ½çš„å¼€é”€ã€‚ä½†æ˜¯åœ¨ç°ä»£ç¡¬ä»¶é€Ÿåº¦å¾ˆå¿«çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå½±å“åŸºæœ¬å¿½ç•¥ä¸è®¡ã€‚ </li><li>C++æ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œèµ„æºéœ€è¦è‡ªå·±ç®¡ç†ï¼Œæœ‰äº†å¼‚å¸¸éå¸¸å®¹æ˜“å¯¼è‡´å†…å­˜æ³„æ¼ã€æ­»é”ç­‰å¼‚å¸¸å®‰å…¨é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨RAIIæ¥å¤„ç†èµ„æºçš„ç®¡ç†é—®é¢˜ã€‚</li><li>C++æ ‡å‡†åº“çš„å¼‚å¸¸ä½“ç³»å®šä¹‰å¾—ä¸å¥½ï¼Œå¯¼è‡´å¤§å®¶å„è‡ªå®šä¹‰å„è‡ªçš„å¼‚å¸¸ä½“ç³»ï¼Œéå¸¸çš„æ··ä¹±ã€‚ </li><li>å¼‚å¸¸å°½é‡è§„èŒƒä½¿ç”¨ï¼Œå¦åˆ™åæœä¸å ªè®¾æƒ³ï¼Œéšæ„æŠ›å¼‚å¸¸ï¼Œå¤–å±‚æ•è·çš„ç”¨æˆ·è‹¦ä¸å ªè¨€ã€‚æ‰€ä»¥å¼‚å¸¸è§„èŒƒæœ‰ä¸¤ç‚¹ï¼šä¸€ã€æŠ›å‡ºå¼‚å¸¸ç±»å‹éƒ½ç»§æ‰¿è‡ªä¸€ä¸ªåŸºç±»ã€‚äºŒã€å‡½æ•°æ˜¯å¦æŠ›å¼‚å¸¸ã€æŠ›ä»€ä¹ˆå¼‚å¸¸ï¼Œéƒ½ä½¿ç”¨ func()ã€throw();çš„æ–¹å¼è§„èŒƒåŒ–ã€‚</li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;åˆ—è¡¨åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#åˆ—è¡¨åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=&quot;åˆ—è¡¨åˆå§‹åŒ–&quot;&gt;&lt;/a&gt;åˆ—è¡¨åˆå§‹åŒ–&lt;/h1&gt;&lt;p&gt;C++11ï¼šæ”¯æŒå†…ç½®ç±»å‹ä¸è‡ªå®šä¹‰ç±»å‹çš„åˆ—è¡¨åˆå§‹åŒ–ï¼Œå…¶ä¸­è‡ªå®šä¹‰ç±»å‹ä¸æ˜¯å¤©ç„¶æ”¯æŒåˆ—è¡¨åˆå§‹åŒ–ï¼Œéœ€è¦æ˜¾ç¤ºå®šä¹‰å‚æ•°ç±»å‹ä¸º&lt;code&gt;initiaizer_list&lt;/code&gt;çš„æ„é€ å‡½æ•°&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title class_&quot;&gt;A&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;A&lt;/span&gt; (&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; a, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    : _a(a)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    , _b(b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#123; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; _a;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; _b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; arr[] = &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; a = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; b = &amp;#123; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt; c&amp;#123; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;float&lt;/span&gt; d = &amp;#123; &lt;span class=&quot;number&quot;&gt;1.2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vector&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; arr1&amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;vector&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; arr2 = &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;pair&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; p = &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;map&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; m = &amp;#123; &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&amp;#125;, &amp;#123;&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&amp;#125;, &amp;#123;&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;&amp;#125; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;A a = &amp;#123;&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;A &lt;span class=&quot;title&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ä»æ— åºå…³è”å®¹å™¨åˆ°å“ˆå¸Œï¼ˆåŠæ— åºå…³è”å®¹å™¨çš„æ¨¡æ‹Ÿå®ç°ï¼‰</title>
    <link href="http://zhaozhuolin.com/2020/07/20200719.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200719.html</id>
    <published>2020-07-19T12:11:00.000Z</published>
    <updated>2023-05-07T11:18:08.085Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ— åºå…³è”å®¹å™¨"><a href="#æ— åºå…³è”å®¹å™¨" class="headerlink" title="æ— åºå…³è”å®¹å™¨"></a>æ— åºå…³è”å®¹å™¨</h1><h2 id="unordered-map"><a href="#unordered-map" class="headerlink" title="unordered_map"></a>unordered_map</h2><p>åŸºæœ¬ä½¿ç”¨ä¸mapç›¸åŒï¼Œè¿­ä»£å™¨æ— åå‘è¿­ä»£å™¨ï¼Œæ— åºmapï¼Œå…¶ä½“ç°åœ¨éå†æ—¶æ— åº</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">testUMap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; um;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line"></span><br><span class="line">um.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">um.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">10</span>, <span class="number">1</span>));</span><br><span class="line">um.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">2</span>, <span class="number">1</span>));</span><br><span class="line">um.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">15</span>, <span class="number">1</span>));</span><br><span class="line">um.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">8</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">um[<span class="number">100</span>] = <span class="number">100</span>;<span class="comment">//æ’å…¥</span></span><br><span class="line">um[<span class="number">15</span>] = <span class="number">15</span>;<span class="comment">//ä¿®æ”¹</span></span><br><span class="line"></span><br><span class="line">um.<span class="built_in">at</span>(<span class="number">2</span>) = <span class="number">2</span>;<span class="comment">//atæ— æ³•æ’å…¥ï¼Œkeyä¸å­˜åœ¨ç›´æ¥æŠ›å¼‚å¸¸</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†æ— åº</span></span><br><span class="line">unordered_map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator uit = um.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span> (uit != um.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; uit-&gt;first &lt;&lt; <span class="string">&quot;--&gt;&quot;</span> &lt;&lt; uit-&gt;second &lt;&lt; endl;</span><br><span class="line">uit++;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  uit = um.<span class="built_in">find</span>(<span class="number">100</span>);<span class="comment">//findæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›endè¿­ä»£å™¨</span></span><br><span class="line">cout &lt;&lt; um.<span class="built_in">count</span>(<span class="number">100</span>) &lt;&lt; endl;<span class="comment">//countè¿”å›å…ƒç´ ä¸ªæ•°ï¼Œ1æˆ–0</span></span><br><span class="line">cout &lt;&lt; uit-&gt;first &lt;&lt; <span class="string">&quot;--&gt;&quot;</span> &lt;&lt; uit-&gt;second &lt;&lt; endl;</span><br><span class="line">uit = um.<span class="built_in">find</span>(<span class="number">20</span>);</span><br><span class="line">cout &lt;&lt; um.<span class="built_in">count</span>(<span class="number">20</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; (uit == um.<span class="built_in">end</span>()) &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="unordered-set"><a href="#unordered-set" class="headerlink" title="unordered_set"></a>unordered_set</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">unordered_set&lt;<span class="type">int</span>&gt; us;</span><br><span class="line"></span><br><span class="line">us.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line">us.<span class="built_in">insert</span>(<span class="number">99</span>);</span><br><span class="line">us.<span class="built_in">insert</span>(<span class="number">48</span>);</span><br><span class="line">us.<span class="built_in">insert</span>(<span class="number">27</span>);</span><br><span class="line">us.<span class="built_in">insert</span>(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿­ä»£å™¨éå†æ— åº</span></span><br><span class="line">unordered_set&lt;<span class="type">int</span>&gt;::iterator uit = us.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span> (uit != us.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; *uit &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">uit++;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h2 id="å’Œæœ‰åºå®¹å™¨çš„åŒºåˆ«"><a href="#å’Œæœ‰åºå®¹å™¨çš„åŒºåˆ«" class="headerlink" title="å’Œæœ‰åºå®¹å™¨çš„åŒºåˆ«"></a>å’Œæœ‰åºå®¹å™¨çš„åŒºåˆ«</h2><p>map, set, multi_map, multi_setï¼šè¿­ä»£å™¨éå†æœ‰åºï¼Œä¸­åºéå†ï¼›åº•å±‚å®ç°ï¼šçº¢é»‘æ ‘ï¼›æ“ä½œæ—¶é—´å¤æ‚åº¦O(log<sub>2</sub>n)</p><p>unordered_map, unordered_set, unordered_multimap, unordered_multisetï¼š</p><p>è¿­ä»£å™¨éå†æ— åºï¼Œåº•å±‚å®ç°ï¼šå“ˆå¸Œï¼›æ“ä½œæ—¶é—´å¤æ‚åº¦O(1)</p><p>ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li>å¯¹éå†é¡ºåºæœ‰è¦æ±‚ï¼šéunorderedç³»åˆ—å®¹å™¨</li><li>å¯¹æ€§èƒ½è¦æ±‚æ›´é«˜ï¼šunorderedç³»åˆ—å®¹å™¨</li></ol><h1 id="åº•å±‚ç»“æ„ï¼šå“ˆå¸Œç»“æ„"><a href="#åº•å±‚ç»“æ„ï¼šå“ˆå¸Œç»“æ„" class="headerlink" title="åº•å±‚ç»“æ„ï¼šå“ˆå¸Œç»“æ„"></a>åº•å±‚ç»“æ„ï¼šå“ˆå¸Œç»“æ„</h1><p>é€šè¿‡æ„é€ ä¸€ç§å­˜å‚¨ç»“æ„ï¼Œé€šè¿‡æŸç§å‡½æ•°ï¼ˆhashFuncï¼‰ä½¿å…ƒç´ çš„å­˜å‚¨ä½ç½®å’Œå®ƒçš„å…³é”®ç ä¹‹é—´èƒ½å¤Ÿå»ºç«‹ä¸€ä¸€æ˜ å°„çš„å…³ç³»ï¼Œé‚£ä¹ˆåœ¨æŸ¥æ‰¾æ—¶å°±å¯ä»¥å¾ˆå¿«çš„æ‰¾åˆ°è¯¥å…ƒç´ ï¼Œä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„ç»“æ„</p><p>æ˜ å°„å…³ç³»ï¼šå“ˆå¸Œå‡½æ•°</p><p>â€‹å“ˆå¸Œï¼šæŠŠå…ƒç´ &#x2F;é”®å€¼æ˜ å°„åˆ°ç©ºé—´çš„æŸä¸€ä¸ªä½ç½®</p><p>â€‹ç‰¹ç‚¹ï¼š</p><ol><li>æ˜ å°„ä½ç½®èŒƒå›´å°äºç­‰äºç©ºé—´èŒƒå›´</li><li>æ˜ å°„ä½ç½®å°½é‡å‡åŒ€</li><li>æ˜ å°„å…³ç³»å°½é‡ç®€å•</li></ol><p>å¸¸ç”¨çš„å“ˆå¸Œå‡½æ•°ï¼š</p><ol><li>é™¤ç•™ä½™æ•°æ³•ï¼ˆé€šç”¨ï¼‰ï¼šå…ƒç´ &#x2F;é”®å€¼ % ç©ºé—´çš„å¤§å°</li><li>ç›´æ¥å®šå€æ³•ï¼ˆåªé€‚åˆèŒƒå›´ç´§å‡‘çš„æ•°æ®ï¼Œå¦‚å­—ç¬¦ï¼‰ï¼šçº¿æ€§å‡½æ•°ï¼ŒA * x(å…ƒç´ &#x2F;é”®å€¼) + (B)åç½®</li></ol><h2 id="å“ˆå¸Œå†²çª"><a href="#å“ˆå¸Œå†²çª" class="headerlink" title="å“ˆå¸Œå†²çª"></a>å“ˆå¸Œå†²çª</h2><p>ä¸åŒçš„æ•°æ®æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®å³ä¸ºå“ˆå¸Œå†²çª</p><p>è§£å†³å“ˆå¸Œå†²çªé—®é¢˜ï¼š</p><ol><li><p>é—­æ•£åˆ—ï¼ˆå¼€æ”¾å®šå€æ³•ï¼‰</p><p> çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹</p></li><li><p>å¼€æ•£åˆ—ï¼ˆæ‹‰é“¾æ³•ï¼Œå“ˆå¸Œæ¡¶ï¼‰</p></li></ol><p>è´Ÿè½½å› å­ï¼šå®é™…å­˜æ”¾çš„å…ƒç´ ä¸ªæ•° &#x2F; ç©ºé—´å¤§å°ï¼ˆä¸€èˆ¬70%ï½80%ï¼‰</p><p><strong>çº¿æ€§æ¢æµ‹ï¼š</strong></p><ol><li>æ’å…¥ï¼š<ol><li>é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å“ˆå¸Œä½ç½®</li><li>å¦‚æœå½“å‰ä½ç½®ä¸ºç©ºï¼Œåˆ™è¿›è¡Œæ’å…¥æ“ä½œ</li><li>å¦‚æœä½ç½®ä¸ä¸ºç©ºï¼Œåˆ™ä»å½“å‰ä½ç½®å¼€å§‹ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºçš„ä½ç½®ï¼Œå†è¿›è¡Œæ’å…¥æ“ä½œ</li></ol></li><li>æŸ¥æ‰¾ï¼š<ol><li>é€šè¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—å“ˆå¸Œä½ç½®</li><li>æŸ¥çœ‹å½“å‰ä½ç½®çš„æ•°æ®æ˜¯å¦å’ŒæŸ¥æ‰¾çš„æ•°æ®ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™æŸ¥æ‰¾ç»“æŸ</li><li>å¦‚æœä¸ç›¸åŒï¼Œåˆ™ä»å½“å‰ä½ç½®ç»§ç»­å‘åæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°äº†æ•°æ®æˆ–è€…èµ°åˆ°äº†ç©ºçš„ä½ç½®ï¼Œåˆ™æŸ¥æ‰¾ç»“æŸ</li></ol></li><li>åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œé€šè¿‡è®¾ç½®çŠ¶æ€æ•°æ®ï¼Œæ¥æ ‡è®°æ•°æ®æ˜¯å¦å¯ç”¨<ol><li>è¿›è¡ŒæŸ¥æ‰¾æ“ä½œ</li><li>å¦‚æœæ‰¾åˆ°éœ€è¦åˆ é™¤çš„æ•°æ®ï¼Œåˆ™å¯¹å¾…åˆ é™¤æ•°æ®æ‰€åœ¨ä½ç½®è¿›è¡Œåˆ é™¤çŠ¶æ€æ ‡è®°</li></ol></li></ol><blockquote><p><strong>äºŒæ¬¡æ¢æµ‹ï¼šæ¯æ¬¡åç§»çš„ä½ç½®çš„é•¿åº¦ä¸ºä¸Šä¸€æ¬¡çš„å¹³æ–¹</strong></p></blockquote><p><strong>å¼€æ•£åˆ—ï¼š</strong></p><ol><li>å¢å®¹ï¼š<ol><li>éå†æ—§è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ </li><li>è®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ åœ¨æ–°è¡¨ä¸­çš„ä½ç½®</li><li>æŠŠå…ƒç´ é‡æ–°æŒ‚è½½åˆ°æ–°è¡¨ä¸­çš„å¯¹åº”ä½ç½®</li></ol></li><li>è¿­ä»£å™¨++ï¼š<ol><li>_nextéç©ºï¼šæ›´æ–°åˆ°_next</li><li>_nextä¸ºç©ºï¼š</li></ol></li></ol><p><code>HashTable</code>: K, V, KeyOfValue, HashFun</p><ul><li>Kï¼šæ•°æ®é”®å€¼</li><li>Vï¼šé”®å€¼å¯¹åº”çš„valueï¼Œ <code>unordered_map</code>â€“&gt;pair&lt;K, V&gt;ã€<code>unordered_set</code>â€”&gt;K</li><li>KeyOfValueï¼šè·å–valueå¯¹åº”çš„é”®å€¼</li><li>HashFunï¼šæŠŠé”®å€¼Kè½¬æ¢æˆæ•´å½¢æ•°æ®ï¼ˆéæ•´å½¢æ•°ç±»å‹çš„è½¬æ¢ï¼Œéæ•´æ•°â€“&gt;æ˜ å°„â€“&gt;æ•´æ•°ï¼‰</li><li>å“ˆå¸Œè¡¨è¿­ä»£å™¨ï¼šå‰ç½®å£°æ˜ï¼Œå‹å…ƒç±»å£°æ˜</li><li>æˆå‘˜ï¼šèŠ‚ç‚¹ï¼Œå“ˆå¸Œè¡¨æŒ‡é’ˆ</li><li>++æ“ä½œï¼š<ul><li>nextæ˜¯å¦éç©ºï¼Œä¸ä¸ºç©ºï¼šæ›´æ–°åˆ°nextèŠ‚ç‚¹ï¼›ä¸ºç©ºï¼š<ul><li>é¦–å…ˆé€šè¿‡kovè·å–å¯¹åº”é”®å€¼</li><li>é€šè¿‡hashFunè®¡ç®—é”®å€¼å¯¹åº”çš„æ•´æ•°å€¼</li><li>é€šè¿‡æ•´æ•°å€¼è®¡ç®—å½“å‰èŠ‚ç‚¹åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®</li><li>ä»ä¸Šä¸€æ­¥è®¡ç®—ä½ç½®çš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œå¯»æ‰¾ç¬¬ä¸€ä¸ªéç©ºç»ƒè¡¨çš„å¤´èŠ‚ç‚¹</li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œæ›´æ–°ä¸ºç©ºæŒ‡é’ˆ</li></ul></li></ul></li><li>beginï¼šç¬¬ä¸€ä¸ªéç©ºé“¾è¡¨çš„å¤´èŠ‚ç‚¹</li><li>endï¼šç©ºèŠ‚ç‚¹</li></ul><p>å“ˆå¸Œè¡¨ï¼ˆå¼€æ•£åˆ—ï¼‰ï¼šå¯ä»¥å­˜æ”¾ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œå¦‚æœé”®å€¼ç±»å‹ä¸ºéæ•°å€¼ç±»å‹ï¼Œå¯ä»¥é€šè¿‡hashFunè½¬æ¢ä¸ºæ•´æ•°å€¼</p><p>æ’å…¥ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼š</p><ul><li>é¦–å…ˆè¿›è¡Œçš„æ“ä½œä¸ºï¼šé€šè¿‡é”®å€¼è®¡ç®—ä½ç½®</li><li>ç„¶åè¿›è¡Œç±»ä¼¼å•é“¾è¡¨çš„æ“ä½œ</li></ul><h1 id="unordered-mapä¸unordered-setçš„æ¨¡æ‹Ÿå®ç°"><a href="#unordered-mapä¸unordered-setçš„æ¨¡æ‹Ÿå®ç°" class="headerlink" title="unordered_mapä¸unordered_setçš„æ¨¡æ‹Ÿå®ç°"></a>unordered_mapä¸unordered_setçš„æ¨¡æ‹Ÿå®ç°</h1><h2 id="å“ˆå¸Œè¡¨"><a href="#å“ˆå¸Œè¡¨" class="headerlink" title="å“ˆå¸Œè¡¨"></a>å“ˆå¸Œè¡¨</h2><p>unordered_mapå’Œunordered_setçš„åº•å±‚å‡ç”±åŒä¸€ä¸ªå“ˆå¸Œè¡¨å®ç°ï¼Œæœ¬æ¬¡å®ç°ä½¿ç”¨å¼€æ•£åˆ—å“ˆå¸Œæ¡¶çš„ç»“æ„ï¼Œå…¶ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashNode</span></span><br><span class="line">&#123;</span><br><span class="line">V _value;</span><br><span class="line">HashNode&lt;V&gt;* _next;</span><br><span class="line"></span><br><span class="line"><span class="built_in">HashNode</span>(<span class="type">const</span> V&amp; val = <span class="built_in">V</span>())</span><br><span class="line">: _value(val)</span><br><span class="line">, _next(<span class="literal">nullptr</span>)</span><br><span class="line">&#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">KeyOfValue</span>, <span class="keyword">class</span> <span class="title class_">HF</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HashTable</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//è¿­ä»£å™¨å£°æ˜ä¸ºå‹å…ƒç±»ï¼ŒåŸå› æ˜¯åœ¨è¿­ä»£å™¨ç±»ä¸­ï¼Œéœ€è¦ä½¿ç”¨åˆ°å“ˆå¸Œè¡¨æ¥è¿›è¡Œè¿­ä»£å™¨çš„è‡ªåŠ æ“ä½œ</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">KeyOfValue</span>, <span class="keyword">class</span> <span class="title class_">HF</span>&gt;</span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">struct</span> <span class="title class_">HashIterator</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> HashNode&lt;V&gt; Node;</span><br><span class="line"><span class="keyword">typedef</span> HashIterator&lt;K, V, KeyOfValue, HF&gt; iterator;<span class="comment">//è¿­ä»£å™¨</span></span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span>ï¼›</span></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span>ï¼›</span></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> V&amp; value)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"><span class="built_in">CheckCapacity</span>();</span><br><span class="line"></span><br><span class="line">HF hf;</span><br><span class="line">KeyOfValue kov;</span><br><span class="line"><span class="type">size_t</span> idx = <span class="built_in">hf</span>(<span class="built_in">kov</span>(value)) % _table.<span class="built_in">size</span>();<span class="comment">//è®¡ç®—å½“å‰å…ƒç´ å¯¹åº”çš„ä½ç½®</span></span><br><span class="line"></span><br><span class="line">Node* cur = _table[idx];</span><br><span class="line"><span class="keyword">while</span> (cur)<span class="comment">//å¯»æ‰¾æ˜¯å¦æœ‰é‡å¤å…ƒç´ ï¼Œé‡å¤åˆ™æ’å…¥å¤±è´¥</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">kov</span>(cur-&gt;_value) == <span class="built_in">kov</span>(value))</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="built_in">iterator</span>(cur, <span class="keyword">this</span>), <span class="literal">false</span>);</span><br><span class="line">cur = cur-&gt;_next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cur = <span class="keyword">new</span> <span class="built_in">Node</span>(value);<span class="comment">//å¤´æ’</span></span><br><span class="line">cur-&gt;_next = _table[idx];</span><br><span class="line">_table[idx] = cur;</span><br><span class="line">_size++;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="built_in">make_pair</span>(<span class="built_in">iterator</span>(cur, <span class="keyword">this</span>), <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Node* <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>;</span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">count</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="type">const</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span> <span class="type">const</span>ï¼›</span></span><br><span class="line"><span class="function"><span class="keyword">private</span>:</span></span><br><span class="line"><span class="function">size_t getNextSize(size_t n);</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">CheckCapacity</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_size == _table.<span class="built_in">size</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">size_t</span> newSize = <span class="built_in">getNextSize</span>(_size);<span class="comment">//è·å–ä¸‹ä¸€ä¸ªè¡¨çš„å¤§å°å€¼</span></span><br><span class="line">vector&lt;Node*&gt; newTable;</span><br><span class="line">newTable.<span class="built_in">resize</span>(newSize);</span><br><span class="line"></span><br><span class="line"><span class="comment">//éå†æ—§è¡¨ä¸­çš„éç©ºå•é“¾è¡¨</span></span><br><span class="line">KeyOfValue kov;</span><br><span class="line">HF hf;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; _table.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">Node* cur = _table[i];</span><br><span class="line"><span class="keyword">while</span> (cur)</span><br><span class="line">&#123;</span><br><span class="line">Node* next = cur-&gt;_next;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> idx = <span class="built_in">hf</span>(<span class="built_in">kov</span>(cur-&gt;_value)) % newTable.<span class="built_in">size</span>();</span><br><span class="line"><span class="comment">//å¤´æ’</span></span><br><span class="line">cur-&gt;_next = newTable[idx];</span><br><span class="line">newTable[idx] = cur;</span><br><span class="line"></span><br><span class="line">cur = next;</span><br><span class="line">&#125;</span><br><span class="line">_table[i] = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line">_table.<span class="built_in">swap</span>(newTable);<span class="comment">//äº¤æ¢æ–°æ—§è¡¨</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">vector&lt;Node*&gt; _table;</span><br><span class="line"><span class="type">size_t</span> _size = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åºåˆ—å®¹å™¨vectoræ¥å­˜æ”¾å•é“¾è¡¨è¡¨å¤´ï¼Œå½“é‡åˆ°å“ˆå¸Œå†²çªæ—¶ï¼Œç›´æ¥å°†æ’å…¥å…ƒç´ å¤´æ’åœ¨å¯¹åº”ä½ç½®çš„å•é“¾è¡¨ï¼›å…¶ä¸­Kã€Vä¸¤ä¸ªæ³›å‹å‚æ•°åœ¨unordered_mapä¸­åˆ†åˆ«ä¸ºKï¼Œ<code>pair&lt;K, V&gt;</code>ï¼Œåœ¨unordered_setä¸­ä¸ºKã€Kï¼›æ³›å‹å‚æ•°<code>KeyOfValue</code>åˆ™ä¸ºä¸åŒçš„è·å–Keyå€¼çš„æ–¹æ³•ï¼Œé€šè¿‡ä»¿å‡½æ•°å¯¹è±¡æ¥å®ç°å…·ä½“çš„æ–¹æ³•</p><p>åœ¨unordered_mapä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">MapKeyOfValue</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K&amp; <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt;&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> value.first;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨unordered_setä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">SetKeyOfValue</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K&amp; <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è€Œæ³›å‹å‚æ•°HFåˆ™ä¸ºå“ˆå¸Œå‡½æ•°ï¼Œä¸€èˆ¬å…·æœ‰é»˜è®¤ç±»å‹å‚æ•°ï¼Œä¹Ÿå¯æŒ‡å®šï¼Œå¦‚åœ¨æœ¬æ¬¡å®ç°ä¸­ä¸ºï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashFunc</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HashFunc</span>&lt;string&gt;</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> string&amp; s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">const</span> <span class="type">char</span>* str = s.<span class="built_in">c_str</span>();</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> seed = <span class="number">131</span>; </span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> hash = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (*str)</span><br><span class="line">&#123;</span><br><span class="line">hash = hash * seed + (*str++);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> hash;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h2><p>å“ˆå¸Œè¡¨çš„è¿­ä»£å™¨ä¸èƒ½é€šè¿‡ç®€å•çš„æŒ‡é’ˆæ¥å®Œæˆï¼Œå¿…é¡»å¯¹æŒ‡é’ˆè¿›è¡Œå°è£…ï¼Œå°è£…æˆä¸€ä¸ªç±»ï¼Œå¹¶å¼€æ”¾beginï¼Œendï¼Œ++ç­‰æ“ä½œçš„æ¥å£ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‰ç½®å£°æ˜</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">KeyOfValue</span>, <span class="keyword">class</span> <span class="title class_">HF</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HashTable</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">KeyOfValue</span>, <span class="keyword">class</span> <span class="title class_">HF</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">HashIterator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> HashNode&lt;V&gt; Node;</span><br><span class="line"><span class="keyword">typedef</span> HashIterator&lt;K, V, KeyOfValue, HF&gt; Self;</span><br><span class="line"><span class="keyword">typedef</span> HashTable&lt;K, V, KeyOfValue, HF&gt; HT;</span><br><span class="line"></span><br><span class="line"><span class="built_in">HashIterator</span>(Node* node, HT* ht)</span><br><span class="line">: _node(node)</span><br><span class="line">, _ht(ht)</span><br><span class="line">&#123; &#125;</span><br><span class="line"></span><br><span class="line">V&amp; <span class="keyword">operator</span>*()&#123;<span class="keyword">return</span> _node-&gt;_value;&#125;</span><br><span class="line"></span><br><span class="line">V* <span class="keyword">operator</span>-&gt;()&#123;<span class="keyword">return</span> &amp;_node-&gt;_value;&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> Self&amp; it)&#123;<span class="keyword">return</span> _node != it._node;&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Self&amp; it)&#123;<span class="keyword">return</span> _node == it._node;&#125;</span><br><span class="line"></span><br><span class="line">Self&amp; <span class="keyword">operator</span>++()&#123;<span class="built_in">add</span>(); <span class="keyword">return</span> *<span class="keyword">this</span>;&#125;</span><br><span class="line"></span><br><span class="line">Self&amp; <span class="keyword">operator</span>++(<span class="type">int</span>)&#123;<span class="function">Self <span class="title">tmp</span><span class="params">(*<span class="keyword">this</span>)</span></span>; <span class="built_in">add</span>(); <span class="keyword">return</span> *tmp;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_node-&gt;_next)</span><br><span class="line">_node = _node-&gt;_next;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">KeyOfValue kov;</span><br><span class="line">HF hf;</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> idx = <span class="built_in">hf</span>(<span class="built_in">kov</span>(_node-&gt;_value)) % _ht-&gt;_table.<span class="built_in">size</span>();<span class="comment">//è®¡ç®—å½“å‰ä¼ å…¥å€¼å¯¹åº”çš„ä½ç½®</span></span><br><span class="line">idx++;</span><br><span class="line"><span class="keyword">if</span> (idx == _ht-&gt;_table.<span class="built_in">size</span>())<span class="comment">//èµ°åˆ°å“ˆå¸Œè¡¨å°¾</span></span><br><span class="line">&#123;</span><br><span class="line">_node = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node* cur = _ht-&gt;_table[idx];</span><br><span class="line"><span class="keyword">for</span> (; idx &lt; _ht-&gt;_table.<span class="built_in">size</span>(); idx++)<span class="comment">//æ‰¾åˆ°ä¸‹ä¸€ä¸ªéç©ºé“¾è¡¨å¤´</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (_ht-&gt;_table[idx])</span><br><span class="line">&#123;</span><br><span class="line">_node = _ht-&gt;_table[idx];</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (idx == _ht-&gt;_table.<span class="built_in">size</span>())<span class="comment">//æ£€æŸ¥æ˜¯å¦å·²ç»éå†å®Œæˆ</span></span><br><span class="line">_node = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node* _node;</span><br><span class="line">HT* _ht;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œunordered_mapå’Œunordered_setçš„å®ç°å·²ç»å®Œæˆäº†å¤§åŠï¼Œæ¥ä¸‹æ¥åˆ›å»ºè¿™ä¸¤ä¸ªç±»åˆ†åˆ«å¯¹å“ˆå¸Œè¡¨ç±»è¿›è¡Œå°è£…å³å¯</p><h2 id="unordered-set-1"><a href="#unordered-set-1" class="headerlink" title="unordered_set"></a>unordered_set</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">HF</span> = HashFunc&lt;K&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> Unordered_Set</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> SetKeyOfValue</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">const</span> K&amp; <span class="built_in">operator</span>()(<span class="type">const</span> K&amp; value)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> HashTable&lt;K, K, SetKeyOfValue, HF&gt;::iterator iterator;</span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">begin</span>();&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">end</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span> <span class="type">const</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">size</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="type">const</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">empty</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; value)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">insert</span>(value);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">erase</span>(key);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">HashNode&lt;K&gt;* <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">find</span>(key);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">count</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">count</span>(key);&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">HashTable&lt;K, K, SetKeyOfValue, HF&gt; _ht;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œé€šè¿‡è°ƒç”¨å“ˆå¸Œè¡¨çš„ä¸åŒæ¥å£ï¼Œæ¥å®ç°unordered_setçš„å„ç§åŠŸèƒ½</p><h2 id="unordered-map-1"><a href="#unordered-map-1" class="headerlink" title="unordered_map"></a>unordered_map</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">HF</span> = HashFunc&lt;K&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> Unordered_Map</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> MapKeyOfValue</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">const</span> K&amp; <span class="built_in">operator</span>()(<span class="type">const</span> pair&lt;K, V&gt;&amp; value)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> value.first;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> HashTable&lt;K, pair&lt;K, V&gt;, MapKeyOfValue, HF&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">begin</span>();&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">end</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span> <span class="type">const</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">size</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span> <span class="type">const</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">empty</span>();&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt;&amp; value)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">insert</span>(value);&#125;</span><br><span class="line"></span><br><span class="line">V&amp; <span class="keyword">operator</span>[](<span class="type">const</span> K&amp; key)&#123;</span><br><span class="line">        pair&lt;iterator, <span class="type">bool</span>&gt; ret = _ht.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, <span class="built_in">V</span>()));</span><br><span class="line"><span class="keyword">return</span> ret.first-&gt;second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">erase</span>(key);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">HashNode&lt;V&gt;* <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">find</span>(key);&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">count</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span>&#123;<span class="keyword">return</span> _ht.<span class="built_in">count</span>(key);&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">HashTable&lt;K, pair&lt;K, V&gt;, MapKeyOfValue, HF&gt; _ht;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å…·ä½“ä»£ç å®ç°"><a href="#å…·ä½“ä»£ç å®ç°" class="headerlink" title="å…·ä½“ä»£ç å®ç°"></a>å…·ä½“ä»£ç å®ç°</h2><p><a href="%5Bhttps://github.com/Latsummer/FinishedProducts/tree/master/unordered_map%E4%B8%8Eset/unordered_map%E4%B8%8Eset%5D(https://github.com/Latsummer/FinishedProducts/tree/master/unordered_map%E4%B8%8Eset/unordered_map%E4%B8%8Eset)">unordered_mapä¸unordered_setçš„æ¨¡æ‹Ÿå®ç° - GitHub</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ— åºå…³è”å®¹å™¨&quot;&gt;&lt;a href=&quot;#æ— åºå…³è”å®¹å™¨&quot; class=&quot;headerlink&quot; title=&quot;æ— åºå…³è”å®¹å™¨&quot;&gt;&lt;/a&gt;æ— åºå…³è”å®¹å™¨&lt;/h1&gt;&lt;h2 id=&quot;unordered-map&quot;&gt;&lt;a href=&quot;#unordered-map&quot; class=&quot;headerlink&quot; title=&quot;unordered_map&quot;&gt;&lt;/a&gt;unordered_map&lt;/h2&gt;&lt;p&gt;åŸºæœ¬ä½¿ç”¨ä¸mapç›¸åŒï¼Œè¿­ä»£å™¨æ— åå‘è¿­ä»£å™¨ï¼Œæ— åºmapï¼Œå…¶ä½“ç°åœ¨éå†æ—¶æ— åº&lt;/p&gt;
&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#&lt;span class=&quot;keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;lt;unordered_map&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;type&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;testUMap&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	unordered_map&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; um;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	map&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt; m;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;insert&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;make_pair&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;insert&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;make_pair&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;insert&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;make_pair&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;insert&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;make_pair&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;insert&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;make_pair&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um[&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;;&lt;span class=&quot;comment&quot;&gt;//æ’å…¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um[&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;] = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;;&lt;span class=&quot;comment&quot;&gt;//ä¿®æ”¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	um.&lt;span class=&quot;built_in&quot;&gt;at&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;span class=&quot;comment&quot;&gt;//atæ— æ³•æ’å…¥ï¼Œkeyä¸å­˜åœ¨ç›´æ¥æŠ›å¼‚å¸¸&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;comment&quot;&gt;//éå†æ— åº&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	unordered_map&amp;lt;&lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;int&lt;/span&gt;&amp;gt;::iterator uit = um.&lt;span class=&quot;built_in&quot;&gt;begin&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (uit != um.&lt;span class=&quot;built_in&quot;&gt;end&lt;/span&gt;())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		cout &amp;lt;&amp;lt; uit-&amp;gt;first &amp;lt;&amp;lt; &lt;span class=&quot;string&quot;&gt;&amp;quot;--&amp;gt;&amp;quot;&lt;/span&gt; &amp;lt;&amp;lt; uit-&amp;gt;second &amp;lt;&amp;lt; endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		uit++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  uit = um.&lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;);&lt;span class=&quot;comment&quot;&gt;//findæ‰¾åˆ°è¿”å›æŒ‡å®šä½ç½®è¿­ä»£å™¨ï¼Œæ‰¾ä¸åˆ°åˆ™è¿”å›endè¿­ä»£å™¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	cout &amp;lt;&amp;lt; um.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;100&lt;/span&gt;) &amp;lt;&amp;lt; endl;&lt;span class=&quot;comment&quot;&gt;//countè¿”å›å…ƒç´ ä¸ªæ•°ï¼Œ1æˆ–0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	cout &amp;lt;&amp;lt; uit-&amp;gt;first &amp;lt;&amp;lt; &lt;span class=&quot;string&quot;&gt;&amp;quot;--&amp;gt;&amp;quot;&lt;/span&gt; &amp;lt;&amp;lt; uit-&amp;gt;second &amp;lt;&amp;lt; endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	uit = um.&lt;span class=&quot;built_in&quot;&gt;find&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	cout &amp;lt;&amp;lt; um.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;) &amp;lt;&amp;lt; endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	cout &amp;lt;&amp;lt; (uit == um.&lt;span class=&quot;built_in&quot;&gt;end&lt;/span&gt;()) &amp;lt;&amp;lt; endl;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>mapå’Œsetçš„æ¨¡æ‹Ÿå®ç°</title>
    <link href="http://zhaozhuolin.com/2020/07/20200717.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200717.html</id>
    <published>2020-07-17T14:40:10.000Z</published>
    <updated>2023-05-07T11:18:08.082Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ”¹é€ çº¢é»‘æ ‘"><a href="#æ”¹é€ çº¢é»‘æ ‘" class="headerlink" title="æ”¹é€ çº¢é»‘æ ‘"></a>æ”¹é€ çº¢é»‘æ ‘</h1><p>å…³è”å¼å®¹å™¨å­˜å‚¨çš„æ˜¯Kï¼Œ Vé”®å€¼å¯¹ï¼Œæ•…åœ¨æ”¹é€ çº¢é»‘æ ‘æ—¶ï¼ŒKä¸ºkeyç±»å‹ï¼Œå¯¹äºVæ¥è¯´ï¼Œå¦‚æœæ˜¯setï¼Œåˆ™å…¶ä¸ºKç±»å‹ï¼Œå¦‚æœæ˜¯mapåˆ™ä¸º</p><p><code>pair&lt;K, V&gt;</code>ï¼Œç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªä»¿å‡½æ•°ç±»KeyOfValueæ¥å…¼å®¹mapä¸setçš„å¤§å°æ¯”è¾ƒï¼Œå…¶è¿­ä»£å™¨ä¹Ÿéœ€è¦å°è£…æŒ‡é’ˆä¸ºä¸€ä¸ªç±»ï¼Œè¿­ä»£å™¨çš„è‡ªåŠ è‡ªå‡ç›¸å½“äºçº¢é»‘æ ‘çš„ä¸­åºéå†</p><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">RBTIterator</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">typedef</span> RBNode&lt;V&gt; Node;</span><br><span class="line"><span class="keyword">typedef</span> RBTIterator&lt;V&gt; Self;</span><br><span class="line"><span class="built_in">RBTIterator</span>(Node* node);</span><br><span class="line">  </span><br><span class="line">V&amp; <span class="keyword">operator</span>*();</span><br><span class="line"></span><br><span class="line">V* <span class="keyword">operator</span>-&gt;();</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>!=(<span class="type">const</span> Self&amp; it);</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>==(<span class="type">const</span> Self&amp; it);</span><br><span class="line"></span><br><span class="line">Self&amp; <span class="keyword">operator</span>++();</span><br><span class="line"></span><br><span class="line">Self <span class="keyword">operator</span>++(<span class="type">int</span>);</span><br><span class="line"></span><br><span class="line">Self&amp; <span class="keyword">operator</span>--();</span><br><span class="line"></span><br><span class="line">Self <span class="keyword">operator</span>--(<span class="type">int</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">sub</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line">Node* _node;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>, <span class="keyword">class</span> <span class="title class_">KeyOfValue</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RBTree</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> RBNode&lt;V&gt; Node;</span><br><span class="line"><span class="keyword">typedef</span> RBTIterator&lt;V&gt; iterator;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">RBTree</span>();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> V&amp; val)</span></span>;</span><br><span class="line">  </span><br><span class="line"><span class="function">iterator <span class="title">Find</span><span class="params">(<span class="type">const</span> K&amp; data)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">Node* <span class="title">leftMost</span><span class="params">()</span></span>;</span><br><span class="line">  </span><br><span class="line"><span class="function">Node* <span class="title">rightMost</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateL</span><span class="params">(Node* parent)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateR</span><span class="params">(Node* parent)</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Node* _header;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="mapå’Œsetçš„å®ç°"><a href="#mapå’Œsetçš„å®ç°" class="headerlink" title="mapå’Œsetçš„å®ç°"></a>mapå’Œsetçš„å®ç°</h1><p>é€šè¿‡å°è£…çº¢é»‘æ ‘ç±»ï¼Œä¼ å…¥ä»¿å‡½æ•°ç±»å’Œå…·ä½“ç±»å‹ï¼Œä¿®æ”¹ç­‰æ“ä½œè°ƒç”¨çº¢é»‘æ ‘çš„æ¥å£ï¼Œéå†æ“ä½œé€šè¿‡è¿­ä»£å™¨å®Œæˆ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Map</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">MapKeyOfValue</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K&amp; <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt;&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> value.first;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> RBTree&lt;K, pair&lt;K, V&gt;, MapKeyOfValue&gt;::iterator iterator;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt-&gt;<span class="built_in">empty</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt;&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">insert</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">V&amp; <span class="keyword">operator</span>[](<span class="type">const</span> K&amp; key)</span><br><span class="line">&#123;</span><br><span class="line">pair&lt;iterator, <span class="type">bool</span>&gt; ret = _rbt.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(key, <span class="built_in">V</span>()));</span><br><span class="line"><span class="keyword">return</span> ret.first-&gt;second;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">Find</span>(<span class="built_in">pair</span>&lt;K, V&gt;(key, <span class="built_in">V</span>()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">RBTree&lt;K, pair&lt;K, V&gt;, MapKeyOfValue&gt; _rbt;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Set</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SetKeyOfValue</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="function"><span class="type">const</span> K&amp; <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> key;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">typename</span> RBTree&lt;K, K, SetKeyOfValue&gt;::iterator iterator;</span><br><span class="line"><span class="function">iterator <span class="title">begin</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">begin</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">end</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">empty</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">empty</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">iterator <span class="title">find</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">Find</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">size_t</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pair&lt;iterator, <span class="type">bool</span>&gt; <span class="title">insert</span><span class="params">(<span class="type">const</span> K&amp; key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> _rbt.<span class="built_in">insert</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line">RBTree&lt;K, K, SetKeyOfValue&gt; _rbt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="GitHubé“¾æ¥"><a href="#GitHubé“¾æ¥" class="headerlink" title="GitHubé“¾æ¥"></a>GitHubé“¾æ¥</h1><p><a href="https://github.com/Latsummer/FinishedProducts/tree/master/map%E5%92%8Cset%E5%AE%9E%E7%8E%B0">mapå’Œsetçš„å®ç°-GitHub</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;æ”¹é€ çº¢é»‘æ ‘&quot;&gt;&lt;a href=&quot;#æ”¹é€ çº¢é»‘æ ‘&quot; class=&quot;headerlink&quot; title=&quot;æ”¹é€ çº¢é»‘æ ‘&quot;&gt;&lt;/a&gt;æ”¹é€ çº¢é»‘æ ‘&lt;/h1&gt;&lt;p&gt;å…³è”å¼å®¹å™¨å­˜å‚¨çš„æ˜¯Kï¼Œ Vé”®å€¼å¯¹ï¼Œæ•…åœ¨æ”¹é€ çº¢é»‘æ ‘æ—¶ï¼ŒKä¸ºkeyç±»å‹ï¼Œå¯¹äºVæ¥è¯´ï¼Œå¦‚æœæ˜¯setï¼Œåˆ™å…¶ä¸ºKç±»å‹ï¼Œå¦‚æœæ˜¯mapåˆ™ä¸º&lt;/p&gt;
&lt;p&gt;&lt;code&gt;pair&amp;lt;K, V&amp;gt;&lt;/code&gt;ï¼Œç±»å‹ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªä»¿å‡½æ•°ç±»KeyOfValueæ¥å…¼å®¹mapä¸setçš„å¤§å°æ¯”è¾ƒï¼Œå…¶è¿­ä»£å™¨ä¹Ÿéœ€è¦å°è£…æŒ‡é’ˆä¸ºä¸€ä¸ªç±»ï¼Œè¿­ä»£å™¨çš„è‡ªåŠ è‡ªå‡ç›¸å½“äºçº¢é»‘æ ‘çš„ä¸­åºéå†&lt;/p&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>ä»AVLæ ‘åˆ°çº¢é»‘æ ‘(çš„æ’å…¥)</title>
    <link href="http://zhaozhuolin.com/2020/07/20200713.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200713.html</id>
    <published>2020-07-13T10:01:11.000Z</published>
    <updated>2023-05-07T11:26:04.383Z</updated>
    
    <content type="html"><![CDATA[<h1 id="AVLæ ‘"><a href="#AVLæ ‘" class="headerlink" title="AVLæ ‘"></a>AVLæ ‘</h1><ul><li>å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘</li><li>å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼ˆ-1&#x2F;0&#x2F;1ï¼‰ï¼ˆä¸€èˆ¬ï¼šå³å­æ ‘é«˜åº¦ - å·¦å­æ ‘é«˜åº¦ï¼‰</li><li>å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ ‘é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªèŠ‚ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨O(log<sub>2</sub>N)ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O(log<sub>2</sub>N)</li></ul><span id="more"></span><h2 id="èŠ‚ç‚¹ç»“æ„"><a href="#èŠ‚ç‚¹ç»“æ„" class="headerlink" title="èŠ‚ç‚¹ç»“æ„"></a>èŠ‚ç‚¹ç»“æ„</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">AVLNode</span></span><br><span class="line">&#123;</span><br><span class="line">T _value;</span><br><span class="line"><span class="type">int</span> _bf;<span class="comment">//å¹³è¡¡å› å­</span></span><br><span class="line">AVLNode&lt;T&gt;* _left;</span><br><span class="line">AVLNode&lt;T&gt;* _right;</span><br><span class="line">AVLNode&lt;T&gt;* _parent;</span><br><span class="line"></span><br><span class="line"><span class="built_in">AVLNode</span>(<span class="type">const</span> T&amp; val = <span class="built_in">T</span>())</span><br><span class="line">: _value(val)</span><br><span class="line">, _bf(<span class="number">0</span>)</span><br><span class="line">, _left(<span class="literal">nullptr</span>)</span><br><span class="line">, _right(<span class="literal">nullptr</span>)</span><br><span class="line">, _parent(<span class="literal">nullptr</span>)</span><br><span class="line">&#123; &#125;</span><br><span class="line">&#125;;Â </span><br></pre></td></tr></table></figure><blockquote><p>æ’å…¥èŠ‚ç‚¹åï¼šå¿…é¡»è¦æ›´æ–°å¹³è¡¡å› å­</p><p>å¯èƒ½éœ€è¦æ›´æ–°å¹³è¡¡å› å­çš„èŠ‚ç‚¹ï¼š</p><ol><li>æ–°æ’å…¥èŠ‚ç‚¹ä¸­æ‰€æœ‰è¶³ç¥–å…ˆèŠ‚ç‚¹</li><li>å¦‚æœèŠ‚ç‚¹çš„å­æ ‘é«˜åº¦å‘ç”Ÿå˜åŒ–ï¼Œåˆ™éœ€è¦æ›´æ–°</li></ol></blockquote><h2 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><ol><li><p>äºŒå‰æœç´¢æ ‘çš„æ’å…¥</p></li><li><p>ä»æ–°æ’å…¥çš„èŠ‚ç‚¹å¯¹åº”çš„çˆ¶èŠ‚ç‚¹ä½ç½®å¼€å§‹æ›´æ–°å¹³è¡¡å› å­</p></li><li><p>åœ¨ç¬¬äºŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼Œå¹³è¡¡å› å­æ›´æ–°ä¹‹åï¼š</p><ol><li><p>å¹³è¡¡å› å­ï¼š0â€”&gt; åœæ­¢æ›´æ–°</p></li><li><p>å¹³è¡¡å› å­ï¼š-1&#x2F;1    â€”&gt;    ç»§ç»­å‘ä¸Šæ›´æ–°</p></li><li><p>å¹³è¡¡å› å­ï¼š-2&#x2F;2    â€”&gt;    æ—‹è½¬</p><ol><li><p>å•æ—‹ï¼š</p><ol><li><p>å·¦å•æ—‹ï¼šå³è¾¹çš„å³è¾¹é«˜ï¼Œ<code>parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == 1</code></p><p> ä¿®æ”¹é“¾æ¥ï¼šparentã€subRLã€subR</p><p> â€‹parent-&gt;_right : subRLã€subR-&gt;left : parent</p><p> æ›´æ–°å¹³è¡¡å› å­ï¼šparentã€subRï¼š0</p></li><li><p>å³å•æ—‹ï¼šå·¦è¾¹çš„å·¦è¾¹é«˜ï¼Œ<code>parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == -1</code></p><p> ä¿®æ”¹é“¾æ¥ï¼šsubLã€subLRã€parent</p><p> â€‹parent-&gt;left : subLRã€subL-&gt;right : parent</p><p> æ›´æ–°å¹³è¡¡å› å­ï¼šparentã€subLï¼š0</p></li></ol></li><li><p>åŒæ—‹ï¼š</p><ol><li><p>å·¦å³åŒæ—‹ï¼šå·¦è¾¹çš„å³è¾¹é«˜ï¼Œ<code>parent-&gt;_bf == -2 &amp;&amp; cur-&gt;_bf == 1</code></p><p> ä¿®æ”¹é“¾æ¥ï¼šsubLã€subLRã€parent</p><p> â€‹å·¦æ—‹ï¼šä»¥subLä¸ºè½´</p><p> â€‹å³æ—‹ï¼šä»¥parentä¸ºè½´</p><p> é‡æ–°æ›´æ–°å¹³è¡¡å› å­ï¼š</p><p> if(subLR-&gt;bf &#x3D;&#x3D; -1)</p><p> â€‹subL-&gt;bf &#x3D; 0, parent-&gt;bf &#x3D; 1;</p><p> else if(subLR-&gt;bf &#x3D;&#x3D; 1)</p><p> â€‹subL-&gt;bf &#x3D; -1, parent-&gt;bf &#x3D; 0;</p></li><li><p>å³å·¦åŒæ—‹å³è¾¹çš„å·¦è¾¹é«˜ï¼Œ<code>parent-&gt;_bf == 2 &amp;&amp; cur-&gt;_bf == -1</code></p><p> ä¿®æ”¹é“¾æ¥ï¼šparentã€subRLã€subR</p><p> â€‹å³æ—‹ï¼šä»¥subRä¸ºè½´</p><p> â€‹å·¦æ—‹ï¼šä»¥parentä¸ºè½´</p><p> â€‹é‡æ–°æ›´æ–°å¹³è¡¡å› å­ï¼š</p><p> â€‹if(subRL-&gt;bf &#x3D;&#x3D; 1)</p><p> â€‹parent-&gt;bf &#x3D; -1, subR-&gt;bf &#x3D; 0;</p><p> else if(subRL-&gt;bf &#x3D;&#x3D; -1)</p><p> â€‹parent-&gt;bf &#x3D; 0, subR-&gt;bf &#x3D; 1;</p></li></ol></li></ol></li></ol></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> T&amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (_root == <span class="literal">nullptr</span>)</span><br><span class="line">&#123;</span><br><span class="line">_root = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">Node* cur = _root;</span><br><span class="line">Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">while</span> (cur)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//æ’å…¥</span></span><br><span class="line">parent = cur;</span><br><span class="line"><span class="keyword">if</span> (cur-&gt;_value == val) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_value &lt; val) &#123;</span><br><span class="line">cur = cur-&gt;_right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cur = cur-&gt;_left;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cur = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_value &lt; val) &#123;</span><br><span class="line">parent-&gt;_right = cur;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">parent-&gt;_left = cur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cur-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›´æ–° + è°ƒæ•´</span></span><br><span class="line"><span class="keyword">while</span> (parent)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//1.æ›´æ–°parentå¹³è¡¡å› å­</span></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_left == cur)</span><br><span class="line">parent-&gt;_bf--;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">parent-&gt;_bf++;</span><br><span class="line"><span class="comment">//2.åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­æ›´æ–°</span></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_bf == <span class="number">0</span>) &#123;<span class="comment">//è¢«è¡¥é½äº†ï¼Œparentçš„çˆ¶èŠ‚ç‚¹å·¦å³å­æ ‘é«˜åº¦æœªå‘ç”Ÿå˜åŒ–</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-1</span> || parent-&gt;_bf == <span class="number">1</span>) &#123;</span><br><span class="line">cur = parent;</span><br><span class="line">parent = parent-&gt;_parent;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-2</span> || parent-&gt;_bf == <span class="number">2</span>) &#123;</span><br><span class="line"><span class="comment">//è°ƒæ•´</span></span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-2</span> &amp;&amp; cur-&gt;_bf == <span class="number">-1</span>) &#123;</span><br><span class="line"><span class="comment">//å·¦è¾¹çš„å·¦è¾¹é«˜ï¼Œå³æ—‹</span></span><br><span class="line"><span class="built_in">RotateR</span>(parent);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">2</span> &amp;&amp; cur-&gt;_bf == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">//å³è¾¹çš„å³è¾¹é«˜ï¼Œå·¦æ—‹</span></span><br><span class="line"><span class="built_in">RotateL</span>(parent);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">2</span> &amp;&amp; cur-&gt;_bf == <span class="number">-1</span>) &#123;</span><br><span class="line"><span class="comment">//å³è¾¹çš„å·¦è¾¹é«˜ï¼Œå³å·¦åŒæ—‹</span></span><br><span class="line">          Node* subR = parent-&gt;_right;</span><br><span class="line">          Node* subRl = subR-&gt;_left;</span><br><span class="line">          <span class="type">int</span> bf = subRL-&gt;_bf;</span><br><span class="line">          </span><br><span class="line"><span class="built_in">RotateR</span>(cur);</span><br><span class="line"><span class="built_in">RotateL</span>(parent);</span><br><span class="line">          </span><br><span class="line">          <span class="comment">//è°ƒæ•´å¹³è¡¡å› å­</span></span><br><span class="line">          <span class="keyword">if</span>(bf == <span class="number">1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">//subRLå³å­æ ‘é«˜</span></span><br><span class="line">            subR-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">            parent-&gt;_bf = <span class="number">-1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span> <span class="keyword">if</span>(bf == <span class="number">-1</span>)</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="comment">//subRLå·¦å­æ ‘é«˜</span></span><br><span class="line">            parent-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">            subR-&gt;_bf = <span class="number">1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (parent-&gt;_bf == <span class="number">-2</span> &amp;&amp; cur-&gt;_bf == <span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">//å·¦è¾¹çš„å³è¾¹é«˜,å·¦å³åŒæ—‹</span></span><br><span class="line"><span class="built_in">RotateL</span>(cur);</span><br><span class="line"><span class="built_in">RotateR</span>(parent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å·¦æ—‹"><a href="#å·¦æ—‹" class="headerlink" title="å·¦æ—‹"></a>å·¦æ—‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateL</span><span class="params">(Node* parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node* subR = parent-&gt;_right;</span><br><span class="line">Node* subRL = subR-&gt;_left;</span><br><span class="line"></span><br><span class="line">subR-&gt;_left = parent;</span><br><span class="line">parent-&gt;_right = subRL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (subRL)</span><br><span class="line">subRL-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (parent == _root)</span><br><span class="line">&#123;</span><br><span class="line">_root = subR;</span><br><span class="line">subR-&gt;_parent = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">Node* g = parent-&gt;_parent;</span><br><span class="line">subR-&gt;_parent = g;</span><br><span class="line"><span class="keyword">if</span> (g-&gt;_left == parent)</span><br><span class="line">g-&gt;_left = subR;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">g-&gt;_right = subR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">parent-&gt;_parent = subR;</span><br><span class="line">parent-&gt;_bf = subR-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å³æ—‹"><a href="#å³æ—‹" class="headerlink" title="å³æ—‹"></a>å³æ—‹</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">RotateR</span><span class="params">(Node* parent)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Node* subL = parent-&gt;_left;</span><br><span class="line">Node* subLR = subL-&gt;_right;</span><br><span class="line"></span><br><span class="line">subL-&gt;_right = parent;</span><br><span class="line">parent-&gt;_left = subLR;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (subLR)</span><br><span class="line">subLR-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (parent == _root)</span><br><span class="line">&#123;</span><br><span class="line">_root = subL;</span><br><span class="line">subL-&gt;_parent = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">Node* g = parent-&gt;_parent;</span><br><span class="line">subL-&gt;_parent = g;</span><br><span class="line"><span class="keyword">if</span> (g-&gt;_left == parent)</span><br><span class="line">g-&gt;_left = subL;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">g-&gt;_right = subL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">parent-&gt;_parent = subL;</span><br><span class="line">parent-&gt;_bf = subL-&gt;_bf = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h1><ol><li>æ¯ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²</li><li>æ ¹ç»“ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„ä¸¤ä¸ªå­©å­èŠ‚ç‚¹æ˜¯é»‘è‰²çš„</li><li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹åˆ°å…¶æ‰€æœ‰åä»£å¶å­èŠ‚ç‚¹çš„ç®€å•è·¯å¾„ä¸Šï¼Œå‡åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼ˆç©ºèŠ‚ç‚¹ä¹Ÿå¯ï¼‰</li></ol><blockquote><p>æ ¹æ˜¯é»‘è‰²çš„</p><p>çº¢è‰²ä¸èƒ½è¿ç»­ï¼Œé»‘è‰²å¯ä»¥è¿ç»­</p><p>æ¯æ¡è·¯å¾„ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹ä¸ªæ•°ç›¸åŒ</p><p>æœ€é•¿è·¯å¾„æ˜¯æœ€çŸ­è·¯å¾„çš„ä¸¤å€ï¼ˆæœ€çŸ­ï¼šå…¨é»‘ï¼›æœ€é•¿ï¼šçº¢é»‘ç›¸é—´ï¼‰</p></blockquote><p><a href="https://github.com/Latsummer/FinishedProducts/tree/master/RBTree">ä¸€ä¸ªçº¢é»‘æ ‘çš„ç®€å•å®ç° - GitHub</a></p><h2 id="èŠ‚ç‚¹ç»“æ„-1"><a href="#èŠ‚ç‚¹ç»“æ„-1" class="headerlink" title="èŠ‚ç‚¹ç»“æ„"></a>èŠ‚ç‚¹ç»“æ„</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span></span><br><span class="line">&#123;</span><br><span class="line">BLACK,</span><br><span class="line">RED</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">K</span>, <span class="keyword">class</span> <span class="title class_">V</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">RBNode</span></span><br><span class="line">&#123;</span><br><span class="line">pair&lt;K, V&gt; _value;</span><br><span class="line">Color _color;</span><br><span class="line">RBNode&lt;K, V&gt; _parent;</span><br><span class="line">RBNode&lt;K, V&gt; _left;</span><br><span class="line">RBNode&lt;K, V&gt; _right;</span><br><span class="line"></span><br><span class="line"><span class="built_in">RBNode</span>(<span class="type">const</span> pair&lt;K, V&gt;&amp; value = <span class="built_in">pair</span>&lt;K, V&gt;())</span><br><span class="line">: _value(value)</span><br><span class="line">, _color(RED)</span><br><span class="line">, _parent(<span class="literal">nullptr</span>)</span><br><span class="line">, _left(<span class="literal">nullptr</span>)</span><br><span class="line">, _right(<span class="literal">nullptr</span>)</span><br><span class="line">&#123; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æ’å…¥-1"><a href="#æ’å…¥-1" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><p>ä¸èƒ½æ”¹å˜å½“å‰ç»“æ„ä¸­çš„é»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œé™¤äº†ç¥–çˆ¶èŠ‚ç‚¹ä¸ºæ ¹èŠ‚ç‚¹çš„æƒ…å†µ</p><ul><li>gï¼šç¥–çˆ¶</li><li>pï¼šçˆ¶äº²</li><li>uï¼šå”å”</li><li>curï¼šæ’å…¥èŠ‚ç‚¹</li></ul><ol><li>æœç´¢æ ‘çš„æ’å…¥</li><li>åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´ï¼šçº¢è‰²è¿ç»­</li></ol><ul><li>curåœ¨på·¦è¾¹ï¼Œå”å”å­˜åœ¨ä¸”ä¸ºçº¢è‰²ï¼Œå°†pã€uç½®ä¸ºé»‘è‰²ï¼Œgä¸ºçº¢è‰²</li></ul><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ggnzzrztvuj31bo0toaak.jpg" alt="IMG_7063"><ul><li>curåœ¨på·¦è¾¹ï¼Œå”å”ä¸å­˜åœ¨ï¼Œä»¥gä¸ºè½´å¿ƒè¿›è¡Œå³æ—‹ï¼Œå°†gå˜çº¢ï¼Œå°†på˜é»‘</li></ul><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ggo07rykj1j31bo0to3z1.jpg" alt="IMG_7064"></p><ul><li>curåœ¨på·¦è¾¹å”å”ä¸ºé»‘è‰²ï¼Œä»¥gä¸ºè½´å¿ƒè¿›è¡Œå³æ—‹ï¼Œå°†gå˜çº¢ï¼Œå°†på˜é»‘</li></ul><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ggo0c2ek0zj31bo0to0vf.jpg" alt="IMG_7065"></p><ul><li>curåœ¨på³è¾¹ï¼Œå…ˆä»¥pä¸ºè½´å¿ƒå·¦æ—‹ï¼Œäº¤æ¢pä¸curæŒ‡é’ˆï¼ŒæŒ‰ç…§æƒ…å†µä¸‰å¤„ç†</li></ul><p><img src="https://tva1.sinaimg.cn/large/007S8ZIlly1ggo0qurg82j31bo0tot9k.jpg" alt="IMG_7066"></p><ul><li><strong>påœ¨gå³è¾¹ï¼Œåˆ™æ“ä½œå®Œå…¨ç›¸å</strong></li></ul><p>ä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­æ—‹è½¬éƒ¨åˆ†ä»£ç ä¸AVLæ ‘ç›¸åŒï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> pair&lt;K, V&gt;&amp; val)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (_header-&gt;_parent == <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">   <span class="comment">//ç©ºæ ‘</span></span><br><span class="line">   Node* root = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line">   root-&gt;_color = BLACK;<span class="comment">//æ ¹ä¸ºé»‘è‰²</span></span><br><span class="line"></span><br><span class="line">   _header-&gt;_parent = root;</span><br><span class="line">   root-&gt;_parent = _header;</span><br><span class="line"></span><br><span class="line">   _header-&gt;_left = root;</span><br><span class="line">   _header-&gt;_right = root;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//éç©ºæ ‘</span></span><br><span class="line">  Node* cur = _header-&gt;_parent;</span><br><span class="line">  Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line">  <span class="keyword">while</span> (cur)</span><br><span class="line">  &#123;</span><br><span class="line">   parent = cur;</span><br><span class="line">   <span class="keyword">if</span> (cur-&gt;_value.first == val.first)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">   <span class="keyword">if</span> (cur-&gt;_value.first &lt; val.first)</span><br><span class="line">    cur = cur-&gt;_right;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">    cur = cur-&gt;_left;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  cur = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line">  <span class="keyword">if</span> (parent-&gt;_value.first &lt; val.first)</span><br><span class="line">   parent-&gt;_right = cur;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">   parent-&gt;_left = cur;</span><br><span class="line"></span><br><span class="line">  cur-&gt;_parent = parent;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//è°ƒæ•´:ä¿®æ”¹é¢œè‰²ï¼Œæ—‹è½¬</span></span><br><span class="line">  <span class="keyword">while</span> (cur != _header-&gt;_parent &amp;&amp; cur-&gt;_parent-&gt;_color == RED)</span><br><span class="line">  &#123;</span><br><span class="line">   Node* p = cur-&gt;_parent;</span><br><span class="line">   Node* g = p-&gt;_parent;</span><br><span class="line">   <span class="keyword">if</span> (g-&gt;_left == p)</span><br><span class="line">   &#123;</span><br><span class="line">    Node* u = g-&gt;_right;</span><br><span class="line">    <span class="keyword">if</span> (u &amp;&amp; u-&gt;_color == RED)</span><br><span class="line">    &#123;</span><br><span class="line">     u-&gt;_color = p-&gt;_color = BLACK;</span><br><span class="line">     g-&gt;_color = RED;</span><br><span class="line"></span><br><span class="line">     cur = g;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">     <span class="comment">//ubä¸å­˜åœ¨æˆ–uå­˜åœ¨ä¸”ä¸ºé»‘è‰²</span></span><br><span class="line">     <span class="keyword">if</span> (cur == p-&gt;_right)</span><br><span class="line">     &#123;</span><br><span class="line">      <span class="built_in">RotateL</span>(p);</span><br><span class="line">      <span class="built_in">swap</span>(cur, p);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="comment">//curåœ¨på·¦è¾¹,å³æ—‹+ä¿®æ”¹é¢œè‰²</span></span><br><span class="line">     <span class="built_in">RotateR</span>(g);</span><br><span class="line">     p-&gt;_color = BLACK;</span><br><span class="line">     g-&gt;_color = RED;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span><span class="comment">//påœ¨gå³è¾¹</span></span><br><span class="line">   &#123;</span><br><span class="line">    Node* u = g-&gt;_left;</span><br><span class="line">    <span class="keyword">if</span> (u &amp;&amp; u-&gt;_color == RED)</span><br><span class="line">    &#123;</span><br><span class="line">     u-&gt;_color = p-&gt;_color = BLACK;</span><br><span class="line">     g-&gt;_color = RED;</span><br><span class="line">     cur = g;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">     <span class="keyword">if</span> (cur == p-&gt;_left)</span><br><span class="line">     &#123;</span><br><span class="line">      <span class="built_in">RotateR</span>(p);</span><br><span class="line">      <span class="built_in">swap</span>(cur, p);</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">RotateL</span>(g);</span><br><span class="line">     g-&gt;_color = RED;</span><br><span class="line">     p-&gt;_color = BLACK;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//å°†æ ¹ç½®ä¸ºé»‘</span></span><br><span class="line">  _header-&gt;_parent-&gt;_color = BLACK;</span><br><span class="line">  <span class="comment">//æ›´æ–°å¤´çš„å·¦å³æŒ‡é’ˆ</span></span><br><span class="line">  _header-&gt;_left = <span class="built_in">leftMost</span>();</span><br><span class="line">  _header-&gt;_right = <span class="built_in">rightMost</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;AVLæ ‘&quot;&gt;&lt;a href=&quot;#AVLæ ‘&quot; class=&quot;headerlink&quot; title=&quot;AVLæ ‘&quot;&gt;&lt;/a&gt;AVLæ ‘&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;å·¦å³å­æ ‘éƒ½æ˜¯AVLæ ‘&lt;/li&gt;
&lt;li&gt;å·¦å³å­æ ‘é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼ˆ-1&amp;#x2F;0&amp;#x2F;1ï¼‰ï¼ˆä¸€èˆ¬ï¼šå³å­æ ‘é«˜åº¦ - å·¦å­æ ‘é«˜åº¦ï¼‰&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘æ ‘é«˜åº¦å¹³è¡¡çš„ï¼Œå®ƒå°±æ˜¯AVLæ ‘ã€‚å¦‚æœå®ƒæœ‰nä¸ªèŠ‚ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨O(log&lt;sub&gt;2&lt;/sub&gt;N)ï¼Œæœç´¢æ—¶é—´å¤æ‚åº¦O(log&lt;sub&gt;2&lt;/sub&gt;N)&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>setä¸mapçš„åŸºæœ¬ä½¿ç”¨åŠç‰¹æ€§</title>
    <link href="http://zhaozhuolin.com/2020/07/20200712.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200712.html</id>
    <published>2020-07-12T09:08:00.000Z</published>
    <updated>2023-05-07T11:18:08.083Z</updated>
    
    <content type="html"><![CDATA[<h1 id="set"><a href="#set" class="headerlink" title="set"></a>set</h1><ol><li>å®ç°â€”&gt;ç›®å‰ä½¿ç”¨æœç´¢æ ‘å®ç°ï¼ˆçº¢é»‘æ ‘ï¼‰</li><li>åº•å±‚æ˜¯ä¸€ä¸ªå­˜æ”¾KVç»“æ„çš„æœç´¢æ ‘ï¼Œä½†æ˜¯æ­¤å¤„Kã€Vç›¸åŒ</li><li>setä¸­åªéœ€è¦å­˜æ”¾value</li><li>setä¸­ä¸èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ </li><li>setä¸­çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ï¼Œä¸æ”¯æŒä¿®æ”¹çš„æ“ä½œ</li><li><strong>seté»˜è®¤æ¯”è¾ƒæ˜¯å°äº</strong>ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ä»¿å‡½æ•°ï¼Œä¿®æ”¹æ¯”è¾ƒé€»è¾‘</li><li>è¿­ä»£å™¨éå†æœ‰åºï¼šåº•å±‚é¡ºåºæ˜¯äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†</li><li>è¿­ä»£å™¨åªèƒ½è¯»å–å†…å®¹ï¼Œä¸èƒ½ä¿®æ”¹å†…å®¹</li><li>æ’å…¥ï¼šå¦‚æœç”¨è¿­ä»£å™¨æŒ‡å®šæ’å…¥ä½ç½®ï¼Œæœ€ç»ˆå®é™…çš„æ’å…¥ä½ç½®å¯èƒ½ä¸æ˜¯æŒ‡å®šçš„ä½ç½®ï¼Œæ­¤å¤„çš„ä½ç½®åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œæ–°çš„å…ƒç´ çš„æ’å…¥ä½ç½®å¿…é¡»ç¬¦åˆæœç´¢æ ‘çš„æ€§è´¨</li><li>åˆ é™¤ä¼šå¯¼è‡´å½“å‰åˆ é™¤ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œä½†æ˜¯ä¸å½±å“å…¶ä»–ä½ç½®çš„è¿­ä»£å™¨</li><li>findï¼šæ‰¾åˆ°è¿”å›å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæœªæ‰¾åˆ°è¿”å›endè¿­ä»£å™¨</li><li>countï¼šè·å–æŒ‡å®šå…ƒç´ åœ¨setä¸­çš„ä¸ªæ•°ï¼Œæ ¹æ®æ€§è´¨4ï¼Œåªç”¨ä¸¤ä¸ªå€¼ï¼Œ1æˆ–0</li></ol><span id="more"></span><h2 id="åŸºæœ¬ä½¿ç”¨ä¸éå†"><a href="#åŸºæœ¬ä½¿ç”¨ä¸éå†" class="headerlink" title="åŸºæœ¬ä½¿ç”¨ä¸éå†"></a>åŸºæœ¬ä½¿ç”¨ä¸éå†</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="type">int</span>&gt; s;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">11</span> &#125;;</span><br><span class="line"><span class="function">set&lt;<span class="type">int</span>&gt; <span class="title">s2</span><span class="params">(arr, arr + <span class="number">5</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">set&lt;<span class="type">int</span>&gt; <span class="title">copy</span><span class="params">(s2)</span></span>;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator it = s2.<span class="built_in">begin</span>();</span><br><span class="line"><span class="keyword">while</span> (it != s2.<span class="built_in">end</span>())</span><br><span class="line">&#123;</span><br><span class="line">  cout &lt;&lt; *it &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">  it++;</span><br><span class="line">&#125;<span class="comment">//2,3,8,10,11</span></span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::const_iterator cit = s2.<span class="built_in">cbegin</span>();</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::reverse_iterator rit = s2.<span class="built_in">rbegin</span>();<span class="comment">//11ï¼Œ 10ï¼Œ 8ï¼Œ 3ï¼Œ 2</span></span><br></pre></td></tr></table></figure><p>setå…ƒç´ ä¸èƒ½è¢«ä¿®æ”¹</p><p>éå†æœ‰åºï¼šæœç´¢æ ‘çš„ä¸­åºéå†</p><h2 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">11</span> &#125;;</span><br><span class="line"><span class="function">set&lt;<span class="type">int</span>&gt; <span class="title">s2</span><span class="params">(arr, arr + <span class="number">5</span>)</span></span>;</span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//2,3,8,10,11</span></span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">6</span>);</span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//2,3,6,8,10,11</span></span><br><span class="line">s2.<span class="built_in">insert</span>(s2.<span class="built_in">begin</span>(), <span class="number">15</span>);</span><br><span class="line"><span class="comment">//itreatoråªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œæ–°æ’å…¥çš„å…ƒç´ ä¸ä¸€å®šæ˜¯æŒ‡å®šä½ç½®ï¼Œæœ€ç»ˆæ’å…¥ä½ç½®éœ€è¦éµå¾ªæœç´¢æ ‘çš„æ€§è´¨</span></span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//2,3,6,8,10,11,15</span></span><br><span class="line"><span class="type">int</span> arr2[] = &#123; <span class="number">9</span>, <span class="number">7</span>, <span class="number">20</span>, <span class="number">0</span> &#125;;</span><br><span class="line">s2.<span class="built_in">insert</span>(arr2, arr2 + <span class="number">4</span>);</span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//0,2,3,6,7,8,9,10,11,15,20</span></span><br><span class="line">s2.<span class="built_in">insert</span>(<span class="number">10</span>);</span><br><span class="line"><span class="comment">//setä¸ä¼šæ’å…¥é‡å¤å…ƒç´ </span></span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//0,2,3,6,7,8,9,10,11,15,20</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ é™¤æ—¶å€™ä¼ å…¥çš„ä½ç½®å¿…é¡»æœ‰æ•ˆ</span></span><br><span class="line">s2.<span class="built_in">erase</span>(<span class="number">10</span>);<span class="comment">//åˆ é™¤10</span></span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//0,2,3,6,7,8,9,11,15,20</span></span><br><span class="line">s2.<span class="built_in">erase</span>(s2.<span class="built_in">begin</span>());<span class="comment">//åˆ é™¤æœ€å·¦èŠ‚ç‚¹</span></span><br><span class="line"><span class="built_in">PrntSet</span>(s2);<span class="comment">//2,3,6,7,8,9,10,11,15,20</span></span><br><span class="line"><span class="comment">//s2.erase(s2.end());//endæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œæ­¤æ—¶è¿è¡Œä¼šæŠ¥é”™</span></span><br><span class="line"><span class="comment">//PrntSet(s2);</span></span><br><span class="line">s2.<span class="built_in">erase</span>(s2.<span class="built_in">begin</span>(), s2.<span class="built_in">end</span>());</span><br><span class="line"><span class="built_in">PrntSet</span>(s2);</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ“ä½œä¼šå¯¼è‡´å½“å‰ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œä¸å½±å“å…¶ä»–ä½ç½®</p><h2 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[] = &#123; <span class="number">10</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">11</span> &#125;;</span><br><span class="line"><span class="function">set&lt;<span class="type">int</span>&gt; <span class="title">s2</span><span class="params">(arr, arr + <span class="number">5</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator it = s2.<span class="built_in">find</span>(<span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (it != s2.<span class="built_in">end</span>())</span><br><span class="line">cout &lt;&lt; *it &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;NONE&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator it2 = s2.<span class="built_in">find</span>(<span class="number">100</span>);</span><br><span class="line"><span class="keyword">if</span> (it2 != s2.<span class="built_in">end</span>())</span><br><span class="line">cout &lt;&lt; *it2 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;NONE&quot;</span> &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//countè¿”å›ï¼šå…ƒç´ ä¸ªæ•°ï¼Œå­˜åœ¨è¿”å›1ï¼Œå¦åˆ™0</span></span><br><span class="line">cout &lt;&lt; s2.<span class="built_in">count</span>(<span class="number">11</span>) &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; s2.<span class="built_in">count</span>(<span class="number">100</span>) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h1 id="map"><a href="#map" class="headerlink" title="map"></a>map</h1><ol><li>å®ç°ï¼šé€šè¿‡äºŒå‰æœç´¢æ ‘å®ç°ï¼ˆçº¢é»‘æ ‘ï¼‰</li><li>åº•å±‚ç»“æ„ä¸ºå­˜æ”¾kvé”®å€¼å¯¹çš„æœç´¢æ ‘ï¼Œkå’Œvä¸ä¸€å®šç›¸åŒ</li><li>mapå­˜æ”¾kvé”®å€¼å¯¹ï¼Œå³pairæ•°æ®</li><li>keyä¸èƒ½é‡å¤ï¼Œvalueå¯ä»¥é‡å¤</li><li>keyä¸å…è®¸ä¿®æ”¹ï¼Œvalueå¯ä»¥ä¿®æ”¹</li><li><strong>mapé»˜è®¤æ¯”è¾ƒæ˜¯å°äº</strong>ï¼ŒæŒ‰ç…§keyè¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ä»¿å‡½æ•°ï¼Œä¿®æ”¹æ¯”è¾ƒé€»è¾‘</li><li>è¿­ä»£å™¨éå†é¡ºåºï¼šåº•å±‚é¡ºåºæ˜¯äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ï¼Œä½†æ˜¯æŒ‰ç…§keyçš„ä¸­åºéå†è¿›è¡Œ</li><li>è¿­ä»£å™¨å¯ä»¥ä¿®æ”¹valueï¼Œä¸èƒ½ä¿®æ”¹key</li><li>æ’å…¥ï¼šå¦‚æœç”¨è¿­ä»£å™¨æŒ‡å®šæ’å…¥ä½ç½®ï¼Œæœ€ç»ˆå®é™…çš„æ’å…¥ä½ç½®å¯èƒ½ä¸æ˜¯æŒ‡å®šçš„ä½ç½®ï¼Œæ­¤å¤„çš„ä½ç½®åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œæ–°çš„å…ƒç´ çš„æ’å…¥ä½ç½®å¿…é¡»ç¬¦åˆæœç´¢æ ‘çš„æ€§è´¨</li><li>åˆ é™¤ä¼šå¯¼è‡´å½“å‰åˆ é™¤ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œä½†æ˜¯ä¸å½±å“å…¶ä»–ä½ç½®çš„è¿­ä»£å™¨</li><li>findï¼šæ‰¾åˆ°è¿”å›å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæœªæ‰¾åˆ°è¿”å›endè¿­ä»£å™¨ï¼Œ&#x3D;&#x3D;æŒ‰ç…§keyæŸ¥æ‰¾&#x3D;&#x3D;</li><li>countï¼šè·å–æŒ‡å®šå…ƒç´ åœ¨setä¸­çš„ä¸ªæ•°ï¼Œæ ¹æ®æ€§è´¨4ï¼Œåªç”¨ä¸¤ä¸ªå€¼ï¼Œ1æˆ–0ï¼Œ &#x3D;&#x3D;æŒ‰ç…§keyæŸ¥æ‰¾&#x3D;&#x3D;</li><li>operator[ ]ï¼šå¯è¯»å¯å†™å¯æ’å…¥</li><li>atï¼šå¦‚æœkeyä¸å­˜åœ¨ï¼ŒæŠ›å¼‚å¸¸</li></ol><h2 id="åŸºæœ¬ä½¿ç”¨ä»¥åŠéå†"><a href="#åŸºæœ¬ä½¿ç”¨ä»¥åŠéå†" class="headerlink" title="åŸºæœ¬ä½¿ç”¨ä»¥åŠéå†"></a>åŸºæœ¬ä½¿ç”¨ä»¥åŠéå†</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  map&lt;string, <span class="type">int</span>&gt; m;<span class="comment">//keyï¼šå­—ç¬¦ä¸²ï¼Œvalueï¼šæ•°å€¼</span></span><br><span class="line">  vector&lt;pair&lt;string, <span class="type">int</span>&gt;&gt; vec;</span><br><span class="line">  <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i ++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function">pair&lt;string, <span class="type">int</span>&gt; <span class="title">p</span><span class="params">((string)<span class="string">&quot;abc&quot;</span> + (<span class="type">char</span>)(i + <span class="string">&#x27;0&#x27;</span>), <span class="number">5</span>)</span></span>;</span><br><span class="line">    vec.<span class="built_in">push_back</span>(p);</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="built_in">pair</span>&lt;string, <span class="type">int</span>&gt;((string)<span class="string">&quot;zzl&quot;</span>+ (<span class="type">char</span>)(i + <span class="string">&#x27;0&#x27;</span>), <span class="number">14</span>));</span><br><span class="line">    vec.<span class="built_in">push_back</span>(<span class="built_in">make_pair</span>((string)<span class="string">&quot;xyz&quot;</span>+ (<span class="type">char</span>)(i + <span class="string">&#x27;0&#x27;</span>), <span class="number">3</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function">map&lt;string, <span class="type">int</span>&gt; <span class="title">m2</span><span class="params">(vec.begin(), vec.end())</span></span>;</span><br><span class="line">  <span class="function">map&lt;string, <span class="type">int</span>&gt; <span class="title">copy</span><span class="params">(m2)</span></span>;</span><br><span class="line">  </span><br><span class="line">  cout &lt;&lt; m2.<span class="built_in">size</span>() &lt;&lt; endl;<span class="comment">//30</span></span><br><span class="line">  </span><br><span class="line">  map&lt;string, <span class="type">int</span>&gt;::iterator it = m2.<span class="built_in">begin</span>();</span><br><span class="line">  <span class="keyword">while</span>(it != m2.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">    it++;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  map&lt;string, <span class="type">int</span>&gt;::iterator it = m2.<span class="built_in">begin</span>();</span><br><span class="line">  <span class="keyword">while</span>(it != m2.<span class="built_in">end</span>())</span><br><span class="line">  &#123;</span><br><span class="line">    it-&gt;second = <span class="number">100</span>;<span class="comment">//mapçš„éconstè¿­ä»£å™¨æ”¯æŒä¿®æ”¹valueï¼Œä½†ä¸æ”¯æŒä¿®æ”¹key</span></span><br><span class="line">    it++;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; mm;</span><br><span class="line">  cout &lt;&lt; mm.<span class="built_in">at</span>(<span class="number">2</span>) &lt;&lt; endl;<span class="comment">//keyä¸å­˜åœ¨ï¼ŒæŠ›å¼‚å¸¸</span></span><br><span class="line">  cout &lt;&lt; mm[<span class="number">2</span>] &lt;&lt; endl;<span class="comment">//keyä¸å­˜åœ¨ï¼Œæ’å…¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>mapä¸­keyä¸èƒ½é‡å¤ï¼Œä½†æ˜¯valueå¯ä»¥</li><li>è¿­ä»£å™¨è§£å¼•ç”¨ç±»å‹ï¼špair</li><li>è¿­ä»£å™¨éå†é¡ºåºï¼škeyçš„é€’å¢é¡ºåº</li><li>éconstè¿­ä»£å™¨æ”¯æŒvalueä¿®æ”¹ï¼Œä¸æ”¯æŒkeyä¿®æ”¹</li><li>atï¼škeyä¸å­˜åœ¨ï¼ŒæŠ›å¼‚å¸¸</li><li>operator[]ï¼škeyä¸å­˜åœ¨ï¼Œæ’å…¥</li></ul><h2 id="æ’å…¥-1"><a href="#æ’å…¥-1" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line">pair&lt;map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator, <span class="type">bool</span>&gt; ret = m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">3</span>));<span class="comment">//æ’å…¥æˆåŠŸ</span></span><br><span class="line">cout &lt;&lt; ret.first-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; ret.first-&gt;second &lt;&lt; endl;<span class="comment">//3---&gt;3</span></span><br><span class="line">cout &lt;&lt; ret.second &lt;&lt; endl;<span class="comment">//1</span></span><br><span class="line"></span><br><span class="line">ret = m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">3</span>, <span class="number">10</span>));<span class="comment">//keyé‡å¤ï¼Œæ’å…¥å¤±è´¥</span></span><br><span class="line">cout &lt;&lt; ret.first-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; ret.first-&gt;second &lt;&lt; endl;<span class="comment">//3---&gt;3</span></span><br><span class="line">cout &lt;&lt; ret.second &lt;&lt; endl;<span class="comment">//0</span></span><br></pre></td></tr></table></figure><p><code>pair&lt;iterator, bool&gt;</code>iterator</p><ul><li>mapä¸­kvé”®å€¼å¯¹ å¯¹åº”çš„è¿­ä»£å™¨ï¼Œboolï¼šæ’å…¥æ˜¯å¦æˆåŠŸ</li></ul><p>æ’å…¥æˆåŠŸï¼šiteratorè¡¨ç¤ºæ–°æ’å…¥çš„kvé”®å€¼å¯¹çš„è¿­ä»£å™¨</p><p>æ’å…¥å¤±è´¥ï¼šiteratorè¡¨ç¤ºå·²ç»å­˜åœ¨çš„æŸä¸ªkvé”®å€¼å¯¹çš„è¿­ä»£å™¨</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(<span class="type">int</span>, <span class="type">int</span>) m;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//1---&gt;1</span></span><br><span class="line">m[<span class="number">2</span>] = <span class="number">2</span>;<span class="comment">//2---&gt;2</span></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">3</span>;<span class="comment">//3---&gt;3</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">4</span>;<span class="comment">//4---&gt;4</span></span><br><span class="line"></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">100</span>;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">-1</span>;</span><br></pre></td></tr></table></figure><p><code>value&amp; operator[](key)</code></p><p><code>(*((this-&gt;insert(make_pair(k, mapped_type())).first)).second</code></p><ol><li>åˆ›å»ºä¸€ä¸ªkvé”®å€¼å¯¹ï¼škey value é»˜è®¤å€¼</li><li>æ‰§è¡Œæ’å…¥æ“ä½œï¼Œæ’å…¥ç¬¬ä¸€æ­¥åˆ›å»ºçš„kvé”®å€¼å¯¹</li><li>è·å–æ’å…¥æ¥å£è¿”å›å€¼çš„ç¬¬ä¸€ä¸ªè¿­ä»£å™¨æˆå‘˜<ol><li><code>prir&lt;iterator,bool&gt;.first</code> â€”&gt; iterator â€”&gt; æŒ‡å‘mapä¸­çš„ä¸€ä¸ªé”®å€¼å¯¹</li><li>æ’å…¥æˆåŠŸï¼šè¿”å›æ–°çš„kvé”®å€¼å¯¹çš„è¿­ä»£å™¨</li><li>æ’å…¥å¤±è´¥ï¼šè¿”å›å·²ç»å­˜åœ¨çš„é”®å€¼keyçš„kvé”®å€¼å¯¹çš„è¿­ä»£å™¨</li></ol></li><li>è§£å¼•ç”¨ç¬¬ä¸‰æ­¥æ‹¿åˆ°çš„è¿­ä»£å™¨</li><li>è·å–è¿­ä»£å™¨æŒ‡å‘çš„kvé”®å€¼å¯¹çš„value</li></ol><h2 id="åˆ é™¤-1"><a href="#åˆ é™¤-1" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(<span class="type">int</span>, <span class="type">int</span>) m;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//1---&gt;1</span></span><br><span class="line">m[<span class="number">2</span>] = <span class="number">2</span>;<span class="comment">//2---&gt;2</span></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">3</span>;<span class="comment">//3---&gt;3</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">4</span>;<span class="comment">//4---&gt;4</span></span><br><span class="line"></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">100</span>;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>();</span><br><span class="line">cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">m.<span class="built_in">erase</span>(it);</span><br><span class="line">cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;<span class="comment">//åˆ é™¤ä¼šå¯¼è‡´æŒ‡å‘å½“å‰ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆ</span></span><br></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾-1"><a href="#æŸ¥æ‰¾-1" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(<span class="type">int</span>, <span class="type">int</span>) m;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">1</span>;<span class="comment">//1---&gt;1</span></span><br><span class="line">m[<span class="number">2</span>] = <span class="number">2</span>;<span class="comment">//2---&gt;2</span></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">3</span>;<span class="comment">//3---&gt;3</span></span><br><span class="line">m[<span class="number">4</span>] = <span class="number">4</span>;<span class="comment">//4---&gt;4</span></span><br><span class="line"></span><br><span class="line">m[<span class="number">3</span>] = <span class="number">100</span>;</span><br><span class="line">m[<span class="number">1</span>] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = m.<span class="built_in">begin</span>();</span><br><span class="line">it = m.<span class="built_in">find</span>(<span class="number">3</span>);<span class="comment">//æŒ‰ç…§keyæŸ¥æ‰¾ï¼Œå­˜åœ¨è¿”å›æŒ‡å‘ç›®æ ‡çš„è¿­ä»£å™¨ï¼Œå¦åˆ™è¿”å›endè¿­ä»£å™¨</span></span><br><span class="line">it = m.<span class="built_in">find</span>(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; m.<span class="built_in">count</span>(<span class="number">3</span>) &lt;&lt; endl;<span class="comment">//æŒ‰ç…§keyå€¼æŸ¥æ‰¾ï¼Œå­˜åœ¨è¿”å›1ï¼Œå¦åˆ™è¿”å›0</span></span><br><span class="line">cout &lt;&lt; m.<span class="built_in">count</span>(<span class="number">100</span>) &lt;&lt; endl;</span><br></pre></td></tr></table></figure><h1 id="multisetå’Œmultimap"><a href="#multisetå’Œmultimap" class="headerlink" title="multisetå’Œmultimap"></a>multisetå’Œmultimap</h1><p>ä¸setåŠmapæœ€å¤§çš„åŒºåˆ«æ˜¯å…¶å…ƒç´ å¯ä»¥é‡å¤</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">testSet</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">multiset&lt;<span class="type">int</span>&gt; s;</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">1</span>);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">2</span>);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">9</span>);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">-1</span>);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">18</span>);</span><br><span class="line">s.<span class="built_in">insert</span>(<span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; e : s)</span><br><span class="line">cout &lt;&lt; e &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">cout &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">testMap</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//multimapä¸æä¾›[]æ“ä½œç¬¦é‡è½½ï¼Œatå‡½æ•°</span></span><br><span class="line">multimap&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">10</span>, <span class="number">1</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">0</span>, <span class="number">1</span>));</span><br><span class="line">m.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(<span class="number">1</span>, <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">const</span> <span class="keyword">auto</span>&amp; e : m)</span><br><span class="line">cout &lt;&lt; e.first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; e.second &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pair&lt;multimap&lt;int, int&gt;::iterator, multimap&lt;int, int&gt;::iterator&gt; p = m.equal_range(1);</span></span><br><span class="line"><span class="keyword">auto</span> p = m.<span class="built_in">equal_range</span>(<span class="number">1</span>);</span><br><span class="line">multimap&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator it = p.first;</span><br><span class="line"><span class="keyword">while</span> (it != p.second)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; it-&gt;first &lt;&lt; <span class="string">&quot;---&gt;&quot;</span> &lt;&lt; it-&gt;second &lt;&lt; endl;</span><br><span class="line">it++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;set&quot;&gt;&lt;a href=&quot;#set&quot; class=&quot;headerlink&quot; title=&quot;set&quot;&gt;&lt;/a&gt;set&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;å®ç°â€”&amp;gt;ç›®å‰ä½¿ç”¨æœç´¢æ ‘å®ç°ï¼ˆçº¢é»‘æ ‘ï¼‰&lt;/li&gt;
&lt;li&gt;åº•å±‚æ˜¯ä¸€ä¸ªå­˜æ”¾KVç»“æ„çš„æœç´¢æ ‘ï¼Œä½†æ˜¯æ­¤å¤„Kã€Vç›¸åŒ&lt;/li&gt;
&lt;li&gt;setä¸­åªéœ€è¦å­˜æ”¾value&lt;/li&gt;
&lt;li&gt;setä¸­ä¸èƒ½å­˜æ”¾é‡å¤çš„å…ƒç´ &lt;/li&gt;
&lt;li&gt;setä¸­çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ï¼Œä¸æ”¯æŒä¿®æ”¹çš„æ“ä½œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;seté»˜è®¤æ¯”è¾ƒæ˜¯å°äº&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ä»¿å‡½æ•°ï¼Œä¿®æ”¹æ¯”è¾ƒé€»è¾‘&lt;/li&gt;
&lt;li&gt;è¿­ä»£å™¨éå†æœ‰åºï¼šåº•å±‚é¡ºåºæ˜¯äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†&lt;/li&gt;
&lt;li&gt;è¿­ä»£å™¨åªèƒ½è¯»å–å†…å®¹ï¼Œä¸èƒ½ä¿®æ”¹å†…å®¹&lt;/li&gt;
&lt;li&gt;æ’å…¥ï¼šå¦‚æœç”¨è¿­ä»£å™¨æŒ‡å®šæ’å…¥ä½ç½®ï¼Œæœ€ç»ˆå®é™…çš„æ’å…¥ä½ç½®å¯èƒ½ä¸æ˜¯æŒ‡å®šçš„ä½ç½®ï¼Œæ­¤å¤„çš„ä½ç½®åªæ˜¯ä¸€ä¸ªå»ºè®®ï¼Œæ–°çš„å…ƒç´ çš„æ’å…¥ä½ç½®å¿…é¡»ç¬¦åˆæœç´¢æ ‘çš„æ€§è´¨&lt;/li&gt;
&lt;li&gt;åˆ é™¤ä¼šå¯¼è‡´å½“å‰åˆ é™¤ä½ç½®çš„è¿­ä»£å™¨å¤±æ•ˆï¼Œä½†æ˜¯ä¸å½±å“å…¶ä»–ä½ç½®çš„è¿­ä»£å™¨&lt;/li&gt;
&lt;li&gt;findï¼šæ‰¾åˆ°è¿”å›å…ƒç´ çš„è¿­ä»£å™¨ï¼Œæœªæ‰¾åˆ°è¿”å›endè¿­ä»£å™¨&lt;/li&gt;
&lt;li&gt;countï¼šè·å–æŒ‡å®šå…ƒç´ åœ¨setä¸­çš„ä¸ªæ•°ï¼Œæ ¹æ®æ€§è´¨4ï¼Œåªç”¨ä¸¤ä¸ªå€¼ï¼Œ1æˆ–0&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ä½å›¾ã€å¸ƒéš†è¿‡æ»¤å™¨ä¸å¤§æ•°æ®å¤„ç†</title>
    <link href="http://zhaozhuolin.com/2020/07/20200710.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200710.html</id>
    <published>2020-07-10T01:39:01.000Z</published>
    <updated>2023-05-07T11:18:08.086Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä½å›¾"><a href="#ä½å›¾" class="headerlink" title="ä½å›¾"></a>ä½å›¾</h1><p>æ¯ä¸€ä¸ªæ¯”ç‰¹ä½æ¥è¡¨ç¤ºå½“å‰æ¯”ç‰¹ä½å¯¹åº”çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ä¸º1ï¼Œä¸å­˜åœ¨ä¸º0</p><p>æ•´æ•°æ•°ç»„ï¼š</p><ol><li>æ•´æ•°ä½ç½®ï¼šn&#x2F;32</li><li>æ•´æ•°ä½ç½®ä¸­å…·ä½“çš„bitä½ç½®ï¼šn%32</li></ol><ul><li>å³ç§»ç›¸å½“äºé™¤ï¼Œå³ç§»nä½ &#x3D;&#x3D; æ•°å­—â—2^n^</li></ul><p>ä½å›¾å®ç°ï¼šå“ˆå¸Œè¡¨</p><ol><li>å®ç°ï¼šæ•´æ•°æ•°ç»„</li><li>æ•°æ®å•å…ƒæ˜¯bitä½</li><li>èŠ‚çœç©ºé—´ï¼Œä¸€ä¸ªå­—èŠ‚å¯ä»¥å­˜æ”¾8ä¸ªæ•´æ•°çš„äºŒå€¼ä¿¡æ¯ï¼ˆå­˜åœ¨ä¸å¦ï¼‰ï¼Œä¸å­˜æ”¾æ•°æ®æœ¬èº«</li><li>æ“ä½œæ•ˆç‡é«˜ï¼Œé€šè¿‡å“ˆå¸Œæ˜ å°„è·å–ä½ç½®ï¼Œé€šè¿‡ä½è¿ç®—æ‰§è¡Œæ“ä½œï¼Œ æ—¶é—´æ•ˆç‡O(1)</li><li>ä½ç½®æ˜ å°„ï¼š<ol><li>è·å–æ•´æ•°ä½ç½®ï¼Œn &#x2F; 32</li><li>è·å–æ•´æ•°çš„æ¯”ç‰¹ä½ï¼šn % 32</li></ol></li><li>ä½å›¾éœ€è¦çš„ç©ºé—´å¤§å°å’Œæ•°æ®çš„èŒƒå›´æœ‰å…³ï¼Œå’Œæ•°æ®æœ¬èº«å¤§å°æ²¡æœ‰å…³ç³»</li><li>é€‚åˆçš„åœºæ™¯ï¼šæ•°æ®ä¸é‡å¤ï¼Œä¿¡æ¯ç®€å•</li></ol><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BitMap</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">BitMap</span>(<span class="type">size_t</span> range)</span><br><span class="line">&#123;</span><br><span class="line">_bit.<span class="built_in">resize</span>(range / <span class="number">32</span> + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŸ¥è¯¢: Test</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Test</span><span class="params">(<span class="type">size_t</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//æ•´æ•°ä½ç½®</span></span><br><span class="line"><span class="type">int</span> idx = n &gt;&gt; <span class="number">5</span>;<span class="comment">//ç­‰ä»·äºn/32</span></span><br><span class="line"><span class="type">int</span> bitIdx = n % <span class="number">32</span>;</span><br><span class="line"><span class="comment">//è·å–å¯¹åº”äºŒè¿›åˆ¶å€¼</span></span><br><span class="line"><span class="keyword">if</span> ((_bit[idx] &gt;&gt; bitIdx) &amp; <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å­˜å‚¨: Set</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Set</span><span class="params">(<span class="type">size_t</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> idx = n / <span class="number">32</span>;</span><br><span class="line"><span class="type">int</span> bitIdx = n % <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line">_bit[idx] |= (<span class="number">1</span> &lt;&lt; bitIdx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ é™¤: Reset</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Reset</span><span class="params">(<span class="type">size_t</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> idx = n &gt;&gt; <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> bitIdx = n % <span class="number">32</span>;</span><br><span class="line"></span><br><span class="line">_bit[idx] &amp;= ~(<span class="number">1</span> &lt;&lt; bitIdx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">vector&lt;<span class="type">int</span>&gt; _bit;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å¸ƒéš†è¿‡æ»¤å™¨"><a href="#å¸ƒéš†è¿‡æ»¤å™¨" class="headerlink" title="å¸ƒéš†è¿‡æ»¤å™¨"></a>å¸ƒéš†è¿‡æ»¤å™¨</h1><p>å¤šä¸ªä½ç½®æ˜ å°„æ¥è®°å½•æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œä¸èƒ½ç›´æ¥æ”¯æŒåˆ é™¤æ“ä½œï¼Œå¯ä»¥é€šè¿‡å°†æ¯ä¸ªæ¯”ç‰¹ä¸ºæ‰©å±•ä¸ºä¸€ä¸ªæ•´å½¢ï¼Œä½œä¸ºæ•°æ®çš„è®¡æ•°å™¨ï¼Œæ·»åŠ å…ƒç´ åŠ ä¸€ï¼Œåˆ é™¤å‡ä¸€ï¼Œä½†ä¼šå¤šå ç”¨å‡ å€çš„å­˜å‚¨ç©ºé—´ï¼Œå¹¶ä¸”å…¶ä»ä¸èƒ½ä¿è¯æŸä¸ªæ•°æ®ä¸€å®šå­˜åœ¨ï¼ŒåŒæ—¶è¯¥æ–¹å¼å­˜åœ¨è®¡æ•°å›ç»•</p><p>mï¼šå¸ƒéš†è¿‡æ»¤å™¨çš„é•¿åº¦ï¼Œnï¼šæ’å…¥å…ƒç´ ä¸ªæ•°ï¼Œpï¼šè¯¯æŠ¥ç‡<br>$$<br>m&#x3D;-\frac {nlnp}{(ln2)^2}<br>$$<br>kï¼šå“ˆå¸Œå‡½æ•°ä¸ªæ•°<br>$$<br>k&#x3D;\frac mnln 2<br>$$<br>ç¼ºé™·ï¼š</p><ol><li>æœ‰è¯¯åˆ¤ç‡ï¼Œå³å­˜åœ¨å‡é˜³æ€§ï¼Œå³ä¸èƒ½å‡†ç¡®åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­(è¡¥æ•‘æ–¹æ³•ï¼šå†å»ºç«‹ä¸€ä¸ªç™½</li></ol><p>åå•ï¼Œå­˜å‚¨å¯èƒ½ä¼šè¯¯åˆ¤çš„æ•°æ®)</p><ol start="2"><li>ä¸èƒ½è·å–å…ƒç´ æœ¬èº«</li><li>ä¸€èˆ¬æƒ…å†µä¸‹ä¸èƒ½ä»å¸ƒéš†è¿‡æ»¤å™¨ä¸­åˆ é™¤å…ƒç´ </li><li>å¦‚æœé‡‡ç”¨è®¡æ•°æ–¹å¼åˆ é™¤ï¼Œå¯èƒ½ä¼šå­˜åœ¨è®¡æ•°å›ç»•é—®é¢˜</li></ol><p>ä¼˜ç‚¹:</p><ol><li>å¢åŠ å’ŒæŸ¥è¯¢å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(K)ï¼Œkä¸ºå“ˆå¸Œå‡½æ•°ä¸ªæ•°ï¼Œä¸€èˆ¬æ¯”è¾ƒå°ï¼Œä¸æ•°æ®é‡å¤§å°æ— å…³</li><li>å“ˆå¸Œå‡½æ•°ç›¸äº’ä¹‹é—´æ²¡æœ‰å…³ç³»ï¼Œæ–¹ä¾¿ç¡¬ä»¶å¹¶è¡Œè¿ç®—</li><li>ä¸éœ€è¦å­˜å‚¨å…ƒç´ æœ¬èº«ï¼Œåœ¨æŸäº›å¯¹ä¿å¯†è¦æ±‚æ¯”è¾ƒä¸¥æ ¼çš„åœºåˆæœ‰å¾ˆå¤§ä¼˜åŠ¿</li><li>èƒ½å¤Ÿæ‰¿å—ä¸€å®šèŒƒå›´å†…çš„è¯¯åˆ¤ï¼Œå ç”¨ç©ºé—´å°</li><li>æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œå¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥è¡¨ç¤ºå…¨é›†</li><li>ä½¿ç”¨åŒä¸€ç»„æ•£åˆ—å‡½æ•°çš„å¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥è¿›è¡Œäº¤ã€å¹¶ã€å·®è¿ç®—</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">strToint1</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">strToint2</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">strToint3</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">HF1</span>, <span class="keyword">class</span> <span class="title class_">HF2</span>, <span class="keyword">class</span> <span class="title class_">HF3</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BloomFilter</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//bitä½æ•°é‡ = hashå‡½æ•°ä¸ªæ•° * æ•°æ®é‡ / ln2</span></span><br><span class="line"><span class="built_in">BloomFilter</span>(<span class="type">size_t</span> num)</span><br><span class="line">: _bit(<span class="number">5</span> * num)</span><br><span class="line">, _bitCount(<span class="number">5</span> * num)</span><br><span class="line">&#123; &#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Set</span><span class="params">(<span class="type">const</span> T&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HF1 hf1;</span><br><span class="line">HF2 hf2;</span><br><span class="line">HF3 hf3;</span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> hashCode1 = <span class="built_in">hf1</span>(value);</span><br><span class="line"><span class="type">size_t</span> hashCode2 = <span class="built_in">hf2</span>(value);</span><br><span class="line"><span class="type">size_t</span> hashCode3 = <span class="built_in">hf3</span>(value);</span><br><span class="line"></span><br><span class="line">_bit.<span class="built_in">Set</span>(hashCode1 % _bitCount);</span><br><span class="line">_bit.<span class="built_in">Set</span>(hashCode2 % _bitCount);</span><br><span class="line">_bit.<span class="built_in">Set</span>(hashCode3 % _bitCount);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Test</span><span class="params">(<span class="type">const</span> T&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">HF1 hf1;</span><br><span class="line"><span class="type">size_t</span> hashCode1 = <span class="built_in">hf1</span>(value);</span><br><span class="line"><span class="keyword">if</span> (!_bit.<span class="built_in">Test</span>(hashCode1 % _bitCount))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">HF2 hf2;</span><br><span class="line"><span class="type">size_t</span> hashCode2 = <span class="built_in">hf2</span>(value);</span><br><span class="line"><span class="keyword">if</span> (!_bit.<span class="built_in">Test</span>(hashCode2 % _bitCount))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">HF3 hf3;</span><br><span class="line"><span class="type">size_t</span> hashCode3 = <span class="built_in">hf3</span>(value);</span><br><span class="line"><span class="keyword">if</span> (!_bit.<span class="built_in">Test</span>(hashCode3 % _bitCount))</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">BitMap _bit;</span><br><span class="line"><span class="type">size_t</span> _bitCount;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="å¯¹äºå¤§æ•°æ®çš„å¤„ç†"><a href="#å¯¹äºå¤§æ•°æ®çš„å¤„ç†" class="headerlink" title="å¯¹äºå¤§æ•°æ®çš„å¤„ç†"></a>å¯¹äºå¤§æ•°æ®çš„å¤„ç†</h1><p>å¸¸è§„çš„æ€è·¯å¯¹äºæµ·é‡çš„æ•°æ®æ¥è¯´ï¼Œè¦ä¹ˆè¿‡äºè€—è´¹æ—¶é—´ï¼Œè¦ä¹ˆç©ºé—´å ç”¨è¿‡é«˜ï¼Œè€Œå“ˆå¸Œæ€æƒ³å¯ä»¥åœ¨å¤§æ•°æ®ä¸­å‘æŒ¥å¾ˆå¥½çš„ä½œç”¨ã€‚</p><ul><li>æ¯”å¦‚ï¼šç»™å®š100äº¿ä¸ªæ•´æ•°ï¼Œæƒ³è¦æ‰¾åˆ°å…¶ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•´æ•°</li></ul><p>æ­¤æ—¶å³å¯ä»¥åº”ç”¨ä½å›¾æ¥æ“ä½œï¼Œä½¿ç”¨ä¸¤ä¸ªæ¯”ç‰¹ä¸ºæ¥è¡¨ç¤ºä¸€ä¸ªæ•°æ®ï¼š</p><p>00ï¼šæ•°æ®ä¸å­˜åœ¨ï¼›</p><p>01ï¼šå‡ºç°è¿‡ä¸€æ¬¡ï¼›</p><p>10ï¼šå‡ºç°è¿‡å¤šæ¬¡ï¼›</p><p>å°†æ•°æ®æ˜ å°„åˆ°ä½å›¾ä¸­ï¼Œå¦‚æœå¯¹åº”ä½ç½®çš„æ¯”ç‰¹ä½ä¸º00ï¼Œåˆ™å°†å…¶æ”¹ä¸º01ï¼›å¦‚æœå¯¹åº”ä½ç½®ä¸º01ï¼Œåˆ™å°†å…¶æ”¹å†™ä¸º10ï¼Œå¦‚æœå¯¹åº”ä½ç½®ä¸º10ï¼Œåˆ™ä¸åšæ“ä½œã€‚</p><p>å…¨éƒ¨æ˜ å°„å®Œæˆåï¼Œæ¯ä¸¤ä¸ªæ¯”ç‰¹ä½è¿›è¡Œç»Ÿè®¡ï¼Œæ‰¾åˆ°å¯¹åº”æ¯”ç‰¹ä½ä¸º01çš„é‚£ä¸ªæ•°æ®å³å¯</p><blockquote><p>å‡å¦‚è¦æ‰¾åˆ°å‡ºç°æ¬¡æ•°ä¸è¶…è¿‡ä¸¤æ¬¡çš„æ•°æ®ï¼Œåˆ™åªéœ€æ‰©å……10ï¼šå‡ºç°è¿‡ä¸¤æ¬¡ï¼›11ï¼šå‡ºç°è¿‡å¤šæ¬¡ï¼Œæ˜ å°„å®Œæˆä¹‹åç»Ÿè®¡10ä¸01æ‰€å¯¹åº”çš„æ•°æ®å³å¯</p></blockquote><ul><li>æœ‰ä¸¤ä¸ªåˆ†åˆ«æœ‰100äº¿ä¸ªæ•´æ•°çš„æ–‡ä»¶ï¼Œè®¾æ³•æ‰¾åˆ°ä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†</li></ul><p>åŒæ ·åº”ç”¨ä½å›¾æ¥å¤„ç†ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªä½å›¾ï¼Œå°†ä¸¤ä¸ªæ–‡ä»¶æ˜ å°„åˆ°å…¶ä¸­å»ï¼Œç„¶åä¸¤ä¸ªä½å›¾è¿›è¡ŒæŒ‰ä½ä¸ï¼Œç»Ÿè®¡ç»“æœä¸­ä½å›¾ä¸º1çš„æ¯”ç‰¹ä½å³ä¸ºä¸¤ä¸ªæ–‡ä»¶çš„äº¤é›†</p><ul><li>ç»™ä¸€ä¸ªè¶…è¿‡100Gå¤§å°çš„log file, logä¸­å­˜ç€IPåœ°å€, è®¾è®¡ç®—æ³•æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„IPåœ°å€ï¼Ÿ ä¸ä¸Šé¢˜æ¡ä»¶ç›¸åŒï¼Œå¦‚ä½•æ‰¾åˆ°top Kçš„IPï¼Ÿ</li></ul><ol><li>å“ˆå¸Œåˆ‡å‰²ï¼Œå°†æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶</li><li>å°†IPåœ°å€è½¬åŒ–æˆæ•´æ•°ï¼Œå¹¶æ¨¡æ–‡ä»¶ä»½æ•°ï¼Œå°†å¯¹åº”çš„IPæ”¾åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­</li><li>é‡‡ç”¨unordered_mapç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶ä¸­IPçš„å‡ºç°æ¬¡æ•°ï¼Œæ‰¾åˆ°æœ€å¤šå³å¯</li><li>topKé—®é¢˜åˆ™æ˜¯åœ¨å“ˆå¸Œåˆ‡å‰²ä¹‹åï¼Œé‡‡ç”¨å°å †ï¼Œå…¶èŠ‚ç‚¹ä¸º&lt;IPï¼Œæ¬¡æ•°&gt;é”®å€¼å¯¹ï¼ŒåŒæ—¶éœ€è¦ä¸€ä¸ªä»¿å‡½æ•°ç±»æ¥å®ç°å¤§äºæ¯”è¾ƒï¼Œå…ˆç”¨Kä¸ªå…ƒç´ å»ºå †ï¼Œä¹‹åéå†æ‰€æœ‰å…ƒç´ ï¼Œå¦‚æœæ¬¡æ•°å°äºå †é¡¶å…ƒç´ ï¼Œä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æœå¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ é™¤å †é¡¶å…ƒç´ å¹¶æ’å…¥è¯¥å…ƒç´ ï¼Œéå†å®Œä¹‹åï¼Œå †å†…çš„å…ƒç´ å³ä¸ºtopK</li></ol><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä½å›¾ã€å¸ƒéš†è¿‡æ»¤å™¨å¯¹äºå¤§æ•°æ®çš„å¤„ç†æ˜¯æä¸ºåˆé€‚çš„ï¼Œåªéœ€è¦æ‰¾åˆ°å¯¹åº”çš„å¤„ç†åŠæ³•ï¼Œå®ƒï¼ˆå“ˆå¸Œï¼‰å¯ä»¥ä»¥æ¯”ä¼ ç»Ÿæ–¹æ³•æ›´é«˜æ•ˆçš„å®Œæˆéœ€æ±‚</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ä½å›¾&quot;&gt;&lt;a href=&quot;#ä½å›¾&quot; class=&quot;headerlink&quot; title=&quot;ä½å›¾&quot;&gt;&lt;/a&gt;ä½å›¾&lt;/h1&gt;&lt;p&gt;æ¯ä¸€ä¸ªæ¯”ç‰¹ä½æ¥è¡¨ç¤ºå½“å‰æ¯”ç‰¹ä½å¯¹åº”çš„æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ä¸º1ï¼Œä¸å­˜åœ¨ä¸º0&lt;/p&gt;
&lt;p&gt;æ•´æ•°æ•°ç»„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•´æ•°ä½ç½®ï¼šn&amp;#x2F;32&lt;/li&gt;
&lt;li&gt;æ•´æ•°ä½ç½®ä¸­å…·ä½“çš„bitä½ç½®ï¼šn%32&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;å³ç§»ç›¸å½“äºé™¤ï¼Œå³ç§»nä½ &amp;#x3D;&amp;#x3D; æ•°å­—â—2^n^&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½å›¾å®ç°ï¼šå“ˆå¸Œè¡¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®ç°ï¼šæ•´æ•°æ•°ç»„&lt;/li&gt;
&lt;li&gt;æ•°æ®å•å…ƒæ˜¯bitä½&lt;/li&gt;
&lt;li&gt;èŠ‚çœç©ºé—´ï¼Œä¸€ä¸ªå­—èŠ‚å¯ä»¥å­˜æ”¾8ä¸ªæ•´æ•°çš„äºŒå€¼ä¿¡æ¯ï¼ˆå­˜åœ¨ä¸å¦ï¼‰ï¼Œä¸å­˜æ”¾æ•°æ®æœ¬èº«&lt;/li&gt;
&lt;li&gt;æ“ä½œæ•ˆç‡é«˜ï¼Œé€šè¿‡å“ˆå¸Œæ˜ å°„è·å–ä½ç½®ï¼Œé€šè¿‡ä½è¿ç®—æ‰§è¡Œæ“ä½œï¼Œ æ—¶é—´æ•ˆç‡O(1)&lt;/li&gt;
&lt;li&gt;ä½ç½®æ˜ å°„ï¼š&lt;ol&gt;
&lt;li&gt;è·å–æ•´æ•°ä½ç½®ï¼Œn &amp;#x2F; 32&lt;/li&gt;
&lt;li&gt;è·å–æ•´æ•°çš„æ¯”ç‰¹ä½ï¼šn % 32&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;ä½å›¾éœ€è¦çš„ç©ºé—´å¤§å°å’Œæ•°æ®çš„èŒƒå›´æœ‰å…³ï¼Œå’Œæ•°æ®æœ¬èº«å¤§å°æ²¡æœ‰å…³ç³»&lt;/li&gt;
&lt;li&gt;é€‚åˆçš„åœºæ™¯ï¼šæ•°æ®ä¸é‡å¤ï¼Œä¿¡æ¯ç®€å•&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>äºŒå‰æœç´¢æ ‘çš„ç®€å•å®ç°</title>
    <link href="http://zhaozhuolin.com/2020/07/20200704.html"/>
    <id>http://zhaozhuolin.com/2020/07/20200704.html</id>
    <published>2020-07-04T10:37:00.000Z</published>
    <updated>2023-05-07T11:18:08.085Z</updated>
    
    <content type="html"><![CDATA[<h1 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h1><ul><li>è‹¥å·¦å­æ ‘éç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å€¼</li><li>è‹¥å³å­æ ‘éç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°æ ¹èŠ‚ç‚¹çš„å€¼</li><li>å·¦å³å­æ ‘ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘</li></ul><blockquote><p>ä¸Šè¿°æ¡ä»¶åä¹‹äº¦å¯</p></blockquote><span id="more"></span><h1 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h1><p>æ¥è¿‘äºŒåˆ†æŸ¥æ‰¾ï¼Œæœ€å¤§æŸ¥æ‰¾æ¬¡æ•°ä¸ºæ ‘çš„é«˜åº¦ï¼Œå¹³å‡æŸ¥æ‰¾æ¬¡æ•°Log<sub>2</sub> N</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">BSTNode</span></span><br><span class="line">&#123;</span><br><span class="line">  T _val;</span><br><span class="line">  BSTNode&lt;T&gt;* _left;</span><br><span class="line">  BSTNode&lt;T&gt;* _right;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">BSTNode</span>(<span class="type">const</span> T&amp; val = <span class="built_in">T</span>())</span><br><span class="line">    :_val(val)</span><br><span class="line">    , _left(<span class="literal">nullptr</span>)</span><br><span class="line">    , _right(<span class="literal">nullptr</span>)</span><br><span class="line">    &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BSTree</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">typedef</span> BSTNode&lt;T&gt; Node;</span><br><span class="line">  </span><br><span class="line">  <span class="function">Node* <span class="title">find</span><span class="params">(<span class="type">const</span> T&amp; val)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    Node* cur = _root;</span><br><span class="line">    <span class="keyword">while</span>(cur)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span>(cur-&gt;_val == val)&#123;</span><br><span class="line">        <span class="keyword">return</span> cur;        </span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cur-&gt;_val &lt; val)&#123;</span><br><span class="line">        cur = cur-&gt;right;</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(cur-&gt;_val &gt; val)&#123;</span><br><span class="line">        cur = cur-&gt;left;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  Node* _root = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h1><p>å¦‚æœæ ‘ä¸­å·²å­˜åœ¨éœ€è¦æ’å…¥çš„æ•°æ®ï¼Œåˆ™ä¸é‡å¤æ’å…¥</p><p>æ’å…¥ä½ç½®ä¸ºï¼šå¶å­ï¼Œå­æ ‘ä¸å®Œå…¨çš„éå¶å­ç»“ç‚¹ï¼Œå³åº¦ä¸º0æˆ–è€…1çš„èŠ‚ç‚¹ä½ç½®</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">insert</span><span class="params">(<span class="type">const</span> T&amp; val)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(_root == <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    _root = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  Node* cur = _root;</span><br><span class="line">  Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line">  <span class="keyword">while</span>(cur)</span><br><span class="line">  &#123;</span><br><span class="line">    parent = ur;</span><br><span class="line">    <span class="keyword">if</span>(cur-&gt;_val == val)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(cur-&gt;_val &lt; val)</span><br><span class="line">      cur = cur-&gt;_right;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      cur = cur-&gt;_left;</span><br><span class="line">  &#125;</span><br><span class="line">  cur = <span class="keyword">new</span> <span class="built_in">Node</span>(val);</span><br><span class="line">  <span class="keyword">if</span>(parent-&gt;_val &lt; val)</span><br><span class="line">    parent-&gt;_right = Node;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    parent-&gt;_left = cur;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h1><p>æœ‰ä»¥ä¸‹å››ç§æƒ…å†µ</p><pre><code>a. è¦åˆ é™¤çš„ç»“ç‚¹æ— å­©å­ç»“ç‚¹b. è¦åˆ é™¤çš„ç»“ç‚¹åªæœ‰å·¦å­©å­ç»“ç‚¹c. è¦åˆ é™¤çš„ç»“ç‚¹åªæœ‰å³å­©å­ç»“ç‚¹d. è¦åˆ é™¤çš„ç»“ç‚¹æœ‰å·¦ã€å³å­©å­ç»“ç‚¹</code></pre><ul><li><p>å·¦å­æ ‘ï¼šå·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹æ˜¯æ‰€æœ‰å·¦å­æ ‘ä¸­æœ€å¤§çš„èŠ‚ç‚¹</p></li><li><p>å³å­æ ‘ï¼šå³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹æ˜¯æ‰€æœ‰å³å­æ ‘ä¸­æœ€å°çš„èŠ‚ç‚¹</p></li></ul><p>åˆ é™¤åº¦ä¸º2çš„èŠ‚ç‚¹ï¼š</p><ol><li>æ‰¾åˆ°æ­¤èŠ‚ç‚¹ä¸­ï¼Œå·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹æˆ–è€…å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹</li><li>è¦åˆ é™¤çš„èŠ‚ç‚¹valæ›¿æ¢ä¸ºæœ€å·¦èŠ‚ç‚¹æˆ–è€…æœ€å³èŠ‚ç‚¹</li><li>çœŸæ­£è¦åˆ é™¤çš„æ˜¯æœ€å·¦æˆ–è€…æœ€å³èŠ‚ç‚¹</li><li>æ­¤æ—¶é—®é¢˜è½¬æ¢ä¸ºåˆ é™¤åº¦ä¸º0æˆ–è€…åº¦ä¸º1çš„èŠ‚ç‚¹</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">erase</span><span class="params">(<span class="type">const</span> T&amp; val)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">  <span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">  Node* cur = _root;</span><br><span class="line">  Node* parent = <span class="literal">nullptr</span>;</span><br><span class="line">  <span class="keyword">while</span> (cur)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (cur-&gt;_val == val) &#123;</span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(cur-&gt;_val &lt; val)&#123;</span><br><span class="line">  parent = cur;</span><br><span class="line">  cur = cur-&gt;_right;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">  parent = cur;</span><br><span class="line">  cur = cur-&gt;_left;</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">if</span> (cur == <span class="literal">nullptr</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">//åˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="comment">//1. å¶å­</span></span><br><span class="line">  <span class="keyword">if</span> (cur-&gt;_left == <span class="literal">nullptr</span> &amp;&amp; cur-&gt;_right == <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (cur == _root)</span><br><span class="line">  &#123;</span><br><span class="line">  _root = <span class="literal">nullptr</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line"><span class="keyword">if</span> (parent-&gt;_left == cur)</span><br><span class="line">parent-&gt;_left = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">parent-&gt;_right = <span class="literal">nullptr</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> cur;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//2.å·¦å­©å­ä¸ºç©º</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_left == <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (cur == _root)</span><br><span class="line">  _root = cur-&gt;_right;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (parent-&gt;_left == cur)</span><br><span class="line">  parent-&gt;_left = cur-&gt;_right;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  parent-&gt;_right = cur-&gt;_right;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> cur;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//3.å³å­©å­ä¸ºç©º</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (cur-&gt;_right == <span class="literal">nullptr</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (cur == _root)</span><br><span class="line">  _root = cur-&gt;_left;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">if</span> (parent-&gt;_left == cur)</span><br><span class="line">  parent-&gt;_left = cur-&gt;_left;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  parent-&gt;_right = cur-&gt;_left;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> cur;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//4.å·¦å³å­©å­éƒ½å­˜åœ¨</span></span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  &#123;</span><br><span class="line">  <span class="comment">//a.ç…§æœ€å·¦æˆ–æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">  <span class="comment">//æ‰¾å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹</span></span><br><span class="line">  Node* leftMostChild = cur-&gt;_right;</span><br><span class="line">  Node* parent = cur;</span><br><span class="line">  <span class="keyword">while</span> (leftMostChild-&gt;_left)</span><br><span class="line">  &#123;</span><br><span class="line">  parent = leftMostChild;</span><br><span class="line">  leftMostChild = leftMostChild-&gt;_left;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//b.å€¼æ›¿æ¢</span></span><br><span class="line">  cur-&gt;_val = leftMostChild-&gt;_val;</span><br><span class="line">  <span class="comment">//c.åˆ é™¤æœ€å·¦æˆ–æœ€å³èŠ‚ç‚¹</span></span><br><span class="line">  <span class="keyword">if</span> (parent-&gt;_left == leftMostChild)</span><br><span class="line">  parent-&gt;_left = leftMostChild-&gt;_right;</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">  parent-&gt;_right = leftMostChild-&gt;_right;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span> leftMostChild;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;äºŒå‰æœç´¢æ ‘&quot;&gt;&lt;a href=&quot;#äºŒå‰æœç´¢æ ‘&quot; class=&quot;headerlink&quot; title=&quot;äºŒå‰æœç´¢æ ‘&quot;&gt;&lt;/a&gt;äºŒå‰æœç´¢æ ‘&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;è‹¥å·¦å­æ ‘éç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºæ ¹èŠ‚ç‚¹çš„å€¼&lt;/li&gt;
&lt;li&gt;è‹¥å³å­æ ‘éç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°æ ¹èŠ‚ç‚¹çš„å€¼&lt;/li&gt;
&lt;li&gt;å·¦å³å­æ ‘ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šè¿°æ¡ä»¶åä¹‹äº¦å¯&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="æ•°æ®ç»“æ„" scheme="http://zhaozhuolin.com/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>C++å¤šæ€çš„åŸºæœ¬åŸç†åŠä½¿ç”¨</title>
    <link href="http://zhaozhuolin.com/2020/06/20200628.html"/>
    <id>http://zhaozhuolin.com/2020/06/20200628.html</id>
    <published>2020-06-28T09:33:20.000Z</published>
    <updated>2023-05-07T11:18:08.082Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°"><a href="#å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°" class="headerlink" title="å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°"></a>å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°</h1><p>å¤šç§å½¢æ€ï¼Œå½“ä¸åŒçš„å¯¹è±¡å»æ‰§è¡ŒåŒä¸€ç§è¡Œä¸ºæ—¶ï¼Œäº§ç”Ÿçš„ä¸åŒè¡¨ç°å½¢æ€</p><p><strong>æ„æˆæ¡ä»¶ï¼š</strong>åœ¨ä¸åŒçš„ç»§æ‰¿å…³ç³»çš„ç±»å¯¹è±¡ï¼Œå»è°ƒç”¨åŒä¸€å‡½æ•°ï¼Œäº§ç”Ÿäº†ä¸åŒçš„è¡Œä¸º</p><ol><li>ç»§æ‰¿å…³ç³»</li><li>å¿…é¡»é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨è°ƒç”¨çš„è™šå‡½æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨çˆ¶ç±»æŒ‡é’ˆ&#x2F;å¼•ç”¨æŒ‡å‘çˆ¶ç±»ä»¥åŠå­ç±»å®ä½“ï¼Œå³éƒ½ä¸ºåˆ‡ç‰‡è¡Œä¸º</li><li>è¢«è°ƒç”¨çš„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°ï¼Œä¸”æ´¾ç”Ÿç±»å¿…é¡»å¯¹åŸºç±»çš„è™šå‡½æ•°è¿›è¡Œé‡å†™</li></ol><span id="more"></span><blockquote><p>å¿…é¡»åŒæ—¶æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œç¼ºä¸€ä¸å¯</p></blockquote><p><strong>è™šå‡½æ•°çš„é‡å†™ï¼š</strong>é‡å†™å‡½æ•°é€»è¾‘</p><p>æ„æˆè™šå‡½æ•°é‡å†™æ¡ä»¶ï¼šå­ç±»å«æœ‰å’Œçˆ¶ç±»æ¥å£å®Œå…¨ç›¸åŒçš„å‡½æ•°ï¼ˆè¿”å›å€¼ï¼Œå‡½æ•°åï¼Œå‚æ•°å®Œå…¨ç›¸åŒï¼‰ï¼Œä¾‹å¤–ï¼šåå˜ï¼Œææ„å‡½æ•°é‡å†™ï¼Œå¦‚æœä¸æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œä½†æ˜¯å‡½æ•°åç›¸åŒï¼Œåˆ™æ„æˆå‡½æ•°éšè—</p><blockquote><p>åå˜ï¼šè¿”å›å€¼ç±»å‹å¯ä»¥ä¸åŒï¼Œä½†æ˜¯è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯çˆ¶å­å…³ç³»</p></blockquote><p>æ³¨æ„ï¼šå¦‚æœçˆ¶ç±»å‡½æ•°åŠ äº†<code>virtual</code>å£°æ˜ï¼Œåˆ™å­ç±»æ¥å£å®Œå…¨ä¸€è‡´çš„å‡½æ•°å³ä½¿ä¸åŠ <code>virtual</code>ä¹Ÿå…·æœ‰è™šå‡½æ•°çš„å±æ€§ï¼Œä½†æ˜¯åè¿‡æ¥ä¸æˆç«‹ï¼Œå»ºè®®ä¸€èˆ¬å¯¹äºæ‰€æœ‰çš„è™šå‡½æ•°éƒ½åŠ ä¸Š<code>virtual</code></p><blockquote><p>éå¤šæ€ï¼šçœ‹ç±»å‹</p><p>å¤šæ€ï¼šçœ‹å®é™…æŒ‡å‘çš„å®ä½“</p></blockquote><p><strong>ææ„å‡½æ•°é‡å†™ï¼š</strong></p><ol><li><p>åªè¦çˆ¶ç±»çš„ææ„å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œåˆ™å­ç±»çš„ææ„å‡½æ•°å’Œçˆ¶ç±»çš„ææ„å‡½æ•°æ„æˆé‡å†™</p><p> åŸå› ï¼šç¼–è¯‘å™¨å¯¹ç»§æ‰¿å…³ç³»ä¸‹çš„æ‰€æœ‰ç±»çš„ææ„å‡½æ•°çš„åå­—åšäº†ç»Ÿä¸€å¤„ç†ï¼Œä¿è¯äº†ç»§æ‰¿å…³ç³»ä¸‹æ‰€æœ‰çš„ææ„å‡½æ•°åŒåï¼Œä¸€èˆ¬æŠŠææ„å‡½æ•°çš„åç§°ç»Ÿä¸€å¤„ç†æˆ<code>destructor</code></p></li></ol><p><code>final</code>å’Œ<code>override</code>å…³é”®å­—ï¼š</p><ol><li><code>final</code>ï¼šä¿®é¥°è™šå‡½æ•°ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°ä¸èƒ½å†è¢«ç»§æ‰¿ï¼Œå…¶å®šä¹‰çš„å‡½æ•°ä¸èƒ½è¢«é‡å†™ï¼Œä½“ç°å®ç°ç»§æ‰¿</li><li><code>override</code>ï¼šæ£€æŸ¥æ´¾ç”Ÿç±»è™šå‡½æ•°æ˜¯å¦é‡å†™äº†æŸä¸ªè™šå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é‡å†™åˆ™ç¼–è¯‘æŠ¥é”™ï¼Œå¼ºåˆ¶å­ç±»é‡å†™çˆ¶ç±»çš„æŸä¸€ä¸ªè™šå‡½æ•°</li></ol><h1 id="æŠ½è±¡ç±»"><a href="#æŠ½è±¡ç±»" class="headerlink" title="æŠ½è±¡ç±»"></a>æŠ½è±¡ç±»</h1><p>æŠ½è±¡ç±»ï¼šåŒ…å«çº¯å‡½æ•°çš„ç±»ï¼ŒæŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–å¯¹è±¡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">//çº¯è™šå‡½æ•°ï¼šæ²¡æœ‰å‡½æ•°ä½“çš„è™šå‡½æ•°</span></span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;B::fun()&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//æ— æ³•æ‰§è¡Œä»¥ä¸‹ä»£ç </span></span><br><span class="line">  <span class="comment">//A a;</span></span><br><span class="line">  <span class="comment">//a.fun();</span></span><br><span class="line">  </span><br><span class="line">  B b;</span><br><span class="line">  A* pb = &amp;b;</span><br><span class="line">  b.<span class="built_in">fun</span>();</span><br><span class="line">  pb-&gt;<span class="built_in">fun</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠ½è±¡ç±»å­˜åœ¨æ„ä¹‰ï¼Œå®ç°å¤šæ€ï¼Œå…¶ä½“ç°å‡ºæ¥å£ç»§æ‰¿</p><h1 id="å¤šæ€åŸç†"><a href="#å¤šæ€åŸç†" class="headerlink" title="å¤šæ€åŸç†"></a>å¤šæ€åŸç†</h1><h2 id="è™šå‡½æ•°è¡¨"><a href="#è™šå‡½æ•°è¡¨" class="headerlink" title="è™šå‡½æ•°è¡¨"></a>è™šå‡½æ•°è¡¨</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">D</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">Drive</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="comment">//åŒ…å«éšè—æˆå‘˜å˜é‡ï¼Œè™šå‡½æ•°è¡¨æŒ‡é’ˆ</span></span></span><br><span class="line"><span class="function">&#125;</span>;</span><br></pre></td></tr></table></figure><p><strong>åŒ…å«è™šå‡½æ•°çš„ç±»ï¼š</strong>ç±»ä¸­åŒ…å«ä¸€ä¸ªéšå«çš„æˆå‘˜å˜é‡ï¼Œå³è™šè¡¨æŒ‡é’ˆ</p><p><strong>è™šè¡¨æŒ‡é’ˆï¼š</strong>æŒ‡å‘è™šè¡¨çš„é¦–åœ°å€ï¼Œç±»å‹ä¸ºäºŒçº§æŒ‡é’ˆï¼Œå‡½æ•°æŒ‡é’ˆçš„æŒ‡é’ˆ</p><p><strong>è™šè¡¨ï¼š</strong>å­˜æ”¾è™šå‡½æ•°æŒ‡é’ˆçš„æ•°ç»„ï¼Œç±»å‹ä¸ºæŒ‡é’ˆæ•°ç»„</p><ol><li>åªå­˜æ”¾è™šå‡½æ•°çš„æŒ‡é’ˆ</li><li>æ™®é€šå‡½æ•°ä¸ä¼šå­˜å…¥è™šè¡¨</li><li>å¦‚æœå­ç±»é‡å†™äº†çˆ¶ç±»çš„è™šå‡½æ•°ï¼Œåˆ™å­ç±»è™šè¡¨ä¸­å¯¹åº”ä½ç½®ä½¿ç”¨å­ç±»è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–</li><li>å¦‚æœå­ç±»æ²¡æœ‰é‡å†™çˆ¶ç±»çš„ä»»ä½•è™šå‡½æ•°ï¼Œåˆ™å­ç±»å®Œå…¨ç»§æ‰¿çˆ¶ç±»è™šè¡¨ï¼Œä¸åšä»»ä½•ä¿®æ”¹</li><li>è™šå‡½æ•°æŒ‡é’ˆåœ¨è™šè¡¨ä¸­çš„å­˜æ”¾é¡ºåºå’Œå…¶å£°æ˜&#x2F;å®šä¹‰çš„é¡ºåºä¸€è‡´</li><li>å­ç±»æ–°å®šä¹‰çš„è™šå‡½æ•°ï¼Œå…¶è™šå‡½æ•°æŒ‡é’ˆæŒ‰ç…§å£°æ˜&#x2F;å®šä¹‰çš„é¡ºåºä¾æ¬¡åŠ å…¥è™šè¡¨çš„æœ«å°¾</li><li>è™šè¡¨ä¸€èˆ¬ä»¥<code>nullptr</code>ç»“æŸ</li></ol><blockquote><p>åªè¦ç±»ä¸­åŒ…å«è™šå‡½æ•°ï¼Œå°±ä¼šæœ‰è™šè¡¨æŒ‡é’ˆå’Œè™šè¡¨</p></blockquote><ul><li>è™šè¡¨æŒ‡é’ˆå­˜åœ¨å¯¹è±¡å½“ä¸­</li><li>è™šè¡¨å­˜æ”¾åœ¨ä»£ç æ®µ</li><li>è™šå‡½æ•°å­˜æ”¾åœ¨ä»£ç æ®µ</li></ul><p><strong>å¤šæ€ï¼šçœ‹å®é™…æŒ‡å‘çš„å®ä½“</strong></p><p>å¤šæ€åŸç†ï¼šå¦‚æœè®¿é—®çš„ä¸ºè™šå‡½æ•°ï¼Œåˆ™é€šè¿‡æŒ‡é’ˆ&#x2F;å¼•ç”¨æ‰¾åˆ°å®é™…æŒ‡å‘çš„å®ä½“ï¼Œè·å–å®ä½“ä¸­çš„è™šè¡¨æŒ‡é’ˆï¼Œé€šè¿‡è™šè¡¨æŒ‡é’ˆè®¿é—®è™šè¡¨ï¼Œåœ¨è™šè¡¨ä¸­æ‰¾åˆ°éœ€è¦æ‰§è¡Œçš„è™šå‡½æ•°æŒ‡é’ˆï¼Œé€šè¿‡è™šå‡½æ•°æŒ‡é’ˆæ‰§è¡Œå…·ä½“å‡½æ•°è¡Œä¸º</p><h2 id="ç»§æ‰¿ä¸‹çš„è™šè¡¨"><a href="#ç»§æ‰¿ä¸‹çš„è™šè¡¨" class="headerlink" title="ç»§æ‰¿ä¸‹çš„è™šè¡¨"></a>ç»§æ‰¿ä¸‹çš„è™šè¡¨</h2><p><strong>å•ç»§æ‰¿è™šè¡¨</strong>ï¼š</p><ol><li>å­ç±»ç»§æ‰¿çˆ¶ç±»è™šè¡¨</li><li>ç”¨é‡å†™çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–å­ç±»å¯¹åº”çš„è™šå‡½æ•°æŒ‡é’ˆ</li><li>å­ç±»æ–°å®šä¹‰çš„è™šå‡½æ•°ï¼Œå…¶æŒ‡é’ˆæŒ‰ç…§å£°æ˜&#x2F;å®šä¹‰é¡ºåºå­˜å…¥è™šè¡¨çš„æœ«å°¾</li></ol><p><strong>å¤šç»§æ‰¿è™šè¡¨ï¼š</strong></p><ol><li>è™šè¡¨ä¸ªæ•°ï¼šç­‰åŒäºç›´æ¥çˆ¶ç±»çš„ä¸ªæ•°</li><li>å­ç±»ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„è™šè¡¨</li><li>ç”¨é‡å†™çš„è™šå‡½æ•°æŒ‡é’ˆè¦†ç›–å¯¹åº”çˆ¶ç±»çš„è™šå‡½æ•°æŒ‡é’ˆ</li><li>å­ç±»æ–°å®šä¹‰çš„è™šå‡½æ•°ï¼Œå…¶å‡½æ•°æŒ‡é’ˆæŒ‰ç…§å£°æ˜&#x2F;å®šä¹‰çš„é¡ºåºå­˜å…¥ç¬¬ä¸€ä¸ªç›´æ¥çˆ¶ç±»è™šè¡¨çš„æœ«å°¾</li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°&quot;&gt;&lt;a href=&quot;#å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°&quot; class=&quot;headerlink&quot; title=&quot;å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°&quot;&gt;&lt;/a&gt;å¤šæ€çš„æ¦‚å¿µã€å®šä¹‰ä»¥åŠå®ç°&lt;/h1&gt;&lt;p&gt;å¤šç§å½¢æ€ï¼Œå½“ä¸åŒçš„å¯¹è±¡å»æ‰§è¡ŒåŒä¸€ç§è¡Œä¸ºæ—¶ï¼Œäº§ç”Ÿçš„ä¸åŒè¡¨ç°å½¢æ€&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ„æˆæ¡ä»¶ï¼š&lt;/strong&gt;åœ¨ä¸åŒçš„ç»§æ‰¿å…³ç³»çš„ç±»å¯¹è±¡ï¼Œå»è°ƒç”¨åŒä¸€å‡½æ•°ï¼Œäº§ç”Ÿäº†ä¸åŒçš„è¡Œä¸º&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»§æ‰¿å…³ç³»&lt;/li&gt;
&lt;li&gt;å¿…é¡»é€šè¿‡åŸºç±»çš„æŒ‡é’ˆæˆ–è€…å¼•ç”¨è°ƒç”¨çš„è™šå‡½æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨çˆ¶ç±»æŒ‡é’ˆ&amp;#x2F;å¼•ç”¨æŒ‡å‘çˆ¶ç±»ä»¥åŠå­ç±»å®ä½“ï¼Œå³éƒ½ä¸ºåˆ‡ç‰‡è¡Œä¸º&lt;/li&gt;
&lt;li&gt;è¢«è°ƒç”¨çš„å‡½æ•°å¿…é¡»æ˜¯è™šå‡½æ•°ï¼Œä¸”æ´¾ç”Ÿç±»å¿…é¡»å¯¹åŸºç±»çš„è™šå‡½æ•°è¿›è¡Œé‡å†™&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/tags/C/"/>
    
    <category term="ç±»ä¸å¯¹è±¡" scheme="http://zhaozhuolin.com/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>C++ä¸­çš„ç»§æ‰¿</title>
    <link href="http://zhaozhuolin.com/2020/06/20200626.html"/>
    <id>http://zhaozhuolin.com/2020/06/20200626.html</id>
    <published>2020-06-26T07:50:27.000Z</published>
    <updated>2023-05-07T11:18:08.082Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç»§æ‰¿æ¦‚å¿µ"><a href="#ç»§æ‰¿æ¦‚å¿µ" class="headerlink" title="ç»§æ‰¿æ¦‚å¿µ"></a>ç»§æ‰¿æ¦‚å¿µ</h1><p>ç±»çº§åˆ«çš„ä»£ç å¤ç”¨</p><ol><li>ç»§æ‰¿æ–¹å¼ï¼špublicã€protectedã€private</li><li>protectdeè®¿é—®æƒé™&#x2F;privateè®¿é—®æƒé™ï¼š<ul><li>protected â€”&gt; åœ¨å½“å‰ç±»å’Œå­ç±»ä¸­å¯è§ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä¸å¯è§</li><li>private â€”&gt; åœ¨å½“å‰ç±»ä¸­å¯è§ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä¸å¯è§</li></ul></li><li>çˆ¶ç±»æˆå‘˜åœ¨å­ç±»ä¸­çš„è®¿é—®æƒé™ï¼šmin { æˆå‘˜åœ¨çˆ¶ç±»ä¸­çš„åŸå§‹è®¿é—®æƒé™ï¼Œç»§æ‰¿æ–¹å¼ }</li><li>ä¸€èˆ¬éƒ½æ˜¯publicç»§æ‰¿ï¼Œprotected&#x2F;privateç»§æ‰¿å¾ˆå°‘ä½¿ç”¨&#x2F;å‡ ä¹ä¸ç”¨</li><li>é»˜è®¤ç»§æ‰¿æ–¹å¼ï¼š<ul><li>classå®šä¹‰çš„ç±»é»˜è®¤ç»§æ‰¿æ–¹å¼æ˜¯private</li><li>structå®šä¹‰çš„ç±»é»˜è®¤ç»§æ‰¿æ–¹å¼public</li></ul></li></ol><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span>/<span class="keyword">struct</span> ç±»å : éœ€è¦ç»§æ‰¿çš„ç±»</span><br><span class="line">  å­ç±»/æ´¾ç”Ÿç±»  çˆ¶ç±»/åŸºç±»</span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">Print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;nema:&quot;</span> &lt;&lt; _name &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;age:&quot;</span> &lt;&lt; _age &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">protected</span>:<span class="comment">//ç±»å¤–ä¸å¯è§ï¼Œå†…éƒ¨å’Œå­ç±»å¯è§</span></span><br><span class="line">  string _name = <span class="string">&quot;abc&quot;</span>;</span><br><span class="line">  <span class="type">int</span> _age = <span class="number">10</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  <span class="type">int</span> _num = <span class="number">2020</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å­ç±»ç»§æ‰¿æ–¹å¼ä¸ºprotected&#x2F;privateï¼Œä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„æ‰€ç”¨æˆå‘˜çš„æœ€ä½è®¿é—®æƒé™ä¸ºprotected&#x2F;privateï¼Œæ‰€ä»¥åœ¨å­ç±»å¤–ä¸å¯è§</p><table><thead><tr><th>ç±»æˆå‘˜&#x2F;ç»§æ‰¿æ–¹å¼</th><th>publicç»§æ‰¿</th><th>protectedç»§æ‰¿</th><th>privateç»§æ‰¿</th></tr></thead><tbody><tr><td>åŸºç±»çš„publicæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„publicæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„protectedæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„privateæˆå‘˜</td></tr><tr><td>åŸºç±»çš„protectedæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„protectedæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„protectedæˆå‘˜</td><td>æ´¾ç”Ÿç±»çš„privateæˆå‘˜</td></tr><tr><td>åŸºç±»çš„privateæˆå‘˜</td><td>æ´¾ç”Ÿç±»ä¸å¯è§</td><td>åœ¨æ´¾ç”Ÿç±»ä¸å¯è§</td><td>æ´¾ç”Ÿç±»ä¸å¯è§</td></tr></tbody></table><h1 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h1><p>å­ç±»å¯¹è±¡ï¼ŒæŒ‡é’ˆï¼Œå¼•ç”¨å¯ä»¥ç›´æ¥èµ‹å€¼ç»™çˆ¶ç±»å¯¹è±¡ï¼ŒæŒ‡é’ˆï¼Œå¼•ç”¨ï¼Œ<strong>æ­¤å¤„ä¸æ˜¯éšå¼ç±»å‹è½¬æ¢</strong></p><p>çˆ¶ç±»å¯¹è±¡ä¸èƒ½èµ‹å€¼ç»™å­ç±»å¯¹è±¡</p><p>çˆ¶ç±»æŒ‡é’ˆã€å¼•ç”¨ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™å­ç±»æŒ‡é’ˆã€å¼•ç”¨ã€‚å¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢è¿›è¡Œèµ‹å€¼ï¼Œä½†æ˜¯å¼ºåˆ¶è½¬æ¢ç±»å‹ä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´è¶Šç•Œï¼Œä¸€èˆ¬ä¸ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè€Œæ˜¯åŠ¨æ€ç±»å‹è½¬æ¢</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Person p;</span><br><span class="line">Student st;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ‡ç‰‡</span></span><br><span class="line">p = st;</span><br><span class="line">Person&amp; rs = st;</span><br><span class="line">Person* ptrrs = &amp;st;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸å¯è¡Œ</span></span><br><span class="line">st = p;</span><br><span class="line">Student&amp; rp = p;</span><br><span class="line">Student* ptrp = &amp;p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸å®‰å…¨ï¼Œå¯èƒ½ä¼šè®¿é—®è¶Šç•Œ</span></span><br><span class="line">Student&amp; rp = (Student&amp;)p;</span><br><span class="line">Student* ptrp = (Student*)&amp;p;</span><br></pre></td></tr></table></figure><blockquote><p> å­ç±»å¯¹åº”ç±»å‹èµ‹å€¼ç»™çˆ¶ç±»å¯¹åº”ç±»å‹ â€”&gt; åˆ‡ç‰‡ï¼š<strong>å®‰å…¨</strong>ï¼Œä¸æ˜¯éšå¼ç±»å‹è½¬æ¢</p></blockquote><blockquote><p> çˆ¶ç±»ï¼ˆæŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼‰èµ‹å€¼ç»™å­ç±»ï¼ˆæŒ‡é’ˆ&#x2F;å¼•ç”¨ï¼‰ â€”&gt; å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š<strong>ä¸å®‰å…¨</strong>ï¼Œå­˜åœ¨è®¿é—®è¶Šç•Œçš„é£é™©</p></blockquote><h1 id="åŒåéšè—"><a href="#åŒåéšè—" class="headerlink" title="åŒåéšè—"></a>åŒåéšè—</h1><p>çˆ¶ç±»å’Œå­ç±»ä¸­æœ‰åŒåçš„æˆå‘˜ï¼Œå­ç±»åªèƒ½ç›´æ¥çœ‹åˆ°è‡ªå·±çš„æˆå‘˜ï¼Œå¦‚æœéœ€è¦è®¿é—®çˆ¶ç±»åŒåçš„æˆå‘˜ï¼Œéœ€è¦åŠ çˆ¶ç±»ä½œç”¨åŸŸï¼Œä¸åŒçš„ä½œç”¨åŸŸä¸‹ï¼Œå«æœ‰åŒåæˆå‘˜ï¼Œå½“å‰ä½œç”¨åŸŸä¸‹çš„æˆå‘˜å°±ä¼šéšè—å…¶ä»–ä½œç”¨åŸŸä¸‹çš„æˆå‘˜ï¼Œ<em>ä¸æ˜¯ç»§æ‰¿ä½“ç³»ç‹¬æœ‰çš„</em>ã€‚</p><ul><li>æˆå‘˜å˜é‡éšè—ï¼šæˆå‘˜å˜é‡çš„åç§°ç›¸åŒ</li><li>å‡½æ•°éšè—ï¼šå‡½æ•°åå­—ç›¸åŒï¼Œå°±ä¼šæ„æˆå‡½æ•°éšè—ï¼Œä¸å‚æ•°æ— å…³ â€”&gt; è¿™ç§æƒ…å†µæ˜¯å‘ç”Ÿåœ¨çˆ¶ç±»å’Œå­ç±»æ±‡æ€»ï¼Œä¸åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼›å‡½æ•°é‡è½½ï¼šåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸï¼Œå‡½æ•°åç›¸åŒï¼Œå‚æ•°ä¸åŒ</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="keyword">public</span> Person</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">setNum</span><span class="params">(<span class="type">int</span> _num)</span></span></span><br><span class="line"><span class="function">  </span>&#123; _num = _num; &#125;<span class="comment">//å°±è¿‘åŸåˆ™ï¼Œæ­¤æ—¶ä¸ºå±€éƒ¨åŸŸï¼Œå±€éƒ¨å˜é‡</span></span><br><span class="line">  <span class="keyword">protected</span>:</span><br><span class="line">  <span class="type">int</span> _num = <span class="number">2020</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Student st;</span><br><span class="line">cout &lt;&lt; st._num &lt;&lt; endl;</span><br><span class="line">st.<span class="built_in">setNum</span>(<span class="number">1999</span>);</span><br><span class="line">cout &lt;&lt; st._num &lt;&lt; endl;<span class="comment">//2020</span></span><br></pre></td></tr></table></figure><blockquote><p>åŒåéšè—ï¼šçˆ¶ç±»ä¸­çš„åŒåæˆå‘˜è¢«å­ç±»ä¸­çš„åŒåæˆå‘˜éšè—</p></blockquote><p>çˆ¶ç±»ã€å­ç±»çš„ä½œç”¨åŸŸéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸åŒçš„ä½œç”¨åŸŸä¸­å¯ä»¥æœ‰åŒåçš„æˆå‘˜ï¼Œåªè¦å‡½æ•°åç›¸åŒï¼Œå°±ä¼šæ„æˆåŒåéšè—ï¼Œä¸æ˜¯å‡½æ•°é‡è½½</p><h1 id="æ´¾ç”Ÿç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°"><a href="#æ´¾ç”Ÿç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°" class="headerlink" title="æ´¾ç”Ÿç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°"></a>æ´¾ç”Ÿç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°</h1><blockquote><p> ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„é»˜è®¤æ„é€ è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ </p><p>æ˜¾ç¤ºå®šä¹‰çš„æ„é€ å‡½æ•°ä¹Ÿè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ ï¼Œåœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ </p><p>çˆ¶ç±»æˆå‘˜å¿…é¡»è¦ç”±çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆåˆå§‹åŒ–</p></blockquote><p><strong>å­ç±»æ„é€ å‡½æ•°ï¼š</strong></p><ol><li>ä¸€å®šä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°<ol><li>å¦‚æœä¸æ˜¾ç¤ºè°ƒç”¨ï¼Œè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ </li><li>å¦‚æœæ˜¾ç¤ºè°ƒç”¨ï¼Œåˆ™è°ƒç”¨æ˜¾ç¤ºæŒ‡å®šçš„çˆ¶ç±»æ„é€ </li></ol></li><li>ç»§æ‰¿è‡ªçˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œä¸€å®šè¦é€šè¿‡çˆ¶ç±»çš„æ„é€ å‡½æ•°å®Œæˆåˆå§‹åŒ–ï¼Œåœ¨å­ç±»çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­åªèƒ½æ˜¾ç¤ºçš„åˆå§‹åŒ–å­ç±»æ–°å¢çš„æˆå‘˜å˜é‡</li><li>åˆå§‹åŒ–é¡ºåºï¼šä¸€å®šæ˜¯é¦–å…ˆåˆå§‹åŒ–çˆ¶ç±»æˆå‘˜ï¼Œå†å»åˆå§‹åŒ–å­ç±»æˆå‘˜</li><li>åˆ›å»ºå­ç±»å¯¹è±¡æ—¶ï¼Œé¦–å…ˆè°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨å­ç±»æ„é€ å‡½æ•°çš„åˆå§‹åŒ–åˆ—è¡¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå…ˆæ‰§è¡Œçˆ¶ç±»çš„æ„é€ é€»è¾‘ï¼Œç„¶åå†æ‰§è¡Œå­ç±»æœ¬èº«çš„æ„é€ é€»è¾‘</li></ol><blockquote><p>ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„æ‹·è´æ„é€ è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ‹·è´æ„é€ </p><p>æ˜¾ç¤ºå®šä¹‰çš„æ‹·è´æ„é€ ï¼Œè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ ï¼Œä¸æ˜¯çˆ¶ç±»çš„æ‹·è´æ„é€ </p><p>è°ƒç”¨çˆ¶ç±»æ‹·è´æ„é€ ä¼šæœ‰æœ‰åˆ‡ç‰‡æ“ä½œ</p></blockquote><p><strong>å­ç±»çš„æ‹·è´æ„é€ ï¼š</strong></p><ol><li>é»˜è®¤è¡Œä¸ºï¼ˆæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰å­ç±»çš„æ‹·è´æ„é€ ï¼‰ï¼šçˆ¶ç±»çš„æ‹·è´æ„é€ </li><li>æ˜¾ç¤ºå®šä¹‰å­ç±»æ‹·è´æ„é€ é»˜è®¤è¡Œä¸ºï¼ˆæ²¡æœ‰æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„æ‹·è´æ„é€ ï¼‰ï¼šçˆ¶ç±»çš„é»˜è®¤æ„é€ </li><li>åœ¨å­ç±»çš„æ‹·è´æ„é€ ä¸­å¯ä»¥æŒ‡å®šè°ƒç”¨å“ªä¸€ä¸ªçˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä¸ä¸€å®šæ˜¯æ‹·è´æ„é€ </li></ol><blockquote><p>ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦é‡è½½å‡½æ•°</p><p>å­ç±»èµ‹å€¼è¿ç®—ç¬¦å’Œçˆ¶ç±»èµ‹å€¼è¿ç®—ç¬¦æ„æˆåŒåéšè—</p></blockquote><p><strong>å­ç±»çš„èµ‹å€¼è¿ç®—ç¬¦ï¼š</strong></p><ol><li>é»˜è®¤è¡Œä¸ºï¼šè°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦</li><li>æ˜¾ç¤ºå®šä¹‰ï¼šå’Œçˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦æ„æˆåŒåéšè—ï¼Œå¦‚æœéœ€è¦è°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦ï¼Œéœ€è¦æŒ‡å®šçˆ¶ç±»çš„ä½œç”¨åŸŸ</li><li>å»ºè®®è°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦ï¼šè¾¾åˆ°ä»£ç å¤ç”¨çš„ç›®çš„</li></ol><blockquote><p>çˆ¶ç±»ææ„ä¸éœ€è¦æ˜¾ç¤ºè°ƒç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºäºŒæ¬¡é‡Šæ”¾çš„é—®é¢˜</p></blockquote><p><strong>å­ç±»ææ„å‡½æ•°ï¼š</strong></p><ol><li>ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°</li><li>æ˜¾ç¤ºå®šä¹‰çš„å­ç±»ææ„å‡½æ•°ä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„ææ„å‡½æ•°</li><li>æ— è®ºå­ç±»ææ„æ˜¯å¦æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»ææ„ï¼Œç¼–è¯‘å™¨éƒ½ä¼šè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡çˆ¶ç±»ææ„</li><li>å­ç±»ææ„å’Œçˆ¶ç±»ææ„åº•å±‚å‡½æ•°åç›¸åŒï¼Œæ„æˆå‡½æ•°éšè—</li></ol><h1 id="ç»§æ‰¿ä¸å‹å…ƒã€é™æ€æˆå‘˜"><a href="#ç»§æ‰¿ä¸å‹å…ƒã€é™æ€æˆå‘˜" class="headerlink" title="ç»§æ‰¿ä¸å‹å…ƒã€é™æ€æˆå‘˜"></a>ç»§æ‰¿ä¸å‹å…ƒã€é™æ€æˆå‘˜</h1><p>å‹å…ƒå…³ç³»ä¸èƒ½ç»§æ‰¿ï¼ŒåŸºç±»çš„å‹å…ƒä¸èƒ½è®¿é—®å­ç±»çš„ç§æœ‰å’Œä¿æŠ¤æˆå‘˜</p><p>åŸºç±»å®šä¹‰äº†staticé™æ€æˆå‘˜ï¼Œåˆ™ç»§æ‰¿ä½“ç³»ä¸­åªæœ‰ä¸€ä¸ªè¿™æ ·çš„æˆå‘˜ï¼Œæ— è®ºæ´¾ç”Ÿå‡ºå¤šå°‘ä¸ªå­ç±»ï¼Œéƒ½åªæœ‰ä¸€ä¸ªstaticæˆå‘˜å®ä¾‹</p><h1 id="å¤æ‚ç»§æ‰¿"><a href="#å¤æ‚ç»§æ‰¿" class="headerlink" title="å¤æ‚ç»§æ‰¿"></a>å¤æ‚ç»§æ‰¿</h1><p><strong>å•ç»§æ‰¿ï¼š</strong>ä¸€ä¸ªå­ç±»åªæœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> B</span><br><span class="line">&#123;&#125;;</span><br></pre></td></tr></table></figure><p><strong>å¤šç»§æ‰¿ï¼š</strong>ä¸€ä¸ªå­ç±»æœ‰ä¸¤ä¸ªæˆ–ä»¥ä¸Šç›´æ¥çˆ¶ç±»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">c</span> : <span class="keyword">public</span> A, <span class="keyword">public</span> B</span><br><span class="line">&#123;&#125;;</span><br></pre></td></tr></table></figure><p><strong>è±å½¢ç»§æ‰¿ï¼š</strong>å¤šç»§æ‰¿çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µ</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">public</span> A</span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C</span><br><span class="line">&#123;&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>è±å½¢ç»§æ‰¿å­˜åœ¨æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§çš„é—®é¢˜</p></blockquote><h2 id="è±å½¢è™šæ‹Ÿç»§æ‰¿"><a href="#è±å½¢è™šæ‹Ÿç»§æ‰¿" class="headerlink" title="è±å½¢è™šæ‹Ÿç»§æ‰¿"></a>è±å½¢è™šæ‹Ÿç»§æ‰¿</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span></span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span> : <span class="keyword">virtual</span> <span class="keyword">public</span> A</span><br><span class="line">&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span> : <span class="keyword">public</span> B, <span class="keyword">public</span> C</span><br><span class="line">&#123;&#125;;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è™šåŸºè¡¨æŒ‡é’ˆå’Œè™šåŸºè¡¨ï¼Œè™šåŸºè¡¨å­˜æ”¾å…¬å…±éƒ¨åˆ†çš„åç§»é‡ï¼Œè™šåŸºè¡¨æŒ‡é’ˆæŒ‡å‘è™šåŸºè¡¨</p><p>è™šåŸºè¡¨</p><ol><li>ç›¸å¯¹äºå½“å‰ä½ç½®çš„åç§»é‡</li><li>ç›¸å¯¹äºå…¬å…±éƒ¨åˆ†åç§»é‡</li></ol><p>è±å½¢è™šæ‹Ÿç»§æ‰¿å¯ä»¥è§£å†³æ•°æ®å†—ä½™å’ŒäºŒä¹‰æ€§</p><ol><li>é€šè¿‡è™šåŸºè¡¨æŒ‡é’ˆå’Œè™šåŸºè¡¨å®ç°</li><li>å¦‚æœéœ€è¦è®¿é—®å…¬å…±æˆå‘˜ï¼šé¦–å…ˆé€šè¿‡è™šåŸºè¡¨æŒ‡é’ˆæ‰¾åˆ°è™šåŸºè¡¨ï¼Œè¯»å–åç§»é‡ï¼Œå½“å‰ä½ç½®åç§»æŒ‡å®šçš„åç§»é‡ï¼Œæ‰¾åˆ°å…¬å…±éƒ¨åˆ†æˆå‘˜ï¼Œ<strong>åˆ‡ç‰‡æ“ä½œçš„è¿‡ç¨‹</strong></li><li>é€šè¿‡æŒ‡é’ˆå¤§å°ï¼Œæ¢å–é‡å¤æˆå‘˜çš„å¤§å°</li><li>æ—¶é—´æ¢ç©ºé—´çš„è¯­æ³•</li></ol>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;ç»§æ‰¿æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#ç»§æ‰¿æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;ç»§æ‰¿æ¦‚å¿µ&quot;&gt;&lt;/a&gt;ç»§æ‰¿æ¦‚å¿µ&lt;/h1&gt;&lt;p&gt;ç±»çº§åˆ«çš„ä»£ç å¤ç”¨&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç»§æ‰¿æ–¹å¼ï¼špublicã€protectedã€private&lt;/li&gt;
&lt;li&gt;protectdeè®¿é—®æƒé™&amp;#x2F;privateè®¿é—®æƒé™ï¼š&lt;ul&gt;
&lt;li&gt;protected â€”&amp;gt; åœ¨å½“å‰ç±»å’Œå­ç±»ä¸­å¯è§ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä¸å¯è§&lt;/li&gt;
&lt;li&gt;private â€”&amp;gt; åœ¨å½“å‰ç±»ä¸­å¯è§ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä¸å¯è§&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;çˆ¶ç±»æˆå‘˜åœ¨å­ç±»ä¸­çš„è®¿é—®æƒé™ï¼šmin { æˆå‘˜åœ¨çˆ¶ç±»ä¸­çš„åŸå§‹è®¿é—®æƒé™ï¼Œç»§æ‰¿æ–¹å¼ }&lt;/li&gt;
&lt;li&gt;ä¸€èˆ¬éƒ½æ˜¯publicç»§æ‰¿ï¼Œprotected&amp;#x2F;privateç»§æ‰¿å¾ˆå°‘ä½¿ç”¨&amp;#x2F;å‡ ä¹ä¸ç”¨&lt;/li&gt;
&lt;li&gt;é»˜è®¤ç»§æ‰¿æ–¹å¼ï¼š&lt;ul&gt;
&lt;li&gt;classå®šä¹‰çš„ç±»é»˜è®¤ç»§æ‰¿æ–¹å¼æ˜¯private&lt;/li&gt;
&lt;li&gt;structå®šä¹‰çš„ç±»é»˜è®¤ç»§æ‰¿æ–¹å¼public&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;</summary>
    
    
    
    <category term="C++" scheme="http://zhaozhuolin.com/categories/C/"/>
    
    
    <category term="-ç±»ä¸å¯¹è±¡ -C++" scheme="http://zhaozhuolin.com/tags/%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1-C/"/>
    
  </entry>
  
</feed>
